LavaPack.loadBundle([[6956,{"../../../shared/constants/hardware-wallets":5806,"../../store/actionConstants":7834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t){var a,n,r;const i={...o,...e};switch(t.type){case s.UPDATE_CUSTOM_NONCE:return{...i,customNonceValue:t.value};case s.TOGGLE_ACCOUNT_MENU:return{...i,isAccountMenuOpen:!i.isAccountMenuOpen};case s.SET_NEXT_NONCE:return{...i,nextNonce:t.payload};case s.SET_PENDING_TOKENS:return{...i,pendingTokens:{...t.payload}};case s.CLEAR_PENDING_TOKENS:return{...i,pendingTokens:{}};case s.CLOSE_WELCOME_SCREEN:return{...i,welcomeScreenSeen:!0};case s.SET_CONFIRMATION_EXCHANGE_RATES:return{...i,confirmationExchangeRates:t.value};case s.RESET_ONBOARDING:return{...i,welcomeScreenSeen:!1};case s.NETWORK_DROPDOWN_OPEN:return{...i,networkDropdownOpen:!0};case s.NETWORK_DROPDOWN_CLOSE:return{...i,networkDropdownOpen:!1};case s.IMPORT_NFTS_MODAL_OPEN:return{...i,importNftsModal:{open:!0,...t.payload}};case s.IMPORT_NFTS_MODAL_CLOSE:return{...i,importNftsModal:{open:!1}};case s.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN:return{...i,showBasicFunctionalityModal:!0};case s.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE:return{...i,showBasicFunctionalityModal:!1};case s.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON:return{...i,externalServicesOnboardingToggleState:!0};case s.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF:return{...i,externalServicesOnboardingToggleState:!1};case s.SHOW_IPFS_MODAL_OPEN:return{...i,showIpfsModalOpen:!0};case s.SHOW_IPFS_MODAL_CLOSE:return{...i,showIpfsModalOpen:!1};case s.SHOW_PERMITTED_NETWORK_TOAST_OPEN:return{...i,showPermittedNetworkToastOpen:!0};case s.SHOW_PERMITTED_NETWORK_TOAST_CLOSE:return{...i,showPermittedNetworkToastOpen:!1};case s.IMPORT_TOKENS_POPOVER_OPEN:return{...i,importTokensModalOpen:!0};case s.IMPORT_TOKENS_POPOVER_CLOSE:return{...i,importTokensModalOpen:!1};case s.DEPRECATED_NETWORK_POPOVER_OPEN:return{...i,deprecatedNetworkModalOpen:!0};case s.DEPRECATED_NETWORK_POPOVER_CLOSE:return{...i,deprecatedNetworkModalOpen:!1};case s.ALERT_OPEN:return{...i,alertOpen:!0,alertMessage:t.payload};case s.ALERT_CLOSE:return{...i,alertOpen:!1,alertMessage:null};case s.SET_ACCOUNT_DETAILS_ADDRESS:return{...i,accountDetailsAddress:t.payload};case s.QR_CODE_DETECTED:return{...i,qrCodeData:t.value};case s.SET_SMART_TRANSACTIONS_ERROR:return{...i,smartTransactionsError:t.payload};case s.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE:return{...i,smartTransactionsErrorMessageDismissed:!0};case s.MODAL_OPEN:{const{name:e,...a}=t.payload;return{...i,modal:{open:!0,modalState:{name:e,props:{...a}},previousModalState:{...i.modal.modalState}}}}case s.MODAL_CLOSE:return{...i,modal:{...i.modal,open:!1,modalState:{name:null,props:{}},previousModalState:{...i.modal.modalState}}};case s.CLEAR_ACCOUNT_DETAILS:return{...i,accountDetail:{privateKey:""}};case s.SHOW_SEND_TOKEN_PAGE:case s.LOCK_METAMASK:return{...i,warning:null};case s.GO_HOME:return{...i,accountDetail:{privateKey:""},warning:null};case s.SHOW_ACCOUNTS_PAGE:return{...i,isLoading:!1,warning:null,scrollToBottom:!1};case s.SHOW_CONF_TX_PAGE:return{...i,txId:t.id,warning:null,isLoading:!1};case s.COMPLETED_TX:return{...i,warning:null,txId:null};case s.UNLOCK_FAILED:return{...i,warning:t.value||"Incorrect password. Try again."};case s.UNLOCK_SUCCEEDED:return{...i,warning:""};case s.SET_HARDWARE_WALLET_DEFAULT_HD_PATH:{const{device:e,path:a}=t.payload,n={...i.defaultHdPaths};return n[e]=a,{...i,defaultHdPaths:n}}case s.SHOW_LOADING:return{...i,isLoading:!0,loadingMessage:t.payload};case s.HIDE_LOADING:return{...i,isLoading:!1};case s.SHOW_NFT_STILL_FETCHING_INDICATION:return{...i,isNftStillFetchingIndication:!0};case s.SHOW_NFT_DETECTION_ENABLEMENT_TOAST:return{...i,showNftDetectionEnablementToast:t.payload};case s.HIDE_NFT_STILL_FETCHING_INDICATION:return{...i,isNftStillFetchingIndication:!1};case s.DISPLAY_WARNING:return{...i,warning:t.payload,isLoading:!1};case s.HIDE_WARNING:return{...i,warning:undefined};case s.SHOW_PRIVATE_KEY:return{...i,accountDetail:{privateKey:t.payload}};case s.SET_SELECTED_NETWORK_CONFIGURATION_ID:return{...i,selectedNetworkConfigurationId:t.payload};case s.SET_NEW_NETWORK_ADDED:{const{networkConfigurationId:e,nickname:a}=t.payload;return{...i,newNetworkAddedName:a,newNetworkAddedConfigurationId:e}}case s.SET_EDIT_NETWORK:return{...i,editedNetwork:t.payload};case s.SET_NEW_TOKENS_IMPORTED:return{...i,newTokensImported:t.payload};case s.SET_NEW_TOKENS_IMPORTED_ERROR:return{...i,newTokensImportedError:t.payload};case s.SET_NEW_NFT_ADDED_MESSAGE:return{...i,newNftAddedMessage:t.payload};case s.SET_REMOVE_NFT_MESSAGE:return{...i,removeNftMessage:t.payload};case s.SET_REQUEST_ACCOUNT_TABS:return{...i,requestAccountTabs:t.value};case s.SET_OPEN_METAMASK_TAB_IDS:return{...i,openMetaMaskTabs:t.payload};case s.HIDE_WHATS_NEW_POPUP:return{...i,showWhatsNewPopup:!1};case s.CAPTURE_SINGLE_EXCEPTION:return{...i,singleExceptions:{...i.singleExceptions,[t.value]:null}};case s.TOGGLE_GAS_LOADING_ANIMATION:return{...i,gasLoadingAnimationIsShowing:t.payload};case s.SET_WEBHID_CONNECTED_STATUS:return{...i,ledgerWebHidConnectedStatus:t.payload};case s.SET_LEDGER_TRANSPORT_STATUS:return{...i,ledgerTransportStatus:t.payload};case s.TOGGLE_CURRENCY_INPUT_SWITCH:return{...i,sendInputCurrencySwitched:!i.sendInputCurrencySwitched};case s.ONBOARDED_IN_THIS_UI_SESSION:return{...i,onboardedInThisUISession:t.payload};case s.SET_CUSTOM_TOKEN_AMOUNT:return{...i,customTokenAmount:t.payload};case s.TOGGLE_NETWORK_MENU:return{...i,isAddingNewNetwork:Boolean(null===(a=t.payload)||void 0===a?void 0:a.isAddingNewNetwork),isMultiRpcOnboarding:Boolean(null===(n=t.payload)||void 0===n?void 0:n.isMultiRpcOnboarding),isAccessedFromDappConnectedSitePopover:Boolean(null===(r=t.payload)||void 0===r?void 0:r.isAccessedFromDappConnectedSitePopover),isNetworkMenuOpen:!i.isNetworkMenuOpen};case s.DELETE_METAMETRICS_DATA_MODAL_OPEN:return{...i,showDeleteMetaMetricsDataModal:!0};case s.DELETE_METAMETRICS_DATA_MODAL_CLOSE:return{...i,showDeleteMetaMetricsDataModal:!1};case s.DATA_DELETION_ERROR_MODAL_OPEN:return{...i,showDataDeletionErrorModal:!0};case s.DATA_DELETION_ERROR_MODAL_CLOSE:return{...i,showDataDeletionErrorModal:!1};case s.SHOW_SETTINGS_PAGE_ERROR:return{...i,errorInSettings:t.payload};case s.HIDE_SETTINGS_PAGE_ERROR:return{...i,errorInSettings:null};case s.SHOW_KEYRING_SNAP_REMOVAL_RESULT:return{...i,showKeyringRemovalSnapModal:!0,keyringRemovalSnapModal:{...t.payload}};case s.HIDE_KEYRING_SNAP_REMOVAL_RESULT:return{...i,showKeyringRemovalSnapModal:!1,keyringRemovalSnapModal:{snapName:"",result:"none"}};case s.SET_SHOW_NEW_SRP_ADDED_TOAST:return{...i,showNewSrpAddedToast:t.payload};case s.SET_SHOW_PASSWORD_CHANGE_TOAST:return{...i,showPasswordChangeToast:t.payload};case s.SET_SHOW_COPY_ADDRESS_TOAST:return{...i,showCopyAddressToast:t.payload};case s.SET_SHOW_SUPPORT_DATA_CONSENT_MODAL:return{...i,showSupportDataConsentModal:t.payload};case s.SET_SHOW_CONNECTIONS_REMOVED:return{...i,showConnectionsRemovedModal:t.value};default:return i}},a.displayErrorInSettings=function(e){return{type:s.SHOW_SETTINGS_PAGE_ERROR,payload:e}},a.getGasLoadingAnimationIsShowing=function(e){return e.appState.gasLoadingAnimationIsShowing},a.getLedgerTransportStatus=function(e){return e.appState.ledgerTransportStatus},a.getLedgerWebHidConnectedStatus=function(e){return e.appState.ledgerWebHidConnectedStatus},a.getQrCodeData=function(e){return e.appState.qrCodeData},a.getShowCopyAddressToast=function(e){return e.appState.showCopyAddressToast},a.getShowSupportDataConsentModal=function(e){return e.appState.showSupportDataConsentModal},a.hideBasicFunctionalityModal=function(){return{type:s.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE}},a.hideDataDeletionErrorModal=function(){return{type:s.DATA_DELETION_ERROR_MODAL_CLOSE}},a.hideDeleteMetaMetricsDataModal=function(){return{type:s.DELETE_METAMETRICS_DATA_MODAL_CLOSE}},a.hideErrorInSettings=function(){return{type:s.HIDE_SETTINGS_PAGE_ERROR}},a.hideWhatsNewPopup=function(){return{type:s.HIDE_WHATS_NEW_POPUP}},a.onboardingToggleBasicFunctionalityOff=function(){return{type:s.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF}},a.onboardingToggleBasicFunctionalityOn=function(){return{type:s.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON}},a.openBasicFunctionalityModal=function(){return{type:s.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN}},a.openDataDeletionErrorModal=function(){return{type:s.DATA_DELETION_ERROR_MODAL_OPEN}},a.openDeleteMetaMetricsDataModal=function(){return{type:s.DELETE_METAMETRICS_DATA_MODAL_OPEN}},a.setCustomTokenAmount=function(e){return{type:s.SET_CUSTOM_TOKEN_AMOUNT,payload:e}},a.setLedgerTransportStatus=function(e){return{type:s.SET_LEDGER_TRANSPORT_STATUS,payload:e}},a.setLedgerWebHidConnectedStatus=function(e){return{type:s.SET_WEBHID_CONNECTED_STATUS,payload:e}},a.setOnBoardedInThisUISession=function(e){return{type:s.ONBOARDED_IN_THIS_UI_SESSION,payload:e}},a.setShowCopyAddressToast=function(e){return{type:s.SET_SHOW_COPY_ADDRESS_TOAST,payload:e}},a.toggleCurrencySwitch=function(){return{type:s.TOGGLE_CURRENCY_INPUT_SWITCH}},a.toggleGasLoadingAnimation=function(e){return{type:s.TOGGLE_GAS_LOADING_ANIMATION,payload:e}};var n=e("../../../shared/constants/hardware-wallets"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("../../store/actionConstants"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}const o={customNonceValue:"",isAccountMenuOpen:!1,isNetworkMenuOpen:!1,nextNonce:null,pendingTokens:{},welcomeScreenSeen:!1,confirmationExchangeRates:{},shouldClose:!1,menuOpen:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},alertOpen:!1,alertMessage:null,qrCodeData:null,networkDropdownOpen:!1,importNftsModal:{open:!1},showPermittedNetworkToastOpen:!1,showIpfsModalOpen:!1,showBasicFunctionalityModal:!1,externalServicesOnboardingToggleState:!0,keyringRemovalSnapModal:{snapName:"",result:"none"},showKeyringRemovalSnapModal:!1,importTokensModalOpen:!1,deprecatedNetworkModalOpen:!1,accountDetail:{privateKey:""},isLoading:!1,isNftStillFetchingIndication:!1,showNftDetectionEnablementToast:!1,loadingMessage:null,warning:null,buyView:{},defaultHdPaths:{trezor:"m/44'/60'/0'/0",oneKey:"m/44'/60'/0'/0",ledger:"m/44'/60'/0'/0/0",lattice:"m/44'/60'/0'/0"},networksTabSelectedRpcUrl:"",requestAccountTabs:{},openMetaMaskTabs:{},currentWindowTab:{},showWhatsNewPopup:!0,showTermsOfUsePopup:!0,singleExceptions:{testKey:null},gasLoadingAnimationIsShowing:!1,smartTransactionsError:null,smartTransactionsErrorMessageDismissed:!1,ledgerWebHidConnectedStatus:n.WebHIDConnectedStatuses.unknown,ledgerTransportStatus:n.HardwareTransportStates.none,newNftAddedMessage:"",removeNftMessage:"",newNetworkAddedName:"",editedNetwork:undefined,newNetworkAddedConfigurationId:"",selectedNetworkConfigurationId:"",sendInputCurrencySwitched:!1,newTokensImported:"",newTokensImportedError:"",onboardedInThisUISession:!1,customTokenAmount:"",scrollToBottom:!0,txId:null,accountDetailsAddress:"",showDeleteMetaMetricsDataModal:!1,showDataDeletionErrorModal:!1,snapsInstallPrivacyWarningShown:!1,isAddingNewNetwork:!1,isMultiRpcOnboarding:!1,isAccessedFromDappConnectedSitePopover:!1,errorInSettings:null,showNewSrpAddedToast:!1,showPasswordChangeToast:null,showCopyAddressToast:!1,showSupportDataConsentModal:!1,showConnectionsRemovedModal:!1}}}},{package:"$root$",file:"ui/ducks/app/app.ts"}],[6964,{"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/string-utils":5924,"../../../shared/modules/transaction.utils":5926,"../../helpers/utils/confirm-tx.util":7010,"../../selectors":7812,"../../selectors/custom-gas":7807,"../metamask/metamask":6971},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.clearConfirmTransaction=function(){return{type:T}},a.default=function(e=A,t={}){switch(t.type){case d:return{...e,txData:{...t.payload}};case p:return{...e,tokenData:{...t.payload}};case m:return{...e,tokenProps:{...t.payload}};case g:{const{fiatTransactionAmount:a,ethTransactionAmount:n,hexTransactionAmount:s}=t.payload;return{...e,fiatTransactionAmount:a||e.fiatTransactionAmount,ethTransactionAmount:n||e.ethTransactionAmount,hexTransactionAmount:s||e.hexTransactionAmount}}case f:{const{fiatTransactionFee:a,ethTransactionFee:n,hexTransactionFee:s}=t.payload;return{...e,fiatTransactionFee:a||e.fiatTransactionFee,ethTransactionFee:n||e.ethTransactionFee,hexTransactionFee:s||e.hexTransactionFee}}case S:{const{fiatTransactionTotal:a,ethTransactionTotal:n,hexTransactionTotal:s}=t.payload;return{...e,fiatTransactionTotal:a||e.fiatTransactionTotal,ethTransactionTotal:n||e.ethTransactionTotal,hexTransactionTotal:s||e.hexTransactionTotal}}case E:return{...e,nonce:t.payload};case T:return{...A,maxValueMode:e.maxValueMode};case h:return{...e,maxValueMode:{...e.maxValueMode,[t.payload.transactionId]:t.payload.enabled}};default:return e}},a.setMaxValueMode=function(e,t){return{type:h,payload:{transactionId:e,enabled:t}}},a.setTransactionToConfirm=function(e){return(t,a)=>{const r=a(),i=(0,n.unconfirmedTransactionsHashSelector)(r)[e];if(i)if(i.txParams){t(O(i));const{txParams:e}=i;if(e.data){const{to:a,data:n}=e,o=(0,l.parseStandardTokenTransactionData)(n),i=(0,s.getTokens)(r),u=null==i?void 0:i.find((({address:e})=>(0,c.isEqualCaseInsensitive)(a,e)));t(v({decimals:null==u?void 0:u.decimals,symbol:null==u?void 0:u.symbol})),t(I(o))}if(e.nonce){t(R((0,o.hexToDecimal)(e.nonce)))}}else t(_(i));else console.error(`Transaction with id ${e} not found`)}},a.updateNonce=R,a.updateTokenData=I,a.updateTokenProps=v,a.updateTransactionAmounts=y,a.updateTransactionFees=N,a.updateTransactionTotals=w,a.updateTxData=_,a.updateTxDataAndCalculate=O;var n=e("../../selectors"),s=e("../metamask/metamask"),r=e("../../helpers/utils/confirm-tx.util"),o=e("../../../shared/modules/conversion.utils"),i=e("../../selectors/custom-gas"),c=e("../../../shared/modules/string-utils"),l=e("../../../shared/modules/transaction.utils");const u=e=>`metamask/confirm-transaction/${e}`,d=u("UPDATE_TX_DATA"),p=u("UPDATE_TOKEN_DATA"),m=u("UPDATE_TOKEN_PROPS"),T=u("CLEAR_CONFIRM_TRANSACTION"),g=u("UPDATE_TRANSACTION_AMOUNTS"),f=u("UPDATE_TRANSACTION_FEES"),S=u("UPDATE_TRANSACTION_TOTALS"),E=u("UPDATE_NONCE"),h=u("SET_MAX_VALUE_MODE"),A={txData:{},tokenData:{},tokenProps:{},fiatTransactionAmount:"",fiatTransactionFee:"",fiatTransactionTotal:"",ethTransactionAmount:"",ethTransactionFee:"",ethTransactionTotal:"",hexTransactionAmount:"",hexTransactionFee:"",hexTransactionTotal:"",nonce:"",maxValueMode:{}};function _(e){return{type:d,payload:e}}function I(e){return{type:p,payload:e}}function v(e){return{type:m,payload:e}}function y(e){return{type:g,payload:e}}function N(e){return{type:f,payload:e}}function w(e){return{type:S,payload:e}}function R(e){return{type:E,payload:e}}function O(e){return(t,a)=>{const c=a(),l=(0,n.currentCurrencySelector)(c),u=(0,n.conversionRateSelector)(c),d=(0,s.getNativeCurrency)(c);t(_(e));const{txParams:{value:p="0x0",gas:m="0x0"}={}}=e;let{txParams:{gasPrice:T}={}}=e;T||(T=(0,i.getAveragePriceEstimateInHexWEI)(c)||"0x0");const g=(0,o.getValueFromWeiHex)({value:p,fromCurrency:d,toCurrency:l,conversionRate:u,numberOfDecimals:2}),f=(0,o.getValueFromWeiHex)({value:p,fromCurrency:d,toCurrency:d,conversionRate:u,numberOfDecimals:6});t(y({fiatTransactionAmount:g,ethTransactionAmount:f,hexTransactionAmount:p}));const S=(0,r.getHexGasTotal)({gasLimit:m,gasPrice:T}),E=(0,r.getTransactionFee)({value:S,fromCurrency:d,toCurrency:l,numberOfDecimals:2,conversionRate:u}),h=(0,r.getTransactionFee)({value:S,fromCurrency:d,toCurrency:d,numberOfDecimals:6,conversionRate:u});t(N({fiatTransactionFee:E,ethTransactionFee:h,hexTransactionFee:S}));t(w({fiatTransactionTotal:(0,r.addFiat)(E,g),ethTransactionTotal:(0,r.addEth)(h,f),hexTransactionTotal:(0,o.sumHexes)(p,S)}))}}}}},{package:"$root$",file:"ui/ducks/confirm-transaction/confirm-transaction.duck.js"}],[6965,{"../../shared/modules/hexstring-utils":5910,"../../shared/modules/selectors/networks":5921,"../pages/confirmations/send/send.constants":7509,"../selectors":7812,"../store/actionConstants":7834,"../store/actions":7835,"@metamask/snaps-rpc-methods":2683,"@reduxjs/toolkit":3046,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.domainInitialState=a.default=void 0,a.fetchResolutions=v,a.getDomainError=function(e){return e[T].error},a.getDomainResolutions=function(e){return e[T].resolutions},a.getDomainWarning=function(e){return e[T].warning},a.initializeDomainSlice=I,a.lookupDomainName=function(e){return async(t,a)=>{const n=e.trim();let s=a();"UNINITIALIZED"===s[T].stage&&await t(I()),await t(E(n)),s=a(),r.default.info(`Resolvers attempting to resolve name: ${n}`);const o=(0,c.getCurrentChainId)(s),i=parseInt(o,16),l=await v({domain:n,chainId:`eip155:${i}`,state:s});s=a(),n===s[T].domainName&&await t(h({resolutions:l,error:undefined,chainId:o,network:i,domainName:n}))}},a.resetDomainResolution=void 0;var n,s=e("@reduxjs/toolkit"),r=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("@metamask/snaps-rpc-methods"),i=e("../selectors"),c=e("../../shared/modules/selectors/networks"),l=e("../store/actions"),u=e("../pages/confirmations/send/send.constants"),d=e("../store/actionConstants"),p=e("../../shared/modules/hexstring-utils");const m={stage:"UNINITIALIZED",resolutions:null,error:null,warning:null,chainId:null,domainName:null},T=(a.domainInitialState=m,"DNS"),g=(0,s.createSlice)({name:T,initialState:m,reducers:{lookupStart:(e,t)=>{e.domainName=t.payload,e.warning="loading",e.error=null},lookupEnd:(e,t)=>{e.resolutions=null,e.error=null,e.warning=null,e.domainName=null;const{resolutions:a,domainName:n}=t.payload,s=a.filter((e=>e.resolvedAddress!==p.BURN_ADDRESS&&"0x"!==e.resolvedAddress));s.length>0?e.resolutions=s:n.length>0&&(e.error=u.NO_RESOLUTION_FOR_DOMAIN)},enableDomainLookup:(e,t)=>{e.stage="INITIALIZED",e.error=null,e.resolutions=null,e.warning=null,e.chainId=t.payload},resetDomainResolution:e=>{e.resolutions=null,e.warning=null,e.error=null}},extraReducers:e=>{e.addCase(d.CHAIN_CHANGED,((e,t)=>{t.payload!==e.chainId&&(e.stage="UNINITIALIZED")}))}}),{reducer:f,actions:S}=g;a.default=f;const{lookupStart:E,lookupEnd:h,enableDomainLookup:A,resetDomainResolution:_}=S;function I(){return(e,t)=>{const a=t(),n=(0,c.getCurrentChainId)(a);e(A(n))}}async function v({domain:e,chainId:t,state:a}){const n=(0,i.getPermissionSubjects)(a),s=(0,i.getNameLookupSnapsIds)(a).filter((a=>{var s;const r=null===(s=n[a])||void 0===s?void 0:s.permissions["endowment:name-lookup"],i=(0,o.getChainIdsCaveat)(r),c=(0,o.getLookupMatchersCaveat)(r);if(i&&!i.includes(t))return!1;if(c){const{tlds:t,schemes:a}=c;return(null==t?void 0:t.some((t=>e.endsWith(`.${t}`))))||(null==a?void 0:a.some((t=>e.startsWith(`${t}:`))))}return!0}));if(0===e.length)return[];return(await Promise.allSettled(s.map((a=>(0,l.handleSnapRequest)({snapId:a,origin:"metamask",handler:"onNameLookup",request:{jsonrpc:"2.0",method:" ",params:{domain:e,chainId:t}}}))))).reduce(((e,t,n)=>{if("rejected"!==t.status&&null!==t.value){const r=t.value.resolvedAddresses.map((e=>{var t,r;return{...e,resolvingSnap:null===(t=(0,i.getSnapMetadata)(a,s[n]))||void 0===t?void 0:t.name,addressBookEntryName:null===(r=(0,i.getAddressBookEntry)(a,e.resolvedAddress))||void 0===r?void 0:r.name}}));return e.concat(r)}return e}),[])}a.resetDomainResolution=_}}},{package:"$root$",file:"ui/ducks/domains.js"}],[6966,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.SET_CUSTOM_GAS_PRICE=a.SET_CUSTOM_GAS_LIMIT=a.RESET_CUSTOM_DATA=void 0;a.RESET_CUSTOM_DATA="metamask/gas/RESET_CUSTOM_DATA",a.SET_CUSTOM_GAS_LIMIT="metamask/gas/SET_CUSTOM_GAS_LIMIT",a.SET_CUSTOM_GAS_PRICE="metamask/gas/SET_CUSTOM_GAS_PRICE"}}},{package:"$root$",file:"ui/ducks/gas/gas-action-constants.ts"}],[6967,{"./gas-action-constants":6966,lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e=r,t){switch(t.type){case s.SET_CUSTOM_GAS_PRICE:return{...e,customData:{...e.customData,price:t.value}};case s.SET_CUSTOM_GAS_LIMIT:return{...e,customData:{...e.customData,limit:t.value}};case s.RESET_CUSTOM_DATA:return{...e,customData:(0,n.cloneDeep)(r.customData)};default:return e}},a.setCustomGasLimit=function(e){return{type:s.SET_CUSTOM_GAS_LIMIT,value:e}},a.setCustomGasPrice=function(e){return{type:s.SET_CUSTOM_GAS_PRICE,value:e}};var n=e("lodash"),s=e("./gas-action-constants");const r={customData:{price:null,limit:null}}}}},{package:"$root$",file:"ui/ducks/gas/gas.duck.js"}],[6970,{"../../../shared/modules/i18n":5911,"../../../shared/modules/selectors/util":5923,"../../store/actionConstants":7834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e=i,t){if(t.type===n.SET_CURRENT_LOCALE)return{...e,current:t.payload.messages,currentLocale:t.payload.locale};return e},a.getIntlLocale=a.getEnLocaleMessages=a.getCurrentLocaleMessages=a.getCurrentLocale=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var i=s?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(e("../../store/actionConstants")),s=e("../../../shared/modules/i18n"),r=e("../../../shared/modules/selectors/util");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const i={};const c=e=>e.localeMessages.currentLocale;a.getCurrentLocale=c;a.getIntlLocale=(0,r.createDeepEqualSelector)(c,(e=>Intl.getCanonicalLocales(e?e.replace(/_/gu,"-"):s.FALLBACK_LOCALE)[0]));a.getCurrentLocaleMessages=e=>e.localeMessages.current;a.getEnLocaleMessages=e=>e.localeMessages.en}}},{package:"$root$",file:"ui/ducks/locale/locale.ts"}],[6971,{"../../../shared/constants/alerts":5796,"../../../shared/constants/gas":5805,"../../../shared/constants/keyring":5807,"../../../shared/constants/onboarding":5816,"../../../shared/constants/preferences":5818,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/hexstring-utils":5910,"../../../shared/modules/selectors/networks":5921,"../../../shared/modules/string-utils":5924,"../../selectors/accounts":7802,"../../selectors/selectors":7827,"../../store/actionConstants":7834,"../../store/actions":7835,"../gas/gas.duck":6967,"@metamask/transaction-controller":2925,"ethereumjs-util":4363,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e=_,t){const a={..._,...e};switch(t.type){case f.UPDATE_METAMASK_STATE:return{...a,...t.value};case f.LOCK_METAMASK:return{...a,isUnlocked:!1};case f.SET_ACCOUNT_LABEL:{const{account:e}=t.value,n=t.value.label,s=Object.values(a.internalAccounts.accounts).find((t=>t.address.toLowerCase()===e.toLowerCase())),r={...a.internalAccounts,accounts:{...a.internalAccounts.accounts,[s.id]:{...s,metadata:{...s.metadata,name:n}}}};return Object.assign(a,{internalAccounts:r})}case f.UPDATE_TRANSACTION_PARAMS:{const{id:e,value:n}=t;let{transactions:s}=a;return s=s.map((t=>{if(t.id===e){const e={...t};return e.txParams=n,e}return t})),{...a,transactions:s}}case f.SET_PARTICIPATE_IN_METAMETRICS:return{...a,participateInMetaMetrics:t.value};case f.SET_DATA_COLLECTION_FOR_MARKETING:return{...a,dataCollectionForMarketing:t.value};case f.COMPLETE_ONBOARDING:return{...a,completedOnboarding:!0};case f.RESET_ONBOARDING:return{...a,isInitialized:!1,completedOnboarding:!1,firstTimeFlowType:null,isUnlocked:!1,onboardingTabs:{},seedPhraseBackedUp:null};case f.SET_FIRST_TIME_FLOW_TYPE:return{...a,firstTimeFlowType:t.value};default:return a}},a.doesUserHaveALedgerAccount=function(e){return e.metamask.keyrings.some((e=>e.type===c.KeyringType.ledger))},a.findKeyringForAddress=P,a.getAllNfts=a.getAlertEnabledness=void 0,a.getBlockGasLimit=function(e){return e.metamask.currentBlockGasLimit},a.getCompletedOnboarding=function(e){return e.metamask.completedOnboarding},a.getConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,T.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate},a.getConversionRateByTicker=function(e,t){var a;return null===(a=e.metamask.currencyRates[t])||void 0===a?void 0:a.conversionRate},a.getCurrencyRates=function(e){return e.metamask.currencyRates},a.getCurrentCurrency=function(e){return e.metamask.currentCurrency},a.getEstimatedGasFeeTimeBounds=function(e){return e.metamask.estimatedGasFeeTimeBounds},a.getEstimatedGasFeeTimeBoundsByChainId=function(e,t){var a;return null===(a=e.metamask.gasFeeEstimatesByChainId)||void 0===a||null===(a=a[t])||void 0===a?void 0:a.estimatedGasFeeTimeBounds},a.getGasFeeEstimatesByChainId=a.getGasFeeEstimates=a.getGasEstimateTypeByChainId=a.getGasEstimateType=void 0,a.getIsGasEstimatesLoading=function(e){const t=(0,m.checkNetworkAndAccountSupports1559)(e),a=O(e),n=a===i.GasEstimateTypes.feeMarket||a===i.GasEstimateTypes.ethGasPrice;return a===i.GasEstimateTypes.none||t&&!n||!t&&a===i.GasEstimateTypes.feeMarket},a.getIsGasEstimatesLoadingByChainId=function(e,{chainId:t,networkClientId:a}){const n=(0,m.checkNetworkAndAccountSupports1559)(e,a),s=k(e,t),r=s===i.GasEstimateTypes.feeMarket||s===i.GasEstimateTypes.ethGasPrice;return s===i.GasEstimateTypes.none||n&&!r||!n&&s===i.GasEstimateTypes.feeMarket},a.getIsInitialized=function(e){return e.metamask.isInitialized},a.getIsNetworkBusyByChainId=function(e,t){const a=C(e,t);return(null==a?void 0:a.networkCongestion)>=i.NetworkCongestionThresholds.busy},a.getIsPrimarySeedPhraseBackedUp=function(e){if(e.metamask.firstTimeFlowType!==h.FirstTimeFlowType.create)return!0;return e.metamask.seedPhraseBackedUp},a.getIsSeedlessPasswordOutdated=function(e){var t;return Boolean(null===(t=e.metamask.passwordOutdatedCache)||void 0===t?void 0:t.isExpiredPwd)},a.getIsUnlocked=function(e){return e.metamask.isUnlocked},a.getLedgerTransportType=function(e){return e.metamask.ledgerTransportType},a.getNFTsByChainId=void 0,a.getNativeCurrency=function(e){return(0,T.getProviderConfig)(e).ticker},a.getNfts=a.getNftContracts=void 0,a.getNftsDropdownState=function(e){return e.metamask.nftsDropdownState},a.getSeedPhraseBackedUp=function(e){return e.metamask.seedPhraseBackedUp},a.getSendHexDataFeatureFlagState=function(e){return e.metamask.featureFlags.sendHexData},a.getSendToAccounts=function(e){const t=(0,m.accountsWithSendEtherInfoSelector)(e),a=(0,m.getAddressBook)(e);return[...t,...a]},a.getTokenBalances=function(e){return e.metamask.tokenBalances},a.getWeb3ShimUsageAlertEnabledness=a.getUnconnectedAccountAlertShown=a.getUnconnectedAccountAlertEnabledness=a.getTokensByChainId=a.getTokens=void 0,a.isAddressLedger=function(e,t){const a=P(e,t);return(null==a?void 0:a.type)===c.KeyringType.ledger},a.isEIP1559Network=function(e,t){var a;const n=(0,T.getSelectedNetworkClientId)(e);return!0===(null===(a=e.metamask.networksMetadata)||void 0===a||null===(a=a[t??n])||void 0===a?void 0:a.EIPS[1559])},a.isNotEIP1559Network=function(e){const t=(0,T.getSelectedNetworkClientId)(e);return!1===e.metamask.networksMetadata[t].EIPS[1559]},a.updateGasFees=function({gasPrice:e,gasLimit:t,maxPriorityFeePerGas:a,maxFeePerGas:s,transaction:r,expectHexWei:o=!1}){return async i=>{const c={...r.txParams,gas:t};e?(i((0,E.setCustomGasPrice)(I(c.gasPrice,o))),c.gasPrice=I(e,o)):s&&a&&(c.maxFeePerGas=I(s,o),c.maxPriorityFeePerGas=(0,n.addHexPrefix)((0,u.decGWEIToHexWEI)(a)));const l={...r,txParams:c},d=(0,n.isHexString)((0,n.addHexPrefix)(t))?(0,n.addHexPrefix)(t):(0,n.addHexPrefix)(t.toString(16));i((0,E.setCustomGasLimit)(d)),await i((0,S.updateTransactionGasFees)(l.id,l))}};var n=e("ethereumjs-util"),s=e("reselect"),r=e("@metamask/transaction-controller"),o=e("../../../shared/constants/alerts"),i=e("../../../shared/constants/gas"),c=e("../../../shared/constants/keyring"),l=e("../../../shared/constants/preferences"),u=e("../../../shared/modules/conversion.utils"),d=e("../../../shared/modules/hexstring-utils"),p=e("../../../shared/modules/string-utils"),m=e("../../selectors/selectors"),T=e("../../../shared/modules/selectors/networks"),g=e("../../selectors/accounts"),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=A(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var o=s?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(e("../../store/actionConstants")),S=e("../../store/actions"),E=e("../gas/gas.duck"),h=e("../../../shared/constants/onboarding");function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(A=function(e){return e?a:t})(e)}const _={isInitialized:!1,isUnlocked:!1,internalAccounts:{accounts:{},selectedAccount:""},transactions:[],networkConfigurations:{},addressBook:[],useBlockie:!1,featureFlags:{},currentLocale:"",currentBlockGasLimit:"",currentBlockGasLimitByChainId:{},preferences:{autoLockTimeLimit:l.DEFAULT_AUTO_LOCK_TIME_LIMIT,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:!0,petnamesEnabled:!0,featureNotificationsEnabled:!1,privacyMode:!1,showMultiRpcModal:!1},firstTimeFlowType:null,completedOnboarding:!1,knownMethodData:{},use4ByteResolution:!0,participateInMetaMetrics:null,dataCollectionForMarketing:null,currencyRates:{ETH:{conversionRate:null}},throttledOrigins:{}};const I=(e,t)=>(0,n.addHexPrefix)(t?e:(0,u.decGWEIToHexWEI)(e));const v=e=>e.metamask.alertEnabledness;a.getAlertEnabledness=v;a.getUnconnectedAccountAlertEnabledness=e=>v(e)[o.AlertTypes.unconnectedAccount];a.getWeb3ShimUsageAlertEnabledness=e=>v(e)[o.AlertTypes.web3ShimUsage];a.getUnconnectedAccountAlertShown=e=>e.metamask.unconnectedAccountAlertShownOrigins;a.getTokens=e=>{var t;const{allTokens:a}=e.metamask,{address:n}=(0,g.getSelectedInternalAccount)(e),{chainId:s}=(0,T.getProviderConfig)(e);return(null==a||null===(t=a[s])||void 0===t?void 0:t[n])||[]};a.getTokensByChainId=(e,t)=>{var a;const{allTokens:n}=e.metamask,{address:s}=(0,g.getSelectedInternalAccount)(e);return(null==n||null===(a=n[t])||void 0===a?void 0:a[s])||[]};a.getNfts=e=>{var t;const{metamask:{allNfts:a}}=e,{address:n}=(0,g.getSelectedInternalAccount)(e),{chainId:s}=(0,T.getProviderConfig)(e);return(null==a||null===(t=a[n])||void 0===t?void 0:t[s])??[]};a.getAllNfts=e=>{const{metamask:{allNfts:t}}=e,{address:a}=(0,g.getSelectedInternalAccount)(e);return(null==t?void 0:t[a])??[]};a.getNFTsByChainId=(e,t)=>{var a;const{metamask:{allNfts:n}}=e,{address:s}=(0,g.getSelectedInternalAccount)(e);return(null==n||null===(a=n[s])||void 0===a?void 0:a[t])??[]};function y(e){var t;const a=null===(t=e.confirmTransaction)||void 0===t?void 0:t.txData;return null==a?void 0:a.gasFeeEstimates}function N(e,t){var a;const n=null===(a=e.confirmTransaction)||void 0===a?void 0:a.txData;return(null==n?void 0:n.chainId)!==t?undefined:null==n?void 0:n.gasFeeEstimates}a.getNftContracts=e=>{var t;const{metamask:{allNftContracts:a}}=e,{address:n}=(0,g.getSelectedInternalAccount)(e),{chainId:s}=(0,T.getProviderConfig)(e);return(null==a||null===(t=a[n])||void 0===t?void 0:t[s])??[]};const w=(0,s.createSelector)(y,(e=>null==e?void 0:e.type)),R=(0,s.createSelector)(N,(e=>null==e?void 0:e.type)),O=a.getGasEstimateType=(0,s.createSelector)((function(e){return e.metamask.gasEstimateType}),w,((e,t)=>t??e)),k=a.getGasEstimateTypeByChainId=(0,s.createSelector)((function(e,t){var a;return null===(a=e.metamask.gasFeeEstimatesByChainId)||void 0===a||null===(a=a[t])||void 0===a?void 0:a.gasEstimateType}),R,((e,t)=>t??e));const C=a.getGasFeeEstimatesByChainId=(0,s.createSelector)((function(e,t){var a;return null===(a=e.metamask.gasFeeEstimatesByChainId)||void 0===a||null===(a=a[t])||void 0===a?void 0:a.gasFeeEstimates}),N,((e,t)=>t?(0,r.mergeGasFeeEstimates)({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}):e));a.getGasFeeEstimates=(0,s.createSelector)((function(e){return e.metamask.gasFeeEstimates}),y,((e,t)=>t?(0,r.mergeGasFeeEstimates)({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}):e));function P(e,t){return e.metamask.keyrings.find((e=>e.accounts.some((e=>(0,p.isEqualCaseInsensitive)(e,(0,n.addHexPrefix)(t))||(0,p.isEqualCaseInsensitive)(e,(0,d.stripHexPrefix)(t))))))}}}},{package:"$root$",file:"ui/ducks/metamask/metamask.js"}],[6975,{"../../../shared/constants/common":5800,"../../../shared/constants/gas":5805,"../../../shared/constants/network":5813,"../../../shared/constants/swaps":5825,"../../../shared/constants/transaction":5829,"../../../shared/lib/transactions-controller-utils":5894,"../../../shared/modules/Numeric":5899,"../../../shared/modules/contract-utils":5903,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/error":5906,"../../../shared/modules/selectors/networks":5921,"../../../shared/modules/string-utils":5924,"../../helpers/utils/util":7037,"../../pages/confirmations/send/send.utils":7510,"../../selectors":7812,"../../store/actions":7835,"../metamask/metamask":6971,"../swaps/swaps":6980,"@metamask/transaction-controller":2925,"bignumber.js":3997,"ethereumjs-util":4363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.calculateBestQuote=a.addAdjustedReturnToQuotes=void 0,a.estimateGasLimitForSend=async function({selectedAddress:e,value:t,gasPrice:a,sendToken:n,to:o,data:l,isNonStandardEthChain:d,chainId:T,gasLimit:g,...E}){let h=!1,A=c.MIN_GAS_LIMIT_HEX;E.blockGasLimit?A=E.blockGasLimit:n&&(A=c.GAS_LIMITS.BASE_TOKEN_ESTIMATE);const _={from:e,value:t,gasPrice:a};if(n){if(!o)return c.GAS_LIMITS.BASE_TOKEN_ESTIMATE;_.value="0x0",_.data=(0,m.getAssetTransferData)({sendToken:n,fromAddress:e,toAddress:o,amount:t}),_.to=n.address}else{if(!l){const{isContractAddress:e}=o?await(0,p.readAddressAsContract)(global.ethereumProvider,o):{};if(!e&&!d)return c.GAS_LIMITS.SIMPLE;!e&&d&&(h=!0)}_.data=l||"0x",o&&(_.to=o),t&&"0"!==t||(_.value="0xff")}h||(_.gas=new S.Numeric(A,16).times(new S.Numeric(.95,10)).round(0,r.default.ROUND_DOWN).toPrefixedHexString());let I=1.5;h?I=1:u.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[T]&&(I=u.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[T]);try{const e=await(0,f.estimateGas)(_),t=(0,m.addGasBuffer)(e,A,I);return(0,s.addHexPrefix)(t)}catch(e){const t=(0,i.getErrorMessage)(e);if(t.includes("Transaction execution error.")||t.includes("gas required exceeds allowance or always failing transaction")||u.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[T]&&t.includes("gas required exceeds allowance")){const e=(0,m.addGasBuffer)((null==_?void 0:_.gas)??g,A,I);return(0,s.addHexPrefix)(e)}throw e}},a.generateTransactionParams=function(e){var t,a,n,s;const r=e.draftTransactions[e.currentTransactionUUID],i={from:(null===(t=r.fromAccount)||void 0===t?void 0:t.address)||e.selectedAccount.address,gas:r.gas.gasLimit};switch(r.sendAsset.type){case d.AssetType.token:i.to=r.sendAsset.details.address,i.value="0x0",i.data=(0,m.generateERC20TransferData)({toAddress:r.recipient.address,amount:r.amount.value,sendToken:r.sendAsset.details});break;case d.AssetType.NFT:i.to=r.sendAsset.details.address,i.value="0x0",i.data=(null===(a=r.sendAsset.details)||void 0===a?void 0:a.standard)===d.TokenStandard.ERC721?(0,m.generateERC721TransferData)({toAddress:r.recipient.address,fromAddress:(null===(n=r.fromAccount)||void 0===n?void 0:n.address)??e.selectedAccount.address,tokenId:r.sendAsset.details.tokenId}):(0,m.generateERC1155TransferData)({toAddress:r.recipient.address,fromAddress:(null===(s=r.fromAccount)||void 0===s?void 0:s.address)??e.selectedAccount.address,tokenId:r.sendAsset.details.tokenId,amount:r.amount.value});break;case d.AssetType.native:default:i.to=r.recipient.address,i.value=r.amount.value,i.data=r.userInputHexData||"0x"}e.eip1559support?(i.type=o.TransactionEnvelopeType.feeMarket,i.maxFeePerGas=r.gas.maxFeePerGas,i.maxPriorityFeePerGas=r.gas.maxPriorityFeePerGas,i.maxFeePerGas&&"0x0"!==i.maxFeePerGas||(i.maxFeePerGas=r.gas.gasPrice),i.maxPriorityFeePerGas&&"0x0"!==i.maxPriorityFeePerGas||(i.maxPriorityFeePerGas=i.maxFeePerGas)):(i.gasPrice=r.gas.gasPrice,i.type=o.TransactionEnvelopeType.legacy);return i},a.getIsDraftSwapAndSend=function(e){var t,a;return!(0,y.isEqualCaseInsensitive)((null==e||null===(t=e.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||"",(null==e||null===(a=e.receiveAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address)||"")},a.getRoundedGasPrice=function(e){const t=new S.Numeric(e,10).round(9).toString(),a=Number(t);return(0,g.getGasPriceInHexWei)(a)};var n,s=e("ethereumjs-util"),r=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("@metamask/transaction-controller"),i=e("../../../shared/modules/error"),c=e("../../../shared/constants/gas"),l=e("../../../shared/lib/transactions-controller-utils"),u=e("../../../shared/constants/network"),d=e("../../../shared/constants/transaction"),p=e("../../../shared/modules/contract-utils"),m=e("../../pages/confirmations/send/send.utils"),T=e("../../../shared/modules/selectors/networks"),g=e("../../selectors"),f=e("../../store/actions"),S=e("../../../shared/modules/Numeric"),E=e("../metamask/metamask"),h=e("../swaps/swaps"),A=e("../../helpers/utils/util"),_=e("../../../shared/modules/conversion.utils"),I=e("../../../shared/constants/common"),v=e("../../../shared/constants/swaps"),y=e("../../../shared/modules/string-utils");a.addAdjustedReturnToQuotes=async(e,t,a)=>{if(null==e||!e.length)return e;try{const n=(0,T.getCurrentChainId)(t),{medium:r,gasPrice:o}=(0,E.getGasFeeEstimates)(t),i=(0,g.checkNetworkAndAccountSupports1559)(t),c=o??(null==r?void 0:r.suggestedMaxFeePerGas),u=(0,h.getUsedSwapsGasPrice)(t),d=i?c:u,p=(0,g.getTokenExchangeRates)(t),m=(0,g.getConfirmationExchangeRates)(t),f={...p,...m},y=(0,E.getNativeCurrency)(t),N=null!=a&&a.address?(0,s.toChecksumAddress)(a.address):undefined;let w=N?f[N]:1;return!w&&N&&(w=(await(0,A.fetchTokenExchangeRates)(y,[N],n))[N]),w?e.map((e=>{var t;const s=((null==e?void 0:e.gasParams.maxGas)||0)+Number((0,_.hexToDecimal)((null==e||null===(t=e.approvalNeeded)||void 0===t?void 0:t.gas)||"0x0")),r=new S.Numeric(d,10,I.EtherDenomination.GWEI).times(s,10).toDenomination(I.EtherDenomination.ETH),o=(e.destinationAmount?new S.Numeric((0,l.calcTokenAmount)(e.destinationAmount,(null==a?void 0:a.decimals)||v.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[n].decimals),10).times(w,10):undefined).minus(r).toNumber();return{...e,adjustAmountReceivedInNative:o}})):e}catch(e){console.warn(`Could not calculate adjusted return for quote selection: ${e}`)}return e};a.calculateBestQuote=e=>e.reduce(((e,t)=>((null==t?void 0:t.adjustAmountReceivedInNative)||Number((null==t?void 0:t.destinationAmount)||0))>((null==e?void 0:e.adjustAmountReceivedInNative)||Number((null==e?void 0:e.destinationAmount)||0))?t:e),null==e?void 0:e[0])}}},{package:"$root$",file:"ui/ducks/send/helpers.js"}],[6976,{"./send":6977},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./send");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"ui/ducks/send/index.js"}],[6977,{"../../../shared/constants/common":5800,"../../../shared/constants/gas":5805,"../../../shared/constants/swaps":5825,"../../../shared/constants/time":5827,"../../../shared/constants/transaction":5829,"../../../shared/lib/metamask-controller-utils":5879,"../../../shared/lib/transactions-controller-utils":5894,"../../../shared/modules/Numeric":5899,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/error":5906,"../../../shared/modules/hexstring-utils":5910,"../../../shared/modules/selectors/networks":5921,"../../../shared/modules/string-utils":5924,"../../../shared/modules/transaction.utils":5926,"../../helpers/constants/error-keys":6985,"../../helpers/constants/routes":6989,"../../helpers/utils/token-util":7033,"../../helpers/utils/transactions.util":7034,"../../helpers/utils/util":7037,"../../pages/confirmations/send/send.constants":7509,"../../pages/confirmations/send/send.utils":7510,"../../pages/swaps/swaps.util":7791,"../../selectors":7812,"../../store/actionConstants":7834,"../../store/actions":7835,"../confirm-transaction/confirm-transaction.duck":6964,"../domains":6965,"../gas/gas.duck":6967,"../metamask/metamask":6971,"./helpers":6975,"./swap-and-send-utils":6978,"@metamask/controller-utils":1559,"@metamask/rpc-errors":2524,"@metamask/transaction-controller":2925,"@reduxjs/toolkit":3046,"bignumber.js":3997,"ethereumjs-util":4363,lodash:4912,uuid:5741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.draftTransactionInitialState=a.default=a.computeEstimatedGasLimit=a.addHistoryEntry=a.acknowledgeRecipientWarning=a.SEND_STATUSES=a.SEND_STAGES=a.RECIPIENT_SEARCH_MODES=a.GAS_INPUT_MODES=a.AMOUNT_MODES=void 0,a.editExistingTransaction=function(e,t){return async(a,n)=>{await a(se.clearPreviousDrafts());const s=n(),r=(0,E.getUnapprovedTransactions)(s)[t],i=(0,E.getTargetAccount)(s,r.txParams.from);if(Boolean(s[Z].prevSwapAndSendInput)){const{amountMode:e,amount:{value:n},...r}=s[Z].prevSwapAndSendInput;a(se.addNewDraft({...X,...r,id:t,fromAccount:i,history:[`sendFlow - user clicked edit on transaction with id ${t} (swap and send)`]})),e===Q.MAX?(a(se.updateAmountMode(Q.MAX)),a(se.updateAmountToMax()),a(fe())):a(he(n))}else if(e===O.AssetType.native)await a(se.addNewDraft({...X,id:t,fromAccount:i,gas:{...X.gas,gasLimit:r.txParams.gas,gasPrice:r.txParams.gasPrice},userInputHexData:r.txParams.data,recipient:{...X.recipient,address:r.txParams.to,nickname:(0,E.getAddressBookEntryOrAccountName)(s,r.txParams.to)??""},amount:{...X.amount,value:r.txParams.value},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await a(Ae({type:O.AssetType.native},{initialAssetSet:!0}));else{const n=(0,M.parseStandardTokenTransactionData)(r.txParams.data),c=e===O.AssetType.token?(0,D.getTokenValueParam)(n):"1",l=(0,I.getTokenAddressParam)(n),u=(0,E.getAddressBookEntryOrAccountName)(s,l)??"",d=(0,o.addHexPrefix)((0,m.decimalToHex)(c));await a(se.addNewDraft({...X,id:t,fromAccount:i,gas:{...X.gas,gasLimit:r.txParams.gas,gasPrice:r.txParams.gasPrice},userInputHexData:r.txParams.data,recipient:{...X.recipient,address:l,nickname:u},amount:{...X.amount,value:d},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await a(Ae({type:e,details:{address:r.txParams.to,...e===O.AssetType.NFT?{tokenId:(0,I.getTokenIdParam)(n)??(0,D.getTokenValueParam)(n)}:{}}},{initialAssetSet:!0}))}await a(ee())}},a.gasFeeIsInError=function(e){var t;return Boolean(null===(t=Ie(e).gas)||void 0===t?void 0:t.error)},a.getAssetError=function(e){return Ne(e).error},a.getBestQuote=void 0,a.getCurrentDraftTransaction=Ie,a.getCurrentTransactionUUID=_e,a.getDraftTransactionExists=function(e){const t=Ie(e);if(0===Object.keys(t).length)return!1;return!0},a.getDraftTransactionID=function(e){return Ie(e).id},a.getGasInputMode=function(e){const t=(0,E.getIsMainnet)(e),a=(0,y.getGasEstimateType)(e),n=(0,E.getAdvancedInlineGasShown)(e);if(e[Z].gasIsSetInModal)return q.CUSTOM;if(!t||n)return q.INLINE;if(t&&a===T.GasEstimateTypes.ethGasPrice)return q.INLINE;return q.BASIC},a.getGasLimit=function(e){var t;return null===(t=Ie(e).gas)||void 0===t?void 0:t.gasLimit},a.getGasPrice=function(e){var t;return null===(t=Ie(e).gas)||void 0===t?void 0:t.gasPrice},a.getGasTotal=function(e){var t;return null===(t=Ie(e).gas)||void 0===t?void 0:t.gasTotal},a.getIsAssetSendable=function(e){var t,a;if((null===(t=Ne(e))||void 0===t?void 0:t.type)===O.AssetType.native)return!0;return!1===(null===(a=Ne(e))||void 0===a||null===(a=a.details)||void 0===a?void 0:a.isERC721)},a.getIsBalanceInsufficient=function(e){var t;return(null===(t=Ie(e).gas)||void 0===t?void 0:t.error)===g.INSUFFICIENT_FUNDS_ERROR},a.getIsSwapAndSendDisabledForNetwork=a.getIsNativeSendPossible=void 0,a.getIsUsingMyAccountForRecipientSearch=function(e){return e[Z].recipientMode===Y.MY_ACCOUNTS},a.getMinimumGasLimitForSend=function(e){return e[Z].gasLimitMinimum},a.getRecipient=Re,a.getRecipientUserInput=function(e){return e[Z].recipientInput},a.getRecipientWarningAcknowledgement=function(e){var t;return(null===(t=Ie(e).recipient)||void 0===t?void 0:t.recipientWarningAcknowledged)??!1},a.getSendAmount=function(e){var t;return null===(t=Ie(e).amount)||void 0===t?void 0:t.value},a.getSendAnalyticProperties=void 0,a.getSendAsset=Ne,a.getSendAssetAddress=function(e){var t;return null===(t=Ne(e))||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address},a.getSendErrors=function(e){var t,a,n;return{gasFee:null===(t=Ie(e).gas)||void 0===t?void 0:t.error,amount:null===(a=Ie(e).amount)||void 0===a?void 0:a.error,hexData:null===(n=Ie(e).hexData)||void 0===n?void 0:n.error}},a.getSendHexData=function(e){return Ie(e).userInputHexData},a.getSendHexDataError=function(e){var t;return(null===(t=Ie(e).hexData)||void 0===t?void 0:t.error)??null},a.getSendLayer1GasFee=ye,a.getSendMaxModeState=function(e){return e[Z].amountMode===Q.MAX},a.getSendStage=function(e){return e[Z].stage},a.getSendTo=function(e){var t;return null===(t=Re(e))||void 0===t?void 0:t.address},a.getSender=we,a.getSwapsBlockedTokens=function(e){return e[Z].swapsBlockedTokens},a.hasSendLayer1GasFee=function(e){return null!==e[Z].gasTotalForLayer1},a.initializeSendState=a.initialState=void 0,a.isSendFormInvalid=function(e){const t=Ie(e);if(!t)return!0;return t.status===K.INVALID},a.isSendStateInitialized=function(e){return e[Z].stage!==V.INACTIVE},a.resetRecipientInput=function(){return async(e,t)=>{const a=t(),n=(0,S.getCurrentChainId)(a);(0,h.showLoadingIndication)(),e(de("sendFlow - user cleared recipient input")),e((0,N.resetDomainResolution)()),e(Ee("")),await e(Se({address:"",nickname:""})),e(le({chainId:n})),(0,h.hideLoadingIndication)()}},a.resetSendState=function(){return async(e,t)=>{const a=t();e(se.resetSendState()),a[Z].gasEstimatePollToken&&(await(0,h.gasFeeStopPollingByPollingToken)(a[Z].gasEstimatePollToken),(0,h.removePollingTokenFromAppState)(a[Z].gasEstimatePollToken))}},a.sendAmountIsInError=function(e){var t;return Boolean(null===(t=Ie(e).amount)||void 0===t?void 0:t.error)},a.signTransaction=function(e){return async(t,a)=>{const n=a(),s=(0,S.getSelectedNetworkClientId)(n),{stage:r,eip1559support:o,amountMode:c}=n[Z],d=n[Z].draftTransactions[n[Z].currentTransactionUUID];let p;const m=(0,W.getIsDraftSwapAndSend)(d),T=d.quotes,g=T?(0,W.calculateBestQuote)(T):undefined;p=m?{...g.trade}:(0,W.generateTransactionParams)(n[Z]);const{amount:f,sendAsset:A,receiveAsset:_,recipient:I}=d,v={amount:{...f},sendAsset:{...A},receiveAsset:{..._},recipient:{...I},amountMode:n[Z].amountMode};if(await t(se.setPrevSwapAndSend(v)),r!==V.EDIT||m){let a,o;if(d.sendAsset.type!==O.AssetType.native&&(a=d.sendAsset.type===O.AssetType.NFT?d.sendAsset.details.standard===O.TokenStandard.ERC721?u.TransactionType.tokenMethodTransferFrom:u.TransactionType.tokenMethodSafeTransferFrom:u.TransactionType.tokenMethodTransfer),await t(de("sendFlow - user clicked next and transaction should be added to controller")),m){var N,w,R,k,C,P;if(r===V.EDIT){const e=(0,E.getUnapprovedTransactions)(n)[d.id];e&&await t((0,h.rejectPendingApproval)(e.id,l.providerErrors.userRejectedRequest().serialize()))}const a=(0,S.getCurrentChainId)(n),i=x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[a].decimals,c=(null===(N=d.sendAsset.details)||void 0===N?void 0:N.symbol)||(0,y.getNativeCurrency)(n),m=(null===(w=d.receiveAsset.details)||void 0===w?void 0:w.symbol)||(0,y.getNativeCurrency)(n),T=(null===(R=d.receiveAsset.details)||void 0===R?void 0:R.decimals)||i,A=(null===(k=d.receiveAsset.details)||void 0===k?void 0:k.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[a].address,_=(null===(C=d.sendAsset.details)||void 0===C?void 0:C.decimals)||i,I=new b.Numeric((null==f?void 0:f.value)||"0x0",16).toBase(10).shiftedBy(_).toString(),v=d.recipient.address,O=(null===(P=d.sendAsset.details)||void 0===P?void 0:P.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[a].address,M=null==g?void 0:g.sourceAmount,D=null==g?void 0:g.destinationAmount,F={swapAndSendRecipient:v,type:u.TransactionType.swapAndSend,sourceTokenSymbol:c,destinationTokenSymbol:m,destinationTokenDecimals:T,destinationTokenAddress:A,swapTokenValue:I,approvalTxId:undefined,destinationTokenAmount:D,sourceTokenAddress:O,sourceTokenAmount:M,sourceTokenDecimals:_};if(null!=g&&g.approvalNeeded){const{id:e}=await(0,h.addTransactionAndWaitForPublish)({...g.approvalNeeded,amount:"0x0"},{networkClientId:s,requireApproval:!1,type:u.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:u.TransactionType.swapApproval,sourceTokenSymbol:c}}});F.approvalTxId=e}const{id:L}=await(0,h.addTransactionAndWaitForPublish)(p,{networkClientId:s,requireApproval:!1,sendFlowHistory:d.history,type:u.TransactionType.swapAndSend,swaps:{hasApproveTx:Boolean(null==g?void 0:g.approvalNeeded),meta:F}});o=L,await t((0,h.setDefaultHomeActiveTabName)("activity")),e.push(G.DEFAULT_ROUTE)}else{const{id:n}=await t((0,h.addTransactionAndRouteToConfirmationPage)(p,{networkClientId:s,sendFlowHistory:d.history,type:a}));o=n,e.push(G.CONFIRM_TRANSACTION_ROUTE)}await t((0,U.setMaxValueMode)(o,c===Q.MAX&&d.sendAsset.type===O.AssetType.native))}else{var M;const a=(0,E.getUnapprovedTransactions)(n),s=(0,i.cloneDeep)(a[d.id]),r={data:p.data,from:p.from,to:p.to,value:p.value,gas:null!=s&&s.userEditedGasLimit?s.txParams.gas:p.gas};s.originalGasEstimate=r.gas;const l={...s,txParams:Object.assign(s.txParams,o?r:p)};await t(de("sendFlow - user clicked next and transaction should be updated in controller")),await t((0,h.updateTransactionSendFlowHistory)(d.id,(null===(M=s.sendFlowHistory)||void 0===M?void 0:M.length)||0,d.history)),await t((0,h.updateEditableParams)(d.id,l.txParams)),await t((0,h.updateTransactionGasFees)(d.id,l.txParams)),await t((0,U.setMaxValueMode)(d.id,c===Q.MAX&&d.sendAsset.type===O.AssetType.native)),e.push(G.CONFIRM_TRANSACTION_ROUTE)}await t(se.setPrevSwapAndSend(v))}},a.startNewDraftTransaction=function(e){return async t=>{await t(se.clearPreviousDrafts()),await t(se.addNewDraft({...X,history:["sendFlow - User started new draft transaction"]})),await t(Ae({type:e.type??O.AssetType.native,details:e.details,skipComputeEstimatedGasLimit:!0})),await t(ee())}},a.toggleSendMaxMode=function(){return async(e,t)=>{t()[Z].amountMode===Q.MAX?(await e(se.updateAmountMode(Q.INPUT)),await e(se.updateSendAmount("0x0")),await e(de("sendFlow - user toggled max mode off"))):(await e(se.updateAmountMode(Q.MAX)),await e(se.updateAmountToMax()),await e(de("sendFlow - user toggled max mode on"))),await e(fe())}},a.updateGasLimit=void 0,a.updateGasPrice=function(e){return t=>{t(de(`sendFlow - user set legacy gasPrice to ${e}`)),t(se.updateGasFees({gasPrice:e,transactionType:u.TransactionEnvelopeType.legacy,manuallyEdited:!0}))}},a.updateRecipient=Se,a.updateRecipientUserInput=Ee,a.updateSendAmount=he,a.updateSendAsset=Ae,a.updateSendHexData=function(e){return async(t,a)=>{await t(de(`sendFlow - user added custom hexData ${e}`)),await t(se.updateUserInputHexData(e)),await t(se.updateUserInputHexDataError(""===e||(0,o.isHexString)(e)?null:g.INVALID_HEX_DATA_ERROR));const n=a(),s=n[Z].draftTransactions[n[Z].currentTransactionUUID];await t(fe(s.sendAsset.type===O.AssetType.native))}},a.updateSendQuote=fe,a.useContactListForRecipientSearch=function(){return e=>{e(de("sendFlow - user selected back to all on recipient screen")),e(ue(Y.CONTACT_LIST))}},a.useDefaultGas=a.useCustomGas=void 0,a.useMyAccountsForRecipientSearch=function(){return e=>{e(de("sendFlow - user selected transfer to my accounts on recipient screen")),e(ue(Y.MY_ACCOUNTS))}};var n,s=e("@reduxjs/toolkit"),r=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},o=e("ethereumjs-util"),i=e("lodash"),c=e("uuid"),l=e("@metamask/rpc-errors"),u=e("@metamask/transaction-controller"),d=e("@metamask/controller-utils"),p=e("../../../shared/modules/error"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/constants/gas"),g=e("../../pages/confirmations/send/send.constants"),f=e("../../pages/confirmations/send/send.utils"),S=e("../../../shared/modules/selectors/networks"),E=e("../../selectors"),h=e("../../store/actions"),A=e("../gas/gas.duck"),_=e("../../store/actionConstants"),I=e("../../helpers/utils/token-util"),v=e("../../helpers/utils/util"),y=e("../metamask/metamask"),N=e("../domains"),w=e("../../../shared/modules/hexstring-utils"),R=e("../../helpers/utils/transactions.util"),O=e("../../../shared/constants/transaction"),k=e("../../helpers/constants/error-keys"),C=e("../../../shared/constants/time"),P=e("../../../shared/modules/string-utils"),M=e("../../../shared/modules/transaction.utils"),D=e("../../../shared/lib/metamask-controller-utils"),F=e("../../../shared/lib/transactions-controller-utils"),b=e("../../../shared/modules/Numeric"),L=e("../../../shared/constants/common"),x=e("../../../shared/constants/swaps"),U=e("../confirm-transaction/confirm-transaction.duck"),G=e("../../helpers/constants/routes"),H=e("../../pages/swaps/swaps.util"),B=e("./swap-and-send-utils"),W=e("./helpers");const $="This has been replaced with a more recent request",j=C.SECOND,V=a.SEND_STAGES={ADD_RECIPIENT:"ADD_RECIPIENT",DRAFT:"DRAFT",EDIT:"EDIT",INACTIVE:"INACTIVE"},K=a.SEND_STATUSES={INVALID:"INVALID",VALID:"VALID"},q=a.GAS_INPUT_MODES={BASIC:"BASIC",CUSTOM:"CUSTOM",INLINE:"INLINE"},Q=a.AMOUNT_MODES={INPUT:"INPUT",MAX:"MAX"},Y=a.RECIPIENT_SEARCH_MODES={CONTACT_LIST:"CONTACT_LIST",MY_ACCOUNTS:"MY_ACCOUNTS"},X=a.draftTransactionInitialState={amount:{error:null,value:"0x0"},sendAsset:{balance:"0x0",details:null,error:null,type:O.AssetType.native},receiveAsset:{balance:"0x0",details:null,error:null,type:O.AssetType.native},fromAccount:null,gas:{error:null,gasLimit:"0x0",gasPrice:"0x0",gasTotal:"0x0",maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",wasManuallyEdited:!1},history:[],id:null,recipient:{address:"",error:null,nickname:"",warning:null,type:"",recipientWarningAcknowledged:!1},status:K.VALID,transactionType:u.TransactionEnvelopeType.legacy,userInputHexData:null,isSwapQuoteLoading:!1,swapQuotesError:null,swapQuotesLatestRequestTimestamp:null,timeToFetchQuotes:null,quotes:null},z=a.initialState={amountMode:Q.INPUT,currentTransactionUUID:null,disabledSwapAndSendNetworks:[],draftTransactions:{},eip1559support:!1,gasEstimateIsLoading:!0,gasEstimatePollToken:null,gasIsSetInModal:!1,gasPriceEstimate:"0x0",gasLimitMinimum:T.GAS_LIMITS.SIMPLE,gasTotalForLayer1:null,prevSwapAndSendInput:null,recipientMode:Y.CONTACT_LIST,recipientInput:"",selectedAccount:{address:null,balance:"0x0"},stage:V.INACTIVE,swapsBlockedTokens:[]},Z="send",J=a.computeEstimatedGasLimit=(0,s.createAsyncThunk)("send/computeEstimatedGasLimit",(async(e,t)=>{var a,n;const s=t.getState(),{send:r,metamask:o}=s,i=r.draftTransactions[r.currentTransactionUUID],c=(0,E.getUnapprovedTransactions)(s)[i.id],l=(0,E.getIsNonStandardEthChain)(s),u=(0,S.getCurrentChainId)(s),d=(0,E.getSelectedInternalAccountWithBalance)(s),p=await t.dispatch((0,h.getLayer1GasFee)({transactionParams:{gasPrice:i.gas.gasPrice,gas:i.gas.gasLimit,to:null===(a=i.recipient.address)||void 0===a?void 0:a.toLowerCase(),value:r.amountMode===Q.MAX?r.selectedAccount.balance:i.amount.value,from:r.selectedAccount.address,data:i.userInputHexData,type:"0x0"},chainId:u}));if(r.stage!==V.EDIT||null===(n=c.dappSuggestedGasFees)||void 0===n||!n.gas||!c.userEditedGasLimit){var m;const e=await(0,W.estimateGasLimitForSend)({gasPrice:i.gas.gasPrice,blockGasLimit:o.currentBlockGasLimit,selectedAddress:d.address,sendToken:i.sendAsset.details,to:null===(m=i.recipient.address)||void 0===m?void 0:m.toLowerCase(),value:i.amount.value,data:i.userInputHexData,isNonStandardEthChain:l,chainId:u,gasLimit:i.gas.gasLimit});return await t.dispatch((0,A.setCustomGasLimit)(e)),{gasLimit:e,gasTotalForLayer1:p}}return null})),ee=a.initializeSendState=(0,s.createAsyncThunk)("send/initializeSendState",(async({chainHasChanged:e=!1}={},t)=>{const a=t.getState(),n=(0,E.getIsNonStandardEthChain)(a),s=(0,S.getSelectedNetworkClientId)(a),r=(0,S.getCurrentChainId)(a);let i=(0,E.checkNetworkAndAccountSupports1559)(a);i===undefined&&(i=await(0,h.getCurrentNetworkEIP1559Compatibility)());const c=(0,E.getSelectedAccount)(a),{send:l,metamask:u}=a,d=l.draftTransactions[l.currentTransactionUUID];if(!d)return t.rejectWithValue("draftTransaction not found, possibly not on send flow");let p=l.stage===V.EDIT?d.gas.gasPrice:"0x1",m=null;m=await(0,h.gasFeeStartPollingByNetworkClientId)(s),(0,h.addPollingTokenToAppState)(m);const{metamask:{gasFeeEstimates:g,gasEstimateType:f}}=t.getState();l.stage!==V.EDIT&&(p=f===T.GasEstimateTypes.legacy?(0,E.getGasPriceInHexWei)(g.medium):f===T.GasEstimateTypes.ethGasPrice?(0,W.getRoundedGasPrice)(g.gasPrice):f===T.GasEstimateTypes.feeMarket?(0,E.getGasPriceInHexWei)(g.medium.suggestedMaxFeePerGas):g.gasPrice?(0,W.getRoundedGasPrice)(g.gasPrice):"0x0");let{gasLimit:_}=d.gas;if(f!==T.GasEstimateTypes.none&&l.stage!==V.EDIT&&d.recipient.address){_=d.sendAsset.type===O.AssetType.token||d.sendAsset.type===O.AssetType.NFT?T.GAS_LIMITS.BASE_TOKEN_ESTIMATE:T.GAS_LIMITS.SIMPLE;_=await(0,W.estimateGasLimitForSend)({gasPrice:p,blockGasLimit:u.currentBlockGasLimit,selectedAddress:we(a),sendToken:d.sendAsset.details,to:d.recipient.address.toLowerCase(),value:d.amount.value,data:d.userInputHexData,isNonStandardEthChain:n,chainId:r})||_}await t.dispatch((0,A.setCustomGasLimit)(_));if(t.getState().send.currentTransactionUUID!==l.currentTransactionUUID)return t.rejectWithValue("draftTransaction changed during initialization.\n        A new initializeSendState action must be dispatched.");const I=(0,E.getIsSwapsChain)(a)&&(0,E.getUseExternalServices)(a)?(await(0,H.fetchBlockedTokens)(r)).map((e=>e.toLowerCase())):[],v=await(0,B.getDisabledSwapAndSendNetworksFromAPI)();return{account:c,chainId:(0,S.getCurrentChainId)(a),tokens:(0,y.getTokens)(a),chainHasChanged:e,disabledSwapAndSendNetworks:v,gasFeeEstimates:g,gasEstimateType:f,gasLimit:_,gasTotal:(0,o.addHexPrefix)((0,F.calcGasTotal)(_,p)),gasEstimatePollToken:m,eip1559support:i,useTokenDetection:(0,E.getUseTokenDetection)(a),tokenAddressList:Object.keys((0,E.getTokenList)(a)),swapsBlockedTokens:I}}));let te;const ae=(0,s.createAsyncThunk)("send/fetchSwapAndSendQuotes",(async({requestTimestamp:e},t)=>{var a,n;const s=t.getState(),r=s[Z],i=(0,S.getCurrentChainId)(s),c=r.draftTransactions[r.currentTransactionUUID],l=we(s),u=(0,m.hexToDecimal)(c.amount.value);if(!(Number(u)&&c.sendAsset&&c.receiveAsset&&c.recipient.address))return{quotes:null,requestTimestamp:e};let d=await new Promise(((t,a)=>setTimeout((async()=>{var n,s;e!==te&&a(new Error($)),(0,B.getSwapAndSendQuotes)({chainId:i,sourceAmount:u,sourceToken:(null===(n=c.sendAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[i].address,destinationToken:(null===(s=c.receiveAsset)||void 0===s||null===(s=s.details)||void 0===s?void 0:s.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[i].address,sender:l,recipient:c.recipient.address}).then((e=>t(e))).catch((()=>a(g.SWAPS_QUOTES_ERROR)))}),j)));for(const e of d)e.approvalNeeded&&(e.approvalNeeded.gas=(0,o.addHexPrefix)(await(0,h.estimateGas)(e.approvalNeeded)));if(d=await(0,W.addAdjustedReturnToQuotes)(d,s,null===(a=c.receiveAsset)||void 0===a?void 0:a.details),null===(n=d)||void 0===n||!n.length)throw new Error(g.SWAPS_NO_QUOTES);return{quotes:d,requestTimestamp:e}})),ne=(0,s.createSlice)({name:Z,initialState:z,reducers:{addNewDraft:(e,t)=>{e.currentTransactionUUID=(0,c.v4)(),e.draftTransactions[e.currentTransactionUUID]=t.payload,t.payload.id?e.stage=V.EDIT:e.stage=V.ADD_RECIPIENT},addHistoryEntry:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];a&&a.history.push({entry:t.payload,timestamp:Date.now()})},calculateGasTotal:e=>{const t=e.draftTransactions[e.currentTransactionUUID];t&&(t.transactionType===u.TransactionEnvelopeType.feeMarket?t.gas.gasTotal=(0,o.addHexPrefix)((0,F.calcGasTotal)(t.gas.gasLimit,t.gas.maxFeePerGas)):t.gas.gasTotal=(0,o.addHexPrefix)((0,F.calcGasTotal)(t.gas.gasLimit,t.gas.gasPrice)),e.amountMode===Q.MAX&&t.sendAsset.type===O.AssetType.native&&ne.caseReducers.updateAmountToMax(e),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))},clearPreviousDrafts:e=>{e.currentTransactionUUID=null,e.draftTransactions={}},resetSendState:e=>({...z,prevSwapAndSendInput:e.prevSwapAndSendInput}),setPrevSwapAndSend:(e,t)=>{e.prevSwapAndSendInput=t.payload},updateAmountMode:(e,t)=>{Object.values(Q).includes(t.payload)&&(e.amountMode=t.payload)},updateAmountToMax:e=>{const t=e.draftTransactions[e.currentTransactionUUID];let a="0x0";if((null==t?void 0:t.sendAsset.type)===O.AssetType.token){var n;const e=(null===(n=t.sendAsset.details)||void 0===n?void 0:n.decimals)??0,s=Math.pow(10,Number(e));a=new b.Numeric(t.sendAsset.balance,16).times(s,10).toString()}else{const n=new b.Numeric(t.gas.gasTotal||"0x0",16).add(new b.Numeric(e.gasTotalForLayer1??"0x0",16));a=new b.Numeric(t.sendAsset.balance,16).lessThanOrEqualTo(n)?"0":new b.Numeric(t.sendAsset.balance,16).minus(n).toString()}ne.caseReducers.updateSendAmount(e,{payload:a})},updateAsset:(e,t)=>{const{asset:a,initialAssetSet:n,isReceived:s}=t.payload,r=e.draftTransactions[e.currentTransactionUUID],o=r[s?"receiveAsset":"sendAsset"];o.type=a.type,o.balance=a.balance,o.error=a.error,o.type===O.AssetType.token||o.type===O.AssetType.NFT?o.details=a.details:(o.details=null,r.recipient.error===g.CONTRACT_ADDRESS_ERROR&&(r.recipient.error=null)),s||(r.receiveAsset=o),e.amountMode===Q.MAX?(e.amountMode=Q.INPUT,ne.caseReducers.updateSendAmount(e,{payload:"0x0"})):!1===n&&(s?r.quotes=X.quotes:(ne.caseReducers.updateSendAmount(e,{payload:"0x0"}),ne.caseReducers.updateUserInputHexData(e,{payload:""}))),ne.caseReducers.validateSendState(e)},updateGasFeeEstimates:(e,t)=>{const{gasFeeEstimates:a,gasEstimateType:n}=t.payload;let s="0x0";switch(n){case T.GasEstimateTypes.feeMarket:ne.caseReducers.updateGasFees(e,{payload:{transactionType:u.TransactionEnvelopeType.feeMarket,maxFeePerGas:(0,E.getGasPriceInHexWei)(a.medium.suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,E.getGasPriceInHexWei)(a.medium.suggestedMaxPriorityFeePerGas)}});break;case T.GasEstimateTypes.legacy:s=(0,W.getRoundedGasPrice)(a.medium),ne.caseReducers.updateGasFees(e,{payload:{gasPrice:s,type:u.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});break;case T.GasEstimateTypes.ethGasPrice:s=(0,W.getRoundedGasPrice)(a.gasPrice),ne.caseReducers.updateGasFees(e,{payload:{gasPrice:(0,W.getRoundedGasPrice)(a.gasPrice),type:u.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});case T.GasEstimateTypes.none:}e.gasPriceEstimate=(0,o.addHexPrefix)(s)},updateGasFees:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];a&&(t.payload.transactionType===u.TransactionEnvelopeType.feeMarket?(a.gas.maxFeePerGas=(0,o.addHexPrefix)(t.payload.maxFeePerGas),a.gas.maxPriorityFeePerGas=(0,o.addHexPrefix)(t.payload.maxPriorityFeePerGas),a.transactionType=u.TransactionEnvelopeType.feeMarket):(t.payload.manuallyEdited&&(a.gas.wasManuallyEdited=!0),a.gas.wasManuallyEdited&&!t.payload.manuallyEdited||(a.gas.gasPrice=(0,o.addHexPrefix)(t.payload.gasPrice)),a.transactionType=u.TransactionEnvelopeType.legacy),ne.caseReducers.calculateGasTotal(e))},updateGasLimit:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];a&&(a.gas.gasLimit=(0,o.addHexPrefix)(t.payload),ne.caseReducers.calculateGasTotal(e))},updateLayer1Fees:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];e.gasTotalForLayer1=t.payload,e.amountMode===Q.MAX&&(null==a?void 0:a.sendAsset.type)===O.AssetType.native&&ne.caseReducers.updateAmountToMax(e)},updateRecipient:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];if(!a)return e.stage=V.ADD_RECIPIENT,void ne.caseReducers.validateSendState(e);a.recipient.error=null,e.recipientInput="",a.recipient.address=t.payload.address??"",a.recipient.nickname=t.payload.nickname??"",""===a.recipient.address?e.stage=V.ADD_RECIPIENT:(e.stage=null===a.id?V.DRAFT:V.EDIT,e.recipientMode=Y.CONTACT_LIST),ne.caseReducers.validateSendState(e)},updateRecipientSearchMode:(e,t)=>{e.recipientInput="",e.recipientMode=t.payload},updateRecipientWarning:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.warning=t.payload},updateRecipientType:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.type=t.payload},updateDraftTransactionStatus:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].status=t.payload},acknowledgeRecipientWarning:e=>{e.draftTransactions[e.currentTransactionUUID].recipient.recipientWarningAcknowledged=!0,ne.caseReducers.validateSendState(e)},updateUserInputHexDataError:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];a.hexData={...a.hexData,error:null==t?void 0:t.payload}},updateRecipientUserInput:(e,t)=>{e.recipientInput=t.payload},updateSendAmount:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];a.amount.value=(0,o.addHexPrefix)(t.payload),ne.caseReducers.validateAmountField(e),a.sendAsset.type===O.AssetType.native&&ne.caseReducers.validateGasField(e)},updateUserInputHexData:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].userInputHexData=t.payload},useCustomGas:e=>{e.gasIsSetInModal=!0},useDefaultGas:e=>{e.gasIsSetInModal=!1},validateAmountField:e=>{const t=e.draftTransactions[e.currentTransactionUUID];if(!t)return;const a=new b.Numeric(t.amount.value,16);switch(!0){case t.sendAsset.type===O.AssetType.NFT&&t.sendAsset.details.standard===O.TokenStandard.ERC1155&&"0x0"===t.amount.value:t.amount.error=g.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case t.sendAsset.type===O.AssetType.NFT&&t.sendAsset.details.standard===O.TokenStandard.ERC1155&&!(0,f.isERC1155BalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value}):t.amount.error=g.INSUFFICIENT_FUNDS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case a.isFloat()&&t.sendAsset.type===O.AssetType.NFT&&t.sendAsset.details.standard===O.TokenStandard.ERC1155:t.amount.error=g.FLOAT_TOKENS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case t.sendAsset.type===O.AssetType.token&&!(0,f.isTokenBalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value,decimals:t.sendAsset.details.decimals}):t.amount.error=g.INSUFFICIENT_TOKENS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case!(0,f.isBalanceSufficient)({amount:t.sendAsset.type===O.AssetType.native?t.amount.value:undefined,balance:t.sendAsset.type===O.AssetType.native?t.sendAsset.balance:e.selectedAccount.balance,gasTotal:t.gas.gasTotal??"0x0"}):{const a=t.sendAsset.type===O.AssetType.native&&!(0,f.isBalanceSufficient)({amount:t.amount.value,balance:t.sendAsset.balance,gasTotal:"0x0"});t.amount.error=a?g.INSUFFICIENT_FUNDS_ERROR:g.INSUFFICIENT_FUNDS_FOR_GAS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break}default:t.amount.error=null,t.status===K.INVALID&&ne.caseReducers.validateSendState(e)}},validateGasField:e=>{var t;const a=e.draftTransactions[e.currentTransactionUUID];if(!a)return;const n=!(0,f.isBalanceSufficient)({amount:a.sendAsset.type===O.AssetType.native?a.amount.value:"0x0",balance:(null===(t=a.fromAccount)||void 0===t?void 0:t.balance)??e.selectedAccount.balance,gasTotal:a.gas.gasTotal??"0x0"});a.gas.error=n?g.INSUFFICIENT_FUNDS_ERROR:null},validateRecipientUserInput:(e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];if(a)if(e.recipientMode===Y.MY_ACCOUNTS||""===e.recipientInput||null===e.recipientInput)a.recipient.error=null,a.recipient.warning=null;else{var n;const{tokens:s,tokenAddressList:r=[],isProbablyAnAssetContract:o}=t.payload;(0,w.isBurnAddress)(e.recipientInput)||(0,w.isPossibleAddress)(e.recipientInput)&&!(0,w.isValidHexAddress)(e.recipientInput,{mixedCaseUseChecksum:!0})?a.recipient.error=g.INVALID_RECIPIENT_ADDRESS_ERROR:(0,v.isOriginContractAddress)(e.recipientInput,null===(n=a.sendAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address)?a.recipient.error=g.CONTRACT_ADDRESS_ERROR:a.recipient.error=null,(0,w.isValidHexAddress)(e.recipientInput)&&(r.find((t=>(0,P.isEqualCaseInsensitive)(t,e.recipientInput)))||(0,v.checkExistingAddresses)(e.recipientInput,s))||o?a.recipient.warning=g.KNOWN_RECIPIENT_ADDRESS_WARNING:a.recipient.warning=null}ne.caseReducers.validateSendState(e)},validateSendState:e=>{var t,a,n,s,i;const c=e.draftTransactions[e.currentTransactionUUID];if(ne.caseReducers.addHistoryEntry(e,{payload:"Begin validating send state"}),c){const l=(0,W.getIsDraftSwapAndSend)(c),u=()=>[g.INSUFFICIENT_TOKENS_ERROR,g.INSUFFICIENT_FUNDS_ERROR,g.INSUFFICIENT_FUNDS_FOR_GAS_ERROR].includes(c.amount.error)&&!c.sendAsset.balance,{quotes:d,gas:p}=c,T=d?(0,W.calculateBestQuote)(d):undefined,S=(0,m.hexToDecimal)((null==p?void 0:p.gasTotal)||"0x0")>0&&(0,m.hexToDecimal)((null==p?void 0:p.gasLimit)||"0x0")>0?new b.Numeric(p.gasTotal,16).divide(p.gasLimit,16).toString():undefined;switch(!0){case Boolean(c.amount.error&&!u()):ne.caseReducers.addHistoryEntry(e,{payload:`Amount is in error ${c.amount.error}`}),c.status=K.INVALID;break;case Boolean(c.gas.error):ne.caseReducers.addHistoryEntry(e,{payload:`Gas is in error ${c.gas.error}`}),c.status=K.INVALID;break;case Boolean(c.sendAsset.error):ne.caseReducers.addHistoryEntry(e,{payload:`Send asset is in error ${c.sendAsset.error}`}),c.status=K.INVALID;break;case Boolean(c.receiveAsset.error):ne.caseReducers.addHistoryEntry(e,{payload:`Receive asset is in error ${c.receiveAsset.error}`}),c.status=K.INVALID;break;case c.sendAsset.type===O.AssetType.token&&null===c.sendAsset.details:ne.caseReducers.addHistoryEntry(e,{payload:"Send asset is TOKEN and token details is null"}),c.status=K.INVALID;break;case c.receiveAsset.type===O.AssetType.token&&null===c.receiveAsset.details:ne.caseReducers.addHistoryEntry(e,{payload:"Receive asset is TOKEN and token details is null"}),c.status=K.INVALID;break;case e.stage===V.ADD_RECIPIENT:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is ADD_RECIPIENT"}),c.status=K.INVALID;break;case e.stage===V.INACTIVE:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is INACTIVE"}),c.status=K.INVALID;break;case e.gasEstimateIsLoading:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because gasEstimateIsLoading"}),c.status=K.INVALID;break;case new r.default(c.gas.gasLimit,16).lessThan(new r.default(e.gasLimitMinimum)):ne.caseReducers.addHistoryEntry(e,{payload:`Form is invalid because ${c.gas.gasLimit} is lessThan ${e.gasLimitMinimum}`}),c.status=K.INVALID;break;case"loading"===c.recipient.warning:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning is loading"}),c.status=K.INVALID;break;case c.recipient.warning===g.KNOWN_RECIPIENT_ADDRESS_WARNING&&!1===c.recipient.recipientWarningAcknowledged:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning not acknolwedged"}),c.status=K.INVALID;break;case Boolean(T&&!(0,P.isEqualCaseInsensitive)(T.recipient,c.recipient.address)):ne.caseReducers.addHistoryEntry(e,{payload:`Recipient is not match ${c.recipient.address} ${T.recipient}`}),c.status=K.INVALID;break;case Boolean(T&&!(0,P.isEqualCaseInsensitive)(T.trade.from,e.selectedAccount.address)):ne.caseReducers.addHistoryEntry(e,{payload:`Sender is not match ${e.selectedAccount.address} ${T.trade.from}`}),c.status=K.INVALID;break;case Boolean(T&&!(0,P.isEqualCaseInsensitive)((null===(t=c.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||(0,o.zeroAddress)(),T.sourceToken)):ne.caseReducers.addHistoryEntry(e,{payload:`Source token is not match ${null===(a=c.sendAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address} ${T.sourceToken}`}),c.status=K.INVALID;break;case Boolean(T&&!(0,P.isEqualCaseInsensitive)(T.destinationToken,(null===(n=c.receiveAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address)||(0,o.zeroAddress)())):ne.caseReducers.addHistoryEntry(e,{payload:`Destination token is not match ${null===(s=c.receiveAsset)||void 0===s||null===(s=s.details)||void 0===s?void 0:s.address} ${T.destinationToken}`}),c.status=K.INVALID;break;case T&&!(0,f.isBalanceSufficient)({amount:c.sendAsset.type===O.AssetType.native?c.amount.value:undefined,balance:e.selectedAccount.balance,gasTotal:(0,F.calcGasTotal)(new b.Numeric((null==T||null===(i=T.gasParams)||void 0===i?void 0:i.maxGas)||0,10).toPrefixedHexString(),S??"0x0")}):c.amount.error||(c.amount.error=g.INSUFFICIENT_FUNDS_FOR_GAS_ERROR),c.status=K.INVALID;break;case l&&!T:ne.caseReducers.addHistoryEntry(e,{payload:"No swap and send quote available"}),c.status=K.INVALID;break;default:ne.caseReducers.addHistoryEntry(e,{payload:"Form is valid"}),c.status=K.VALID}}}},extraReducers:e=>{e.addCase(_.ACCOUNT_CHANGED,((e,t)=>{if(e.stage===V.EDIT&&t.payload.account){const a=e.draftTransactions[e.currentTransactionUUID];a&&a.fromAccount&&a.fromAccount.address===t.payload.account.address&&(a.fromAccount.balance=t.payload.account.balance,a.sendAsset.type===O.AssetType.native&&(a.sendAsset.balance=t.payload.account.balance),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))}})).addCase(_.ADDRESS_BOOK_UPDATED,((e,t)=>{var a;const{addressBook:n}=t.payload,s=e.draftTransactions[e.currentTransactionUUID];s&&null!==(a=n[s.recipient.address])&&void 0!==a&&a.name&&(s.recipient.nickname=n[s.recipient.address].name)})).addCase(_.CLEAR_SWAP_AND_SEND_STATE,(e=>{const t=e.draftTransactions[e.currentTransactionUUID];t.quotes=X.quotes,t.swapQuotesError=X.swapQuotesError,t.isSwapQuoteLoading=X.isSwapQuoteLoading,t.swapQuotesLatestRequestTimestamp=X.swapQuotesLatestRequestTimestamp,t.timeToFetchQuotes=X.timeToFetchQuotes})).addCase(J.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(J.fulfilled,((e,t)=>{var a,n;e.gasEstimateIsLoading=!1,null!==(a=t.payload)&&void 0!==a&&a.gasLimit&&ne.caseReducers.updateGasLimit(e,{payload:t.payload.gasLimit}),null!==(n=t.payload)&&void 0!==n&&n.gasTotalForLayer1&&ne.caseReducers.updateLayer1Fees(e,{payload:t.payload.gasTotalForLayer1})})).addCase(J.rejected,(e=>{e.gasEstimateIsLoading=!1})).addCase(_.GAS_FEE_ESTIMATES_UPDATED,((e,t)=>{ne.caseReducers.updateGasFeeEstimates(e,{payload:t.payload})})).addCase(ee.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(ee.fulfilled,((e,t)=>{e.eip1559support=t.payload.eip1559support,e.selectedAccount.address=t.payload.account.address,e.selectedAccount.balance=t.payload.account.balance,e.prevSwapAndSendInput=z.prevSwapAndSendInput;const a=e.draftTransactions[e.currentTransactionUUID];a&&(a.gas.gasLimit=t.payload.gasLimit,a.gas.gasTotal=t.payload.gasTotal),ne.caseReducers.updateGasFeeEstimates(e,{payload:{gasFeeEstimates:t.payload.gasFeeEstimates,gasEstimateType:t.payload.gasEstimateType}}),e.gasEstimatePollToken=t.payload.gasEstimatePollToken,t.payload.gasEstimatePollToken&&(e.gasEstimateIsLoading=!1),e.stage!==V.INACTIVE&&ne.caseReducers.validateRecipientUserInput(e,{payload:{chainId:t.payload.chainId,tokens:t.payload.tokens,useTokenDetection:t.payload.useTokenDetection,tokenAddressList:t.payload.tokenAddressList}}),e.swapsBlockedTokens=t.payload.swapsBlockedTokens,e.disabledSwapAndSendNetworks=t.payload.disabledSwapAndSendNetworks,e.amountMode===Q.MAX&&ne.caseReducers.updateAmountToMax(e),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e)})).addCase(ee.rejected,(e=>{e.prevSwapAndSendInput=z.prevSwapAndSendInput})).addCase(ae.pending,((e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];var n;a&&(null!==(n=t.meta)&&void 0!==n&&null!==(n=n.arg)&&void 0!==n&&n.isRefreshingQuotes||(a.quotes=X.quotes),a.swapQuotesError=null,a.isSwapQuoteLoading=!0,a.swapQuotesLatestRequestTimestamp=Math.max(t.meta.arg.requestTimestamp,a.swapQuotesLatestRequestTimestamp));ne.caseReducers.validateSendState(e)})).addCase(ae.fulfilled,((e,t)=>{const a=e.draftTransactions[e.currentTransactionUUID];a&&t.payload.requestTimestamp===a.swapQuotesLatestRequestTimestamp&&(a.timeToFetchQuotes=Date.now()-t.payload.requestTimestamp,a.isSwapQuoteLoading=!1,a.swapQuotesError=null,t.payload&&(a.quotes=t.payload.quotes)),ne.caseReducers.validateSendState(e)})).addCase(ae.rejected,((e,t)=>{if(t.error.message===$)return;const a=e.draftTransactions[e.currentTransactionUUID];a&&(a.isSwapQuoteLoading=!1,a.swapQuotesError=t.error.message)})).addCase(_.SELECTED_ACCOUNT_CHANGED,((e,t)=>{if(e.stage!==V.EDIT&&t.payload.account){e.selectedAccount.balance=t.payload.account.balance,e.selectedAccount.address=t.payload.account.address;const a=e.draftTransactions[e.currentTransactionUUID];a&&((null==a?void 0:a.sendAsset.type)===O.AssetType.native&&(a.sendAsset.balance=t.payload.account.balance),(null==a?void 0:a.sendAsset.type)!==O.AssetType.token&&(null==a?void 0:a.sendAsset.type)!==O.AssetType.NFT||(a.sendAsset.type=X.sendAsset.type,a.sendAsset.error=X.sendAsset.error,a.sendAsset.details=X.sendAsset.details,a.sendAsset.balance=t.payload.account.balance,a.receiveAsset=X.receiveAsset,a.amount.value=X.amount.value),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))}})).addCase(_.QR_CODE_DETECTED,((e,t)=>{const a=t.value,n=e.draftTransactions[e.currentTransactionUUID];if(a&&n&&"address"===a.type){const t=a.values.address.toLowerCase();(0,w.isValidHexAddress)(t,{allowNonPrefixed:!1})?n.recipient.address!==t&&ne.caseReducers.updateRecipient(e,{payload:{address:t}}):n.recipient.error=g.INVALID_RECIPIENT_ADDRESS_ERROR}}))}}),{actions:se,reducer:re}=ne;a.default=re;const{useDefaultGas:oe,useCustomGas:ie,updateGasLimit:ce,validateRecipientUserInput:le,updateRecipientSearchMode:ue,addHistoryEntry:de,acknowledgeRecipientWarning:pe}=se;a.acknowledgeRecipientWarning=pe,a.addHistoryEntry=de,a.updateGasLimit=ce,a.useCustomGas=ie,a.useDefaultGas=oe;const me=(0,i.debounce)(((e,t,a)=>{e(de(`sendFlow - user typed ${t.userInput} into recipient input field`)),e(le(t)),a()}),300),Te=(0,i.debounce)((async e=>{await e(J())}),300),ge=(0,i.debounce)(((e,t)=>{e(de(t))}),100);function fe(e=!0,t=!1,a=!0){return async(n,s)=>{var r;const o=s()[Z],i=null===(r=o.draftTransactions)||void 0===r?void 0:r[null==o?void 0:o.currentTransactionUUID],c=(0,W.getIsDraftSwapAndSend)(i),{quotes:l,swapQuotesError:u,isSwapQuoteLoading:d,swapQuotesLatestRequestTimestamp:p}=i??{};if(c){const e=Date.now();te=e,n(ae({requestTimestamp:e,isRefreshingQuotes:t}))}else(l||u||d||p)&&n({type:_.CLEAR_SWAP_AND_SEND_STATE});e&&(a?await n(J()):await Te(n))}}function Se({address:e,nickname:t}){return async(a,n)=>{const s=n(),r=(0,E.getAddressBookEntryOrAccountName)(s,e)??"";await a(se.updateRecipient({address:e,nickname:t||r})),await a(fe())}}function Ee(e){return async(t,a)=>{t(se.updateRecipientWarning("loading")),t(se.updateDraftTransactionStatus(K.INVALID)),await t(se.updateRecipientUserInput(e));const n=a(),s=we(n),r=(0,S.getCurrentChainId)(n),o=(0,y.getTokens)(n),i=(0,E.getUseTokenDetection)(n),c=(0,E.getTokenList)(n),l=Object.keys(c),u=(0,w.isValidHexAddress)(e);let d=!1;if(u){if(await(0,R.isSmartContractAddress)(e)){t(se.updateRecipientType(g.RECIPIENT_TYPES.SMART_CONTRACT));const{symbol:a,decimals:n}=(0,I.getTokenMetadata)(e,c)||{};if(d=a&&n!==undefined,!d)try{const{standard:t}=await(0,h.getTokenStandardAndDetails)(e,s);d=Boolean(t)}catch(e){console.log(e)}}}return new Promise((a=>{me(t,{userInput:e,chainId:r,tokens:o,useTokenDetection:i,tokenAddressList:l,isProbablyAnAssetContract:d},a)}))}}function he(e,t){return async(a,n)=>{const s=n();if(a(se.updateSendAmount(e)),s[Z].amountMode===Q.MAX&&a(se.updateAmountMode(Q.INPUT)),await a(fe(!0,!1,!1)),t===undefined)return;const{ticker:r}=(0,S.getProviderConfig)(s),o=s[Z].draftTransactions[s[Z].currentTransactionUUID];let i=e;var c;o.sendAsset.type===O.AssetType.token?i=`${t} ${null===(c=o.sendAsset.details)||void 0===c?void 0:c.symbol}`:i=`${t} ${r||L.EtherDenomination.ETH}`;ge(a,`sendFlow - user set amount to ${i}`)}}function Ae({type:e,details:t,skipComputeEstimatedGasLimit:a,isReceived:n},{initialAssetSet:s=!1}={}){return async(r,i)=>{const c=i(),{ticker:l}=(0,S.getProviderConfig)(c),m=c[Z].draftTransactions[c[Z].currentTransactionUUID],T=we(c),g=(0,E.getTargetAccount)(c,T);if(e===O.AssetType.native){const t=(0,E.getUnapprovedTransactions)(c),a=null==t?void 0:t[m.id];await r(de(`sendFlow - user set asset of type ${O.AssetType.native} with symbol ${l??L.EtherDenomination.ETH}`)),await r(se.updateAsset({asset:{type:e,details:null,balance:g.balance,error:null},initialAssetSet:s,isReceived:n})),(null==a?void 0:a.type)!==u.TransactionType.tokenMethodTransferFrom&&(null==a?void 0:a.type)!==u.TransactionType.tokenMethodTransfer&&(null==a?void 0:a.type)!==u.TransactionType.tokenMethodSafeTransferFrom||await r(se.updateUserInputHexData(""))}else{var f;await r((0,h.showLoadingIndication)());let a,i=null===(f={[O.TokenStandard.ERC20]:n?["address","symbol","decimals"]:["address","symbol","decimals","balance"],[O.TokenStandard.ERC721]:["address","symbol","tokenId"],[O.TokenStandard.ERC1155]:["address","symbol","tokenId"]}[t.standard])||void 0===f?void 0:f.find((e=>t.collection&&"symbol"===e?t.collection[e]===undefined:t[e]===undefined));if("balance"===i){var A;const e=(0,S.getSelectedNetworkClientId)(c),a=we(c),n=null===(A=(await(0,h.getBalancesInSingleCall)(a,[t.address],e).catch((()=>({}))))[t.address])||void 0===A?void 0:A.hex;t.balance=n?(0,o.addHexPrefix)(n):undefined,i=undefined}a=t.standard&&!i?{...t}:{...t,...await(0,h.getTokenStandardAndDetails)(t.address,T,t.tokenId).catch((()=>{r((0,h.hideLoadingIndication)())}))},await r((0,h.hideLoadingIndication)());const l={type:e,details:a,error:null};if(a.standard===O.TokenStandard.ERC20)l.balance=a.balance&&a.decimals!==undefined?(0,o.addHexPrefix)((0,F.calcTokenAmount)(a.balance,a.decimals).toString(16)):undefined,await r(de(`sendFlow - user set asset to ERC20 token with symbol ${a.symbol} and address ${a.address}`));else if(a.standard===O.TokenStandard.ERC1155||a.standard===O.TokenStandard.ERC721){if(e===O.AssetType.token)throw r((0,h.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:a.address})),l.error=k.INVALID_ASSET_TYPE,new Error(k.INVALID_ASSET_TYPE);{const e=(0,S.getSelectedNetworkClientId)(c);let t=!0;try{t=await(0,h.isNftOwner)(T,a.address,a.tokenId,e)}catch(e){(0,p.getErrorMessage)(e).includes("Unable to verify ownership.")||r((0,h.displayWarning)(e))}if(!t)throw new Error("Send slice initialized as NFT send with an NFT not currently owned by the select account");l.error=null,l.balance=a.balance?(0,d.toHex)(a.balance):"0x1",await r(de(`sendFlow - user set asset to NFT with tokenId ${a.tokenId} and address ${a.address}`))}}await r(se.updateAsset({asset:l,initialAssetSet:s,isReceived:n}))}await r(fe(!1===s&&!a))}}function _e(e){return e[Z].currentTransactionUUID}function Ie(e){return e[Z].draftTransactions[_e(e)]??{}}const ve=a.getBestQuote=(0,s.createSelector)(Ie,(({quotes:e,swapQuotesError:t})=>{const a=e;if(t||null==a||!a.length)return undefined;return(0,W.calculateBestQuote)(a)}));function ye(e){return e[Z].gasTotalForLayer1}a.getIsNativeSendPossible=(0,s.createSelector)(Ie,ye,(({gas:{gasTotal:e},sendAsset:t},a)=>{if(t.type!==O.AssetType.native)return!0;const n=t.balance;return new b.Numeric(e||"0x0",16).add(new b.Numeric(a??"0x0",16)).lessThan(n,16)}));function Ne(e){return Ie(e).sendAsset}function we(e){var t,a;const n=e[Z],s=n.draftTransactions[n.currentTransactionUUID];return(null==s||null===(t=s.fromAccount)||void 0===t?void 0:t.address)??n.selectedAccount.address??(null===(a=(0,E.getSelectedInternalAccount)(e))||void 0===a?void 0:a.address)}function Re(e){const t=Ie(e);if(!t.recipient)return{address:"",nickname:"",error:null,warning:null};const a=(0,w.toChecksumHexAddress)(t.recipient.address);return e.metamask.ensResolutionsByAddress?{...t.recipient,nickname:t.recipient.nickname||(0,E.getEnsResolutionByAddress)(e,a)}:t.recipient}a.getIsSwapAndSendDisabledForNetwork=(0,s.createSelector)((e=>(0,S.getCurrentChainId)(e)),(e=>{var t;return(null===(t=e[Z])||void 0===t?void 0:t.disabledSwapAndSendNetworks)??[]}),((e,t)=>t.includes(e))),a.getSendAnalyticProperties=(0,s.createSelector)((e=>(0,S.getProviderConfig)(e)),Ie,ve,(({chainId:e,ticker:t},a,n)=>{try{var s,r,o,i,c,l;const u=x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].decimals,d=x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].address,p=(0,W.getIsDraftSwapAndSend)(a),{quotes:m,amount:T,sendAsset:g,receiveAsset:f,swapQuotesError:S,timeToFetchQuotes:E}=a,h=(null==a||null===(s=a.sendAsset)||void 0===s||null===(s=s.details)||void 0===s?void 0:s.symbol)||t,A=(null==a||null===(r=a.receiveAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.symbol)||t,_=(null==a||null===(o=a.receiveAsset)||void 0===o||null===(o=o.details)||void 0===o?void 0:o.decimals)||u,I=(null==a||null===(i=a.sendAsset)||void 0===i||null===(i=i.details)||void 0===i?void 0:i.decimals)||u,v=new b.Numeric((null==T?void 0:T.value)||"0x0",16).toBase(10).shiftedBy(I).toString(),y=null==n?void 0:n.sourceAmount,N=null==n?void 0:n.destinationAmount,w=(null==a||null===(c=a.receiveAsset)||void 0===c||null===(c=c.details)||void 0===c?void 0:c.address)||d,R=(null==a||null===(l=a.sendAsset)||void 0===l||null===(l=l.details)||void 0===l?void 0:l.address)||d;return{is_swap_and_send:p,chain_id:e,token_amount_source:y&&I?(0,F.calcTokenAmount)(y,I).toString():v,token_amount_dest_estimate:N&&_?(0,F.calcTokenAmount)(N,_).toString():undefined,token_symbol_source:h,token_symbol_destination:A,token_address_source:R,token_address_destination:w,results_count:null==m?void 0:m.length,quotes_load_time_ms:E,aggregator_list:null==m?void 0:m.map((({aggregator:e,error:t})=>`${e} (${t||"no error"})`)),aggregator_recommended:null==n?void 0:n.aggregator,errors:[null==T?void 0:T.error,null==g?void 0:g.error,null==f?void 0:f.error,S].filter(Boolean)}}catch(e){return{analyticsError:e}}}))}}},{package:"$root$",file:"ui/ducks/send/send.js"}],[6978,{"../../../shared/constants/swaps":5825,"../../../shared/constants/time":5827,"../../../shared/lib/fetch-with-cache":5874,"../../../shared/lib/swaps-utils":5889,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/hexstring-utils":5910,"../../pages/swaps/swaps.util":7791,lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getDisabledSwapAndSendNetworksFromAPI=async function(){try{const e=[],t=await(0,d.fetchSwapsFeatureFlags)();return r.ALLOWED_PROD_SWAPS_CHAIN_IDS.forEach((a=>{var n;!1===(null===(n=t[(0,d.getNetworkNameByChainId)(a)])||void 0===n||null===(n=n.v2)||void 0===n||null===(n=n.swapAndSend)||void 0===n?void 0:n.enabled)&&e.push(a)})),e}catch(e){return[]}},a.getSwapAndSendQuotes=async function(e){const{chainId:t,...a}=e;a.slippage=a.slippage??m;const n=new URLSearchParams(a),s=`${g}/${T}/networks/${(0,l.hexToDecimal)(t)}/quotes?${n}`,u=await(0,i.default)({url:s,fetchOptions:{method:"GET",headers:{"X-Client-Id":r.SWAPS_CLIENT_ID}},cacheOptions:{cacheRefreshTime:0,timeout:15*o.SECOND},functionName:"getSwapAndSendQuotes"});return u.map((e=>{if(e.trade&&!e.error&&(0,c.validateData)(p,e,s)){const t=(0,c.addHexPrefixToObjectValues)({to:e.trade.to,from:e.trade.from,data:e.trade.data,value:(0,l.decimalToHex)(e.trade.value),gas:(0,l.decimalToHex)(e.gasParams.maxGas)});let{approvalNeeded:n}=e;return n&&(n=(0,c.addHexPrefixToObjectValues)(n)),{...e,slippage:a.slippage,trade:t,approvalNeeded:n}}return undefined})).filter(Boolean)};var n,s=e("lodash"),r=e("../../../shared/constants/swaps"),o=e("../../../shared/constants/time"),i=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},c=e("../../../shared/lib/swaps-utils"),l=e("../../../shared/modules/conversion.utils"),u=e("../../../shared/modules/hexstring-utils"),d=e("../../pages/swaps/swaps.util");const p=[{property:"gasParams",type:"object",validator:e=>e&&(0,s.isNumber)(e.maxGas)},{property:"trade",type:"object",validator:e=>e&&(0,c.validHex)(e.data)&&(0,u.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,u.isValidHexAddress)(e.from,{allowNonPrefixed:!1})&&(0,c.truthyString)(e.value)},{property:"approvalNeeded",type:"object",validator:e=>null===e||e&&(0,c.validHex)(e.data)&&(0,u.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,u.isValidHexAddress)(e.from,{allowNonPrefixed:!1})},{property:"sourceAmount",type:"string",validator:c.truthyDigitString},{property:"destinationAmount",type:"string",validator:c.truthyDigitString},{property:"sourceToken",type:"string",validator:e=>(0,u.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"destinationToken",type:"string",validator:e=>(0,u.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"sender",type:"string",validator:e=>(0,u.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"recipient",type:"string",validator:e=>(0,u.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"aggregator",type:"string",validator:c.truthyString},{property:"aggregatorType",type:"string",validator:c.truthyString},{property:"error",type:"object",validator:e=>null===e||"object"==typeof e},{property:"fee",type:"number"}],m="2",T="v2",g=r.SWAPS_API_V2_BASE_URL}}},{package:"$root$",file:"ui/ducks/send/swap-and-send-utils.ts"}],[6980,{"../../../shared/constants/app":5798,"../../../shared/constants/common":5800,"../../../shared/constants/metametrics":5810,"../../../shared/constants/network":5813,"../../../shared/constants/swaps":5825,"../../../shared/constants/transaction":5829,"../../../shared/lib/swaps-utils":5889,"../../../shared/lib/transactions-controller-utils":5894,"../../../shared/modules/Numeric":5899,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/selectors":5920,"../../../shared/modules/selectors/feature-flags":5919,"../../../shared/modules/selectors/networks":5921,"../../helpers/constants/routes":6989,"../../hooks/useTokenFiatAmount":7140,"../../pages/swaps/swaps.util":7791,"../../selectors":7812,"../../store/actions":7835,"../metamask/metamask":6971,"@metamask/transaction-controller":2925,"@metamask/utils":2974,"@reduxjs/toolkit":3046,"@sentry/browser":3091,"bignumber.js":3997,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.GAS_PRICES_LOADING_STATES=void 0,a.cancelSwapsSmartTransaction=function(e){return async(t,a)=>{try{await t((0,u.cancelSmartTransaction)(e))}catch(e){const{swaps:{isFeatureFlagLoaded:n}}=a();if(e.message.startsWith("Fetch error:")&&n){const a=(0,p.parseSmartTransactionsError)(e.message);t(we(null==a?void 0:a.error))}}}},a.fetchAndSetSwapsGasPriceInfo=a.default=a.clearSwapsState=void 0,a.fetchMetaSwapsGasPriceEstimates=Ce,a.fetchSwapsLivenessAndFeatureFlags=a.fetchQuotesAndSetQuoteState=void 0,a.fetchSwapsSmartTransactionFees=Pe,a.setTransactionSettingsOpened=a.setTopAssets=a.setSwapsFromToken=a.setSwapToToken=a.setSwapQuotesFetchStartTime=a.setReviewSwapClickedTimestamp=a.setMaxSlippage=a.setLatestAddedTokenTo=a.setIsFeatureFlagLoaded=a.setFromTokenInputValue=a.setFromTokenError=a.setFetchingQuotes=a.setBalanceError=a.setAggregatorMetadata=a.prepareToLeaveSwaps=a.prepareForRetryGetQuotes=a.navigateBackToPrepareSwap=a.getUsedSwapsGasPrice=a.getUsedQuote=a.getTransactionSettingsOpened=a.getTradeTxId=a.getTopQuote=a.getTopAssets=a.getToToken=a.getSwapsWelcomeMessageSeenStatus=a.getSwapsUserFeeLevel=a.getSwapsTokens=a.getSwapsSTXLoading=a.getSwapsQuoteRefreshTime=a.getSwapsQuotePrefetchingRefreshTime=a.getSwapsNetworkConfig=a.getSwapsFeatureIsLive=a.getSwapsFallbackGasPrice=a.getSwapsErrorKey=a.getSwapsCustomizationModalPrice=a.getSwapsCustomizationModalLimit=a.getSwapGasPriceEstimateData=a.getSmartTransactionsErrorMessageDismissed=a.getSmartTransactionsError=a.getSmartTransactionFees=a.getSmartTransactionEstimatedGas=a.getShowQuoteLoadingScreen=a.getSelectedQuote=a.getReviewSwapClickedTimestamp=a.getQuotesLastFetched=a.getQuotesFetchStartTime=a.getQuotes=a.getPendingSmartTransactions=a.getMaxSlippage=a.getLatestAddedTokenTo=a.getIsFeatureFlagLoaded=a.getIsEstimatedReturnLow=a.getFromTokenInputValue=a.getFromTokenError=a.getFromToken=a.getFetchingQuotes=a.getFetchParams=a.getDestinationTokenInfo=a.getCustomSwapsGasPrice=a.getCustomSwapsGas=a.getCustomMaxPriorityFeePerGas=a.getCustomMaxFeePerGas=a.getCurrentSmartTransactionsError=a.getCurrentSmartTransactionsEnabled=a.getCurrentSmartTransactions=a.getBalanceError=a.getBackgroundSwapRouteState=a.getApproveTxParams=a.getApproveTxId=a.getAggregatorMetadata=void 0,a.shouldShowCustomPriceTooLowWarning=function(e){const{average:t}=H(e),a=G(e);if(!a||t===undefined)return!1;return new N.Numeric(a,16,y.EtherDenomination.WEI).toDenomination(y.EtherDenomination.GWEI).greaterThan(t,10)},a.swapsSlice=a.swapsQuoteSelected=a.swapGasPriceEstimateIsLoading=a.swapGasEstimateLoadingHasFailed=a.swapCustomGasModalPriceEdited=a.swapCustomGasModalLimitEdited=a.swapCustomGasModalClosed=a.signAndSendTransactions=a.signAndSendSwapsSmartTransaction=void 0;var n=e("@reduxjs/toolkit"),s=O(e("bignumber.js")),r=O(e("loglevel")),o=e("@sentry/browser"),i=e("@metamask/transaction-controller"),c=e("@metamask/utils"),l=e("../../../shared/constants/network"),u=e("../../store/actions"),d=e("../../helpers/constants/routes"),p=e("../../pages/swaps/swaps.util"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/modules/selectors/networks"),g=e("../../../shared/modules/selectors/feature-flags"),f=e("../../selectors"),S=e("../../../shared/modules/selectors"),E=e("../../../shared/constants/metametrics"),h=e("../../../shared/constants/swaps"),A=e("../../../shared/constants/transaction"),_=e("../metamask/metamask"),I=e("../../../shared/constants/app"),v=e("../../../shared/lib/transactions-controller-utils"),y=e("../../../shared/constants/common"),N=e("../../../shared/modules/Numeric"),w=e("../../../shared/lib/swaps-utils"),R=e("../../hooks/useTokenFiatAmount");function O(e){return e&&e.__esModule?e:{default:e}}const k=(0,c.createProjectLogger)("swaps"),C=a.GAS_PRICES_LOADING_STATES={INITIAL:"INITIAL",LOADING:"LOADING",FAILED:"FAILED",COMPLETED:"COMPLETED"},P={aggregatorMetadata:null,approveTxId:null,tradeTxId:null,balanceError:!1,fetchingQuotes:!1,fromToken:null,fromTokenInputValue:"",fromTokenError:null,isFeatureFlagLoaded:!1,maxSlippage:h.Slippage.default,quotesFetchStartTime:null,reviewSwapClickedTimestamp:null,topAssets:{},toToken:null,customGas:{price:null,limit:null,loading:C.INITIAL,priceEstimates:{},fallBackPrice:null},currentSmartTransactionsError:"",swapsSTXLoading:!1,transactionSettingsOpened:!1,latestAddedTokenTo:""},M=a.swapsSlice=(0,n.createSlice)({name:"swaps",initialState:P,reducers:{clearSwapsState:()=>P,navigatedBackToBuildQuote:e=>{e.approveTxId=null,e.tradeTxId=null,e.balanceError=!1,e.fetchingQuotes=!1,e.customGas.limit=null,e.customGas.price=null},retriedGetQuotes:e=>{e.approveTxId=null,e.balanceError=!1,e.fetchingQuotes=!1},setAggregatorMetadata:(e,t)=>{e.aggregatorMetadata=t.payload},setBalanceError:(e,t)=>{e.balanceError=t.payload},setFetchingQuotes:(e,t)=>{e.fetchingQuotes=t.payload},setLatestAddedTokenTo:(e,t)=>{e.latestAddedTokenTo=t.payload},setFromToken:(e,t)=>{e.fromToken=t.payload},setFromTokenInputValue:(e,t)=>{e.fromTokenInputValue=t.payload},setFromTokenError:(e,t)=>{e.fromTokenError=t.payload},setIsFeatureFlagLoaded:(e,t)=>{e.isFeatureFlagLoaded=t.payload},setMaxSlippage:(e,t)=>{e.maxSlippage=t.payload},setQuotesFetchStartTime:(e,t)=>{e.quotesFetchStartTime=t.payload},setReviewSwapClickedTimestamp:(e,t)=>{e.reviewSwapClickedTimestamp=t.payload},setTopAssets:(e,t)=>{e.topAssets=t.payload},setToToken:(e,t)=>{e.toToken=t.payload},swapCustomGasModalClosed:e=>{e.customGas.price=null,e.customGas.limit=null},swapCustomGasModalPriceEdited:(e,t)=>{e.customGas.price=t.payload},swapCustomGasModalLimitEdited:(e,t)=>{e.customGas.limit=t.payload},swapGasPriceEstimatesFetchStarted:e=>{e.customGas.loading=C.LOADING},swapGasPriceEstimatesFetchFailed:e=>{e.customGas.loading=C.FAILED},swapGasPriceEstimatesFetchCompleted:(e,t)=>{e.customGas.priceEstimates=t.payload.priceEstimates,e.customGas.loading=C.COMPLETED},retrievedFallbackSwapsGasPrice:(e,t)=>{e.customGas.fallBackPrice=t.payload},setCurrentSmartTransactionsError:(e,t)=>{const a=Object.values(p.StxErrorTypes).includes(t.payload)||t.payload===undefined?t.payload:p.StxErrorTypes.unavailable;e.currentSmartTransactionsError=a},setSwapsSTXSubmitLoading:(e,t)=>{e.swapsSTXLoading=t.payload||!1},setTransactionSettingsOpened:(e,t)=>{e.transactionSettingsOpened=Boolean(t.payload)}}}),{actions:D,reducer:F}=M;a.default=F;a.getAggregatorMetadata=e=>e.swaps.aggregatorMetadata;const b=e=>e.swaps.balanceError;a.getBalanceError=b;const L=e=>e.swaps.fromToken;a.getFromToken=L;a.getFromTokenError=e=>e.swaps.fromTokenError;a.getFromTokenInputValue=e=>e.swaps.fromTokenInputValue;a.getIsFeatureFlagLoaded=e=>e.swaps.isFeatureFlagLoaded;a.getSwapsSTXLoading=e=>e.swaps.swapsSTXLoading;a.getMaxSlippage=e=>e.swaps.maxSlippage;a.getTopAssets=e=>e.swaps.topAssets;const x=e=>e.swaps.toToken;a.getToToken=x;a.getFetchingQuotes=e=>e.swaps.fetchingQuotes;const U=e=>e.swaps.latestAddedTokenTo;a.getLatestAddedTokenTo=U;a.getQuotesFetchStartTime=e=>e.swaps.quotesFetchStartTime;a.getReviewSwapClickedTimestamp=e=>e.swaps.reviewSwapClickedTimestamp;const G=e=>e.swaps.customGas.price;a.getSwapsCustomizationModalPrice=G;a.getSwapsCustomizationModalLimit=e=>e.swaps.customGas.limit;a.swapGasPriceEstimateIsLoading=e=>e.swaps.customGas.loading===C.LOADING;a.swapGasEstimateLoadingHasFailed=e=>e.swaps.customGas.loading===C.INITIAL;const H=e=>e.swaps.customGas.priceEstimates;a.getSwapGasPriceEstimateData=H;const B=e=>e.swaps.customGas.fallBackPrice;a.getSwapsFallbackGasPrice=B;const W=e=>e.swaps.currentSmartTransactionsError;a.getCurrentSmartTransactionsError=W;a.getTransactionSettingsOpened=e=>e.swaps.transactionSettingsOpened;const $=e=>e.metamask.swapsState;a.getSwapsFeatureIsLive=e=>e.metamask.swapsState.swapsFeatureIsLive;a.getSmartTransactionsError=e=>e.appState.smartTransactionsError;a.getSmartTransactionsErrorMessageDismissed=e=>e.appState.smartTransactionsErrorMessageDismissed;const j=e=>{const t=(0,S.getSmartTransactionsEnabled)(e),a=W(e);return t&&!a};a.getCurrentSmartTransactionsEnabled=j;a.getSwapsQuoteRefreshTime=e=>e.metamask.swapsState.swapsQuoteRefreshTime;a.getSwapsQuotePrefetchingRefreshTime=e=>e.metamask.swapsState.swapsQuotePrefetchingRefreshTime;a.getBackgroundSwapRouteState=e=>e.metamask.swapsState.routeState;const V=e=>e.metamask.swapsState.customMaxGas;a.getCustomSwapsGas=V;const K=e=>e.metamask.swapsState.customGasPrice;a.getCustomSwapsGasPrice=K;a.getCustomMaxFeePerGas=e=>e.metamask.swapsState.customMaxFeePerGas;a.getCustomMaxPriorityFeePerGas=e=>e.metamask.swapsState.customMaxPriorityFeePerGas;a.getSwapsUserFeeLevel=e=>e.metamask.swapsState.swapsUserFeeLevel;const q=e=>e.metamask.swapsState.fetchParams;a.getFetchParams=q;const Q=e=>e.metamask.swapsState.quotes;a.getQuotes=Q;a.getQuotesLastFetched=e=>e.metamask.swapsState.quotesLastFetched;const Y=e=>{const{selectedAggId:t,quotes:a}=$(e);return a[t]};a.getSelectedQuote=Y;a.getSwapsErrorKey=e=>{var t;return null===(t=$(e))||void 0===t?void 0:t.errorKey};a.getShowQuoteLoadingScreen=e=>e.swaps.showQuoteLoadingScreen;const X=e=>e.metamask.swapsState.tokens;a.getSwapsTokens=X;a.getSwapsWelcomeMessageSeenStatus=e=>e.metamask.swapsWelcomeMessageHasBeenShown;const z=e=>{const{topAggId:t,quotes:a}=$(e);return a[t]};a.getTopQuote=z;a.getApproveTxId=e=>e.metamask.swapsState.approveTxId;a.getTradeTxId=e=>e.metamask.swapsState.tradeTxId;const Z=e=>Y(e)||z(e);a.getUsedQuote=Z;a.getDestinationTokenInfo=e=>{var t;return null===(t=q(e))||void 0===t||null===(t=t.metaData)||void 0===t?void 0:t.destinationTokenInfo};const J=e=>K(e)||B(e);a.getUsedSwapsGasPrice=J;const ee=e=>{var t;const{approvalNeeded:a}=Y(e)||z(e)||{};if(!a)return null;const n=(null===(t=$(e))||void 0===t?void 0:t.customApproveTxData)||a.data,s=J(e);return{...a,gasPrice:s,data:n}};a.getApproveTxParams=ee;const te=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t?void 0:t[(0,T.getCurrentChainId)(e)]};a.getCurrentSmartTransactions=te;a.getPendingSmartTransactions=e=>{const t=te(e);return t&&0!==t.length?t.filter((e=>e.status===A.SmartTransactionStatus.pending)):[]};const ae=e=>{const t=Z(e);var a;return null!=t&&t.isGasIncludedTrade?{approvalTxFees:t.approvalTxFees,tradeTxFees:t.tradeTxFees}:null===(a=e.metamask.smartTransactionsState)||void 0===a?void 0:a.fees};a.getSmartTransactionFees=ae;a.getSmartTransactionEstimatedGas=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.estimatedGas};a.getSwapsNetworkConfig=e=>{const{swapsQuoteRefreshTime:t,swapsQuotePrefetchingRefreshTime:a,swapsStxGetTransactionsRefreshTime:n,swapsStxBatchStatusRefreshTime:s,swapsStxStatusDeadline:r,swapsStxMaxFeeMultiplier:o}=e.metamask.swapsState;return{quoteRefreshTime:t,quotePrefetchingRefreshTime:a,stxGetTransactionsRefreshTime:n,stxBatchStatusRefreshTime:s,stxStatusDeadline:r,stxMaxFeeMultiplier:o}};const{clearSwapsState:ne,navigatedBackToBuildQuote:se,retriedGetQuotes:re,swapGasPriceEstimatesFetchCompleted:oe,swapGasPriceEstimatesFetchStarted:ie,swapGasPriceEstimatesFetchFailed:ce,setAggregatorMetadata:le,setBalanceError:ue,setFetchingQuotes:de,setLatestAddedTokenTo:pe,setFromToken:me,setFromTokenError:Te,setFromTokenInputValue:ge,setIsFeatureFlagLoaded:fe,setMaxSlippage:Se,setQuotesFetchStartTime:Ee,setReviewSwapClickedTimestamp:he,setTopAssets:Ae,setToToken:_e,swapCustomGasModalPriceEdited:Ie,swapCustomGasModalLimitEdited:ve,retrievedFallbackSwapsGasPrice:ye,swapCustomGasModalClosed:Ne,setCurrentSmartTransactionsError:we,setSwapsSTXSubmitLoading:Re,setTransactionSettingsOpened:Oe}=D;a.setTransactionSettingsOpened=Oe,a.swapCustomGasModalClosed=Ne,a.swapCustomGasModalLimitEdited=ve,a.swapCustomGasModalPriceEdited=Ie,a.setSwapToToken=_e,a.setTopAssets=Ae,a.setReviewSwapClickedTimestamp=he,a.setSwapQuotesFetchStartTime=Ee,a.setMaxSlippage=Se,a.setIsFeatureFlagLoaded=fe,a.setFromTokenInputValue=ge,a.setFromTokenError=Te,a.setSwapsFromToken=me,a.setLatestAddedTokenTo=pe,a.setFetchingQuotes=de,a.setBalanceError=ue,a.setAggregatorMetadata=le,a.clearSwapsState=ne;a.navigateBackToPrepareSwap=e=>async t=>{await t((0,u.setBackgroundSwapRouteState)("")),t(se()),e.push(d.PREPARE_SWAP_ROUTE)};a.prepareForRetryGetQuotes=()=>async e=>{await e((0,u.resetSwapsPostFetchState)()),e(re())};a.prepareToLeaveSwaps=()=>async e=>{e(ne()),await e((0,u.resetBackgroundSwapsState)())};a.swapsQuoteSelected=e=>t=>{t(ve(null)),t((0,u.setSelectedQuoteAggId)(e)),t((0,u.setSwapsTxGasLimit)(""))};const ke=()=>async e=>{const t=await e(Ce());null!=t&&t.fast&&e((0,u.setSwapsTxGasPrice)((0,m.decGWEIToHexWEI)(t.fast)))};a.fetchAndSetSwapsGasPriceInfo=ke;a.fetchSwapsLivenessAndFeatureFlags=()=>async(e,t)=>{let a={swapsFeatureIsLive:!1};const n=t(),s=(0,T.getCurrentChainId)(n);try{const t=await(0,p.fetchSwapsFeatureFlags)();if(await e((0,u.setSwapsFeatureFlags)(t)),h.ALLOWED_SMART_TRANSACTIONS_CHAIN_IDS.includes(s)){var o;await e(we(undefined)),await e((0,u.fetchSmartTransactionsLiveness)({networkClientId:(0,T.getSelectedNetworkClientId)(n)}));((e,t)=>{if(!((null==t?void 0:t.length)<=0))for(const a of t)if(A.IN_PROGRESS_TRANSACTION_STATUSES.includes(a.status)){e(we(p.StxErrorTypes.regularTxPending));break}})(e,await(0,u.getTransactions)({searchCriteria:{chainId:s,from:null===(o=(0,f.getSelectedInternalAccount)(n))||void 0===o?void 0:o.address}}))}a=(0,p.getSwapsLivenessForNetwork)(s,t)}catch(e){r.default.error("Failed to fetch Swaps feature flags and Swaps liveness, defaulting to false.",e)}return await e((0,u.setSwapsLiveness)(a)),e(fe(!0)),a};a.fetchQuotesAndSetQuoteState=(e,t,a,n,o)=>async(i,c)=>{var l,m,T;const g=c(),A=(0,f.getHDEntropyIndex)(g),I=(0,f.getSelectedNetwork)(g),{chainId:y}=I.configuration;let N={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();N=(0,p.getSwapsLivenessForNetwork)(y,e)}catch(e){r.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await i((0,u.setSwapsLiveness)(N)),!N.swapsFeatureIsLive)return void await e.push(d.SWAPS_MAINTENANCE_ROUTE);const w=q(g),R=(0,f.getSelectedAccount)(g),O=b(g),k=(0,f.getSwapsDefaultToken)(g),C=(null==w||null===(l=w.metaData)||void 0===l||null===(l=l.sourceTokenInfo)||void 0===l?void 0:l.symbol)===k.symbol?k:null==w||null===(m=w.metaData)||void 0===m?void 0:m.sourceTokenInfo,P=L(g)||C||{},M=x(g)||(null==w||null===(T=w.metaData)||void 0===T?void 0:T.destinationTokenInfo)||{},{address:D,symbol:F,decimals:G,iconUrl:H,balance:B}=P,{address:W,symbol:$,decimals:V,iconUrl:K}=M;o||(await i((0,u.setBackgroundSwapRouteState)("loading")),e.push(d.LOADING_QUOTES_ROUTE)),i(de(!0));const Q=(0,f.getTokenExchangeRates)(g);if(!W||$===k.symbol||Q[W]!==undefined||(Y=W,z=(0,_.getTokens)(g),Array.isArray(z)&&z.find((e=>e.address.toLowerCase()===Y.toLowerCase())))){U(g)!==W&&await i(pe(""))}else await i((0,u.addToken)({address:W,symbol:$,decimals:V,image:K,networkClientId:I.clientId},!0)),await i(pe(W));var Y,z;D&&F!==k.symbol&&!Q[D]&&B&&new s.default(B,16).gt(0)&&i((0,u.addToken)({address:D,symbol:F,decimals:G,image:H,networkClientId:I.clientId},!0));const Z=X(g),J=(null==Z?void 0:Z.find((({address:e})=>e===D)))||P,ee=(null==Z?void 0:Z.find((({address:e})=>e===W)))||M;i(me(P));const te=(0,f.isHardwareWallet)(g),ae=(0,f.getHardwareWalletType)(g),ne=(0,f.checkNetworkAndAccountSupports1559)(g),se=(0,S.getSmartTransactionsEnabled)(g),re=j(g),oe=(e,t)=>{if(!t)return!1;const a=t.toLowerCase();for(const t of e)if(t.toLowerCase()===a)return!0;return!1},ie=h.StablecoinsByChainId[y],ce=Boolean(ie&&oe(ie,D)&&oe(ie,W))?h.Slippage.stable:a;n({event:E.MetaMetricsEventName.QuotesRequested,category:E.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:F,token_from_amount:String(t),token_to:$,request_type:O?"Quote":"Order",slippage:ce,custom_slippage:ce!==h.Slippage.default&&ce!==h.Slippage.stable,is_hardware_wallet:te,hardware_wallet_type:ae,stx_enabled:se,current_stx_enabled:re,stx_user_opt_in:(0,S.getSmartTransactionsOptInStatusForMetrics)(g),anonymizedData:!0},properties:{hd_entropy_index:A}});try{var le;const e=Date.now();i(Ee(e));const a=i((0,u.fetchAndSetQuotes)({slippage:ce,sourceToken:D,destinationToken:W,value:t,fromAddress:R.address,balanceError:O,sourceDecimals:G,enableGasIncludedQuotes:re&&(0,S.getSmartTransactionsPreferenceEnabled)(g)},{sourceTokenInfo:J,destinationTokenInfo:ee,accountBalance:R.balance,networkClientId:I.clientId})),s=ne?null:i(ke()),[[r,o]]=await Promise.all([a,s]);if(0===(null===(le=Object.values(r))||void 0===le?void 0:le.length))n({event:"No Quotes Available",category:E.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:F,token_from_amount:String(t),token_to:$,request_type:O?"Quote":"Order",slippage:ce,custom_slippage:ce!==h.Slippage.default&&ce!==h.Slippage.stable,is_hardware_wallet:te,hardware_wallet_type:ae,stx_enabled:se,current_stx_enabled:re,stx_user_opt_in:(0,S.getSmartTransactionsOptInStatusForMetrics)(g)}}),i((0,u.setSwapsErrorKey)(h.QUOTES_NOT_AVAILABLE_ERROR));else{var ue;const a=r[o],s=(0,v.calcTokenAmount)(a.destinationAmount,a.decimals||18).toString(10);n({event:E.MetaMetricsEventName.QuotesReceived,category:E.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:F,token_from_amount:String(t),token_to:$,token_to_amount:s,request_type:O?"Quote":"Order",slippage:ce,custom_slippage:ce!==h.Slippage.default&&ce!==h.Slippage.stable,response_time:Date.now()-e,best_quote_source:a.aggregator,available_quotes:null===(ue=Object.values(r))||void 0===ue?void 0:ue.length,is_hardware_wallet:te,hardware_wallet_type:ae,stx_enabled:se,current_stx_enabled:re,stx_user_opt_in:(0,S.getSmartTransactionsOptInStatusForMetrics)(g),gas_included:a.isGasIncludedTrade,anonymizedData:!0},properties:{hd_entropy_index:A}}),i((0,u.setInitialGasEstimate)(o))}}catch(e){if(e.message===h.SWAPS_FETCH_ORDER_CONFLICT)return void r.default.debug("Swap fetch order conflict detected; ignoring older request");r.default.error("Error fetching quotes: ",e),i((0,u.setSwapsErrorKey)(h.ERROR_FETCHING_QUOTES))}i(de(!1))};a.signAndSendSwapsSmartTransaction=({unsignedTransaction:e,trackEvent:t,history:a,additionalTrackingParams:n})=>async(s,c)=>{var l,T,A,_,y,N,w,R,O;s(Re(!0));const k=c(),C=(0,f.getHDEntropyIndex)(k),P=q(k),M=(0,f.isHardwareWallet)(k),D=(0,f.getHardwareWalletType)(k),{metaData:F,value:b,slippage:L}=P,{sourceTokenInfo:x={},destinationTokenInfo:U={}}=F,G=Z(k),H=(0,f.getSelectedNetwork)(k),B=(0,g.getFeatureFlagsByChainId)(k);s((0,u.setSmartTransactionsRefreshInterval)(null==B||null===(l=B.smartTransactions)||void 0===l?void 0:l.batchStatusPollingInterval));const W=G.trade,$=(0,v.calcTokenAmount)(G.destinationAmount,U.decimals||18).toPrecision(8),V=(0,S.getSmartTransactionsEnabled)(k),K=j(k),Y={token_from:x.symbol,token_from_amount:String(b),token_to:U.symbol,token_to_amount:$,slippage:L,custom_slippage:2!==L,best_quote_source:null===(T=z(k))||void 0===T?void 0:T.aggregator,available_quotes:null===(A=Q(k))||void 0===A?void 0:A.length,other_quote_selected:G.aggregator!==(null===(_=z(k))||void 0===_?void 0:_.aggregator),other_quote_selected_source:G.aggregator===(null===(y=z(k))||void 0===y?void 0:y.aggregator)?"":G.aggregator,average_savings:null===(N=G.savings)||void 0===N?void 0:N.total,performance_savings:null===(w=G.savings)||void 0===w?void 0:w.performance,fee_savings:null===(R=G.savings)||void 0===R?void 0:R.fee,median_metamask_fee:null===(O=G.savings)||void 0===O?void 0:O.medianMetaMaskFee,is_hardware_wallet:M,hardware_wallet_type:D,stx_enabled:V,current_stx_enabled:K,stx_user_opt_in:(0,S.getSmartTransactionsOptInStatusForMetrics)(k),gas_included:G.isGasIncludedTrade,...n};if(t({event:"STX Swap Started",category:E.MetaMetricsEventCategory.Swaps,sensitiveProperties:Y,properties:{hd_entropy_index:C}}),!(0,p.isContractAddressValid)(W.to,H.configuration.chainId))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:Y.token_from,token_to:Y.token_to,contract_address:W.to}}),await s((0,u.setSwapsErrorKey)(h.SWAP_FAILED_ERROR)),void a.push(d.SWAPS_ERROR_ROUTE);const X=ee(k);let J,te;try{var ne;let t;if(X&&(te={...X,value:"0x0"}),t=G.isGasIncludedTrade?ae(k):await s(Pe({unsignedTransaction:e,approveTxParams:te,fallbackOnNotEnoughFunds:!0})),!t)return r.default.error('"fetchSwapsSmartTransactionFees" failed'),s(Re(!1)),void s(we(p.StxErrorTypes.unavailable));var se;if(X)te.gas=`0x${(0,m.decimalToHex)((null===(se=t.approvalTxFees)||void 0===se?void 0:se.gasLimit)||0)}`,te.chainId=H.configuration.chainId,J=await s((0,u.signAndSendSmartTransaction)({unsignedTransaction:te,smartTransactionFees:t.approvalTxFees}));e.gas=`0x${(0,m.decimalToHex)((null===(ne=t.tradeTxFees)||void 0===ne?void 0:ne.gasLimit)||0)}`,e.chainId=H.configuration.chainId;const n=await s((0,u.signAndSendSmartTransaction)({unsignedTransaction:e,smartTransactionFees:t.tradeTxFees})),o=U.address,c=U.decimals,l=U.symbol,T=x.symbol;await s((0,u.updateSmartTransaction)(n,{origin:I.ORIGIN_METAMASK,destinationTokenAddress:o,destinationTokenDecimals:c,destinationTokenSymbol:l,sourceTokenSymbol:T,swapMetaData:Y,swapTokenValue:b,type:i.TransactionType.swap})),J&&await s((0,u.updateSmartTransaction)(J,{origin:I.ORIGIN_METAMASK,type:i.TransactionType.swapApproval,sourceTokenSymbol:T})),a.push(d.SMART_TRANSACTION_STATUS_ROUTE),s(Re(!1))}catch(e){console.log("signAndSendSwapsSmartTransaction error",e),s(Re(!1));const{swaps:{isFeatureFlagLoaded:t}}=c();if(e.message.startsWith("Fetch error:")&&t){const t=(0,p.parseSmartTransactionsError)(e.message);s(we(null==t?void 0:t.error))}}};function Ce(){return async(e,t)=>{const a=t(),n=(0,T.getCurrentChainId)(a);let s;e(ie());try{s=await(0,p.fetchSwapsGasPrices)(n)}catch(t){var o;if(r.default.warn("Fetching swaps gas prices failed:",t),null===(o=t.message)||void 0===o||!o.match(/NetworkError|Fetch failed with status:/u))throw t;e(ce());try{const t=await global.ethereumProvider.request({method:"eth_gasPrice",params:[]}),a=(0,m.hexWEIToDecGWEI)(t.toString(10));return e(ye(a)),null}catch(e){return console.error("Failed to retrieve fallback gas price: ",e),null}}return e(oe({priceEstimates:s})),s}}function Pe({unsignedTransaction:e,approveTxParams:t,fallbackOnNotEnoughFunds:a=!1}){return async(n,s)=>{const{swaps:{isFeatureFlagLoaded:r}}=s();try{return await n((0,u.fetchSmartTransactionFees)(e,t))}catch(e){if(e.message.startsWith("Fetch error:")&&r){const t=(0,p.parseSmartTransactionsError)(e.message);(a||(null==t?void 0:t.error)!==p.StxErrorTypes.notEnoughFunds)&&n(we(null==t?void 0:t.error))}}return null}}a.signAndSendTransactions=(e,t,a)=>async(n,c)=>{var g,A,I,y,N,R,O,C,P,M,D;const F=c(),b=(0,f.getHDEntropyIndex)(F),L=(0,T.getCurrentChainId)(F),x=(0,T.getSelectedNetworkClientId)(F),U=(0,f.isHardwareWallet)(F),G=(0,f.checkNetworkAndAccountSupports1559)(F);let B={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();B=(0,p.getSwapsLivenessForNetwork)(L,e)}catch(e){r.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await n((0,u.setSwapsLiveness)(B)),!B.swapsFeatureIsLive)return void await e.push(d.SWAPS_MAINTENANCE_ROUTE);const W=V(F),$=q(F),{metaData:K,value:Y,slippage:X}=$,{sourceTokenInfo:te={},destinationTokenInfo:ae={}}=K;await n((0,u.setBackgroundSwapRouteState)("awaiting")),await n((0,u.stopPollingForQuotes)()),U||e.push(d.AWAITING_SWAP_ROUTE);const{fast:ne}=H(F),se=Z(F),re=se.trade,oe=ee(F);let ie;if(G){const e=(0,_.getGasFeeEstimates)(F),{estimatedBaseFee:t="0"}=e;ie=await(0,p.getSwap1559GasFeeEstimates)(se.trade,oe,t,L),k("Received 1559 gas fee estimates",ie)}const ce=null===(g=ie)||void 0===g?void 0:g.tradeGasFeeEstimates,le=null===(A=ie)||void 0===A?void 0:A.approveGasFeeEstimates,ue=new s.default((null==se?void 0:se.gasEstimate)||0,16).round(0).toString(16),de=(0,w.calculateMaxGasLimit)(null==se?void 0:se.gasEstimate,null==se?void 0:se.gasMultiplier,null==se?void 0:se.maxGas,W),pe=J(F);re.gas=de,G?(re.maxFeePerGas=null==ce?void 0:ce.maxFeePerGas,re.maxPriorityFeePerGas=null==ce?void 0:ce.maxPriorityFeePerGas,delete re.gasPrice):re.gasPrice=pe;const me=(0,f.getUSDConversionRate)(F),Te=(0,v.calcTokenAmount)(se.destinationAmount,ae.decimals||18).toPrecision(8),ge=(null==se?void 0:se.gasEstimateWithRefund)||`0x${(0,m.decimalToHex)((null==se?void 0:se.averageGas)||0)}`,fe=(0,v.calcGasTotal)(ge,G?null==ce?void 0:ce.baseAndPriorityFeePerGas:pe),Se=null===(I=se.approvalNeeded)||void 0===I?void 0:I.gas,Ee=Se?(0,v.calcGasTotal)(Se,G?null==le?void 0:le.baseAndPriorityFeePerGas:pe):"0x0",he=(0,m.getValueFromWeiHex)({value:(0,m.addHexes)(fe,Ee),toCurrency:"usd",conversionRate:me,numberOfDecimals:6}),Ae=(0,S.getSmartTransactionsEnabled)(F),_e=j(F),Ie={token_from:te.symbol,token_from_amount:String(Y),token_to:ae.symbol,token_to_amount:Te,slippage:X,custom_slippage:2!==X,best_quote_source:null===(y=z(F))||void 0===y?void 0:y.aggregator,available_quotes:null===(N=Q(F))||void 0===N?void 0:N.length,other_quote_selected:se.aggregator!==(null===(R=z(F))||void 0===R?void 0:R.aggregator),other_quote_selected_source:se.aggregator===(null===(O=z(F))||void 0===O?void 0:O.aggregator)?"":se.aggregator,gas_fees:he,estimated_gas:new s.default(ue,16).toString(10),suggested_gas_price:ne,used_gas_price:(0,m.hexWEIToDecGWEI)(pe),average_savings:null===(C=se.savings)||void 0===C?void 0:C.total,performance_savings:null===(P=se.savings)||void 0===P?void 0:P.performance,fee_savings:null===(M=se.savings)||void 0===M?void 0:M.fee,median_metamask_fee:null===(D=se.savings)||void 0===D?void 0:D.medianMetaMaskFee,is_hardware_wallet:U,hardware_wallet_type:(0,f.getHardwareWalletType)(F),stx_enabled:Ae,current_stx_enabled:_e,stx_user_opt_in:(0,S.getSmartTransactionsOptInStatusForMetrics)(F),...a};if(G&&(Ie.max_fee_per_gas=null==ce?void 0:ce.maxFeePerGas,Ie.max_priority_fee_per_gas=null==ce?void 0:ce.maxPriorityFeePerGas,Ie.base_and_priority_fee_per_gas=null==ce?void 0:ce.baseAndPriorityFeePerGas),t({event:E.MetaMetricsEventName.SwapStarted,category:E.MetaMetricsEventCategory.Swaps,sensitiveProperties:Ie,properties:{hd_entropy_index:b}}),!(0,p.isContractAddressValid)(re.to,L))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:Ie.token_from,token_to:Ie.token_to,contract_address:re.to}}),await n((0,u.setSwapsErrorKey)(h.SWAP_FAILED_ERROR)),void e.push(d.SWAPS_ERROR_ROUTE);let ve;if(U&&e.push(d.AWAITING_SIGNATURES_ROUTE),oe){G&&(oe.maxFeePerGas=null==le?void 0:le.maxFeePerGas,oe.maxPriorityFeePerGas=null==le?void 0:le.maxPriorityFeePerGas,delete oe.gasPrice),k("Creating approve transaction",oe);try{if(ve=await(0,u.addTransactionAndWaitForPublish)({...oe,amount:"0x0"},{networkClientId:x,requireApproval:!1,type:i.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:i.TransactionType.swapApproval,sourceTokenSymbol:te.symbol}}}),[l.CHAIN_IDS.LINEA_MAINNET,l.CHAIN_IDS.LINEA_GOERLI,l.CHAIN_IDS.LINEA_SEPOLIA].includes(L)){k("Delaying submitting trade tx to make Linea confirmation more likely");const e=new Promise((e=>setTimeout(e,5e3)));await e}}catch(t){return k("Approve transaction failed",t),await n((0,u.setSwapsErrorKey)(h.SWAP_FAILED_ERROR)),void e.push(d.SWAPS_ERROR_ROUTE)}}k("Creating trade transaction",re);try{var ye,Ne;await(0,u.addTransactionAndWaitForPublish)(re,{networkClientId:x,requireApproval:!1,type:i.TransactionType.swap,swaps:{hasApproveTx:Boolean(oe),meta:{estimatedBaseFee:null===(ye=ie)||void 0===ye?void 0:ye.estimatedBaseFee,sourceTokenSymbol:te.symbol,destinationTokenSymbol:ae.symbol,type:i.TransactionType.swap,destinationTokenDecimals:ae.decimals,destinationTokenAddress:ae.address,swapMetaData:Ie,swapTokenValue:Y,approvalTxId:null===(Ne=ve)||void 0===Ne?void 0:Ne.id}}})}catch(t){const a=t.message.includes("EthAppPleaseEnableContractData")?h.CONTRACT_DATA_DISABLED_ERROR:h.SWAP_FAILED_ERROR;return k("Trade transaction failed",t),await n((0,u.setSwapsErrorKey)(a)),void e.push(d.SWAPS_ERROR_ROUTE)}U&&e.push(d.AWAITING_SWAP_ROUTE),await(0,u.forceUpdateMetamaskState)(n)};a.getIsEstimatedReturnLow=({usedQuote:e,rawNetworkFees:t})=>{var a,n,r,o,i,c;const l=(0,v.calcTokenAmount)(null==e?void 0:e.sourceAmount,null==e||null===(a=e.sourceTokenInfo)||void 0===a?void 0:a.decimals),u=(0,R.useTokenFiatAmount)(null==e||null===(n=e.sourceTokenInfo)||void 0===n?void 0:n.address,l||0,null==e||null===(r=e.sourceTokenInfo)||void 0===r?void 0:r.symbol,{showFiat:!0},!0,null,!1),d=(0,v.calcTokenAmount)(null==e?void 0:e.destinationAmount,null==e||null===(o=e.destinationTokenInfo)||void 0===o?void 0:o.decimals),p=(0,R.useTokenFiatAmount)(null==e||null===(i=e.destinationTokenInfo)||void 0===i?void 0:i.address,d||0,null==e||null===(c=e.destinationTokenInfo)||void 0===c?void 0:c.symbol,{showFiat:!0},!0,null,!1),m=p&&t?new s.default(p).minus(new s.default(t)):null;return!(!u||!m)&&m.lt(new s.default(u).times(1-h.SWAPS_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE))}}}},{package:"$root$",file:"ui/ducks/swaps/swaps.js"}],[6982,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.SUPPORT_REQUEST_LINK=a.SUPPORT_LINK=a.SECONDARY=a.PRIMARY=a.PASSWORD_MIN_LENGTH=a.OUTDATED_BROWSER_VERSIONS=a.METAMETRICS_SETTINGS_LINK=a.FIXED_PRERENDER_BROWSER_VERSIONS=a.CONTRACT_ADDRESS_LINK=a.BROKEN_PRERENDER_BROWSER_VERSIONS=void 0;a.PRIMARY="PRIMARY",a.SECONDARY="SECONDARY",a.METAMETRICS_SETTINGS_LINK="https://support.metamask.io/privacy-and-security/how-to-manage-your-metametrics-settings",a.SUPPORT_REQUEST_LINK="https://support.metamask.io",a.SUPPORT_LINK="https://support.metamask.io",a.CONTRACT_ADDRESS_LINK="https://support.metamask.io/managing-my-tokens/moving-your-tokens/why-am-i-being-warned-about-sending-tokens-to-a-contract/",a.PASSWORD_MIN_LENGTH=8,a.OUTDATED_BROWSER_VERSIONS={chrome:"<113",edge:"<113",firefox:"<115",opera:"<99"},a.BROKEN_PRERENDER_BROWSER_VERSIONS={chrome:">=113",edge:">=113"},a.FIXED_PRERENDER_BROWSER_VERSIONS={windows:{chrome:">=120",edge:">=120"},macos:{chrome:">=120",edge:">=120"},chrome:">=121",edge:">=121"}}}},{package:"$root$",file:"ui/helpers/constants/common.ts"}],[6984,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.TypographyVariant=a.TextVariant=a.TextTransform=a.TextColor=a.TextAlign=a.TEXT_TRANSFORM=a.TEXT_ALIGN=a.Size=a.Severity=a.SEVERITIES=a.OverflowWrap=a.OVERFLOW_WRAP=a.JustifyContent=a.IconColor=a.FontWeight=a.FontStyle=a.FontFamily=a.FlexWrap=a.FlexDirection=a.FRACTIONS=a.FONT_WEIGHT=a.FONT_STYLE=a.FLEX_WRAP=a.FLEX_DIRECTION=a.Display=a.DISPLAY=a.Color=a.BorderStyle=a.BorderRadius=a.BorderColor=a.BlockSize=a.BackgroundColor=a.BREAKPOINTS=a.BLOCK_SIZES=a.AlignItems=void 0;a.Color=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.backgroundMuted="background-muted",e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.borderDefault="border-default",e.borderMuted="border-muted",e.overlayDefault="overlay-default",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.errorInverse="error-inverse",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.warningInverse="warning-inverse",e.successDefault="success-default",e.successMuted="success-muted",e.successInverse="success-inverse",e.infoDefault="info-default",e.infoMuted="info-muted",e.infoInverse="info-inverse",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.transparent="transparent",e.localhost="localhost",e.inherit="inherit",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e}({}),a.BackgroundColor=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.backgroundMuted="background-muted",e.backgroundSection="background-section",e.backgroundSubsection="background-subsection",e.backgroundAlternativeSoft="background-alternative-soft",e.backgroundHover="background-hover",e.backgroundPressed="background-pressed",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.overlayDefault="overlay-default",e.overlayAlternative="overlay-alternative",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e}({}),a.BorderColor=function(e){return e.borderDefault="border-default",e.borderMuted="border-muted",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e.backgroundDefault="background-default",e}({}),a.TextColor=function(e){return e.textDefault="text-default",e.textAlternative="text-alternative",e.textAlternativeSoft="text-alternative-soft",e.textMuted="text-muted",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.iconInverse="icon-inverse",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),a.IconColor=function(e){return e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconAlternativeSoft="icon-alternative-soft",e.iconMuted="icon-muted",e.iconInverse="icon-inverse",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),a.TypographyVariant=function(e){return e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.H7="h7",e.H8="h8",e.H9="h9",e.paragraph="p",e.span="span",e}({}),a.TextVariant=function(e){return e.displayMd="display-md",e.headingLg="heading-lg",e.headingMd="heading-md",e.headingSm="heading-sm",e.bodyLgMedium="body-lg-medium",e.bodyMd="body-md",e.bodyMdMedium="body-md-medium",e.bodyMdBold="body-md-bold",e.bodySm="body-sm",e.bodySmMedium="body-sm-medium",e.bodySmBold="body-sm-bold",e.bodyXs="body-xs",e.bodyXsMedium="body-xs-medium",e.inherit="inherit",e}({}),a.Size=function(e){return e.XXS="xxs",e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.inherit="inherit",e.auto="auto",e}({}),a.BorderStyle=function(e){return e.dashed="dashed",e.solid="solid",e.dotted="dotted",e.double="double",e.none="none",e}({}),a.BorderRadius=function(e){return e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.none="none",e.pill="pill",e.full="full",e}({}),a.AlignItems=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.baseline="baseline",e.stretch="stretch",e}({}),a.JustifyContent=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.spaceAround="space-around",e.spaceBetween="space-between",e.spaceEvenly="space-evenly",e}({}),a.FlexDirection=function(e){return e.Row="row",e.RowReverse="row-reverse",e.Column="column",e.ColumnReverse="column-reverse",e}({});a.FLEX_DIRECTION={ROW:"row",ROW_REVERSE:"row-reverse",COLUMN:"column",COLUMN_REVERSE:"column-reverse"};a.FlexWrap=function(e){return e.Wrap="wrap",e.WrapReverse="wrap-reverse",e.NoWrap="nowrap",e}({});a.FLEX_WRAP={WRAP:"wrap",WRAP_REVERSE:"wrap-reverse",NO_WRAP:"nowrap"};a.Display=function(e){return e.Block="block",e.Flex="flex",e.Grid="grid",e.InlineBlock="inline-block",e.Inline="inline",e.InlineFlex="inline-flex",e.InlineGrid="inline-grid",e.ListItem="list-item",e.None="none",e}({});a.DISPLAY={BLOCK:"block",FLEX:"flex",GRID:"grid",INLINE_BLOCK:"inline-block",INLINE:"inline",INLINE_FLEX:"inline-flex",INLINE_GRID:"inline-grid",LIST_ITEM:"list-item",NONE:"none"};const n=a.FRACTIONS={HALF:"1/2",ONE_THIRD:"1/3",TWO_THIRDS:"2/3",ONE_FOURTH:"1/4",TWO_FOURTHS:"2/4",THREE_FOURTHS:"3/4",ONE_FIFTH:"1/5",TWO_FIFTHS:"2/5",THREE_FIFTHS:"3/5",FOUR_FIFTHS:"4/5",ONE_SIXTH:"1/6",TWO_SIXTHS:"2/6",THREE_SIXTHS:"3/6",FOUR_SIXTHS:"4/6",FIVE_SIXTHS:"5/6",ONE_TWELFTH:"1/12",TWO_TWELFTHS:"2/12",THREE_TWELFTHS:"3/12",FOUR_TWELFTHS:"4/12",FIVE_TWELFTHS:"5/12",SIX_TWELFTHS:"6/12",SEVEN_TWELFTHS:"7/12",EIGHT_TWELFTHS:"8/12",NINE_TWELFTHS:"9/12",TEN_TWELFTHS:"10/12",ELEVEN_TWELFTHS:"11/12"};a.BlockSize=function(e){return e.Zero="0",e.Half="1/2",e.OneThird="1/3",e.TwoThirds="2/3",e.OneFourth="1/4",e.TwoFourths="2/4",e.ThreeFourths="3/4",e.OneFifth="1/5",e.TwoFifths="2/5",e.ThreeFifths="3/5",e.FourFifths="4/5",e.OneSixth="1/6",e.TwoSixths="2/6",e.ThreeSixths="3/6",e.FourSixths="4/6",e.FiveSixths="5/6",e.OneTwelfth="1/12",e.TwoTwelfths="2/12",e.ThreeTwelfths="3/12",e.FourTwelfths="4/12",e.FiveTwelfths="5/12",e.SixTwelfths="6/12",e.SevenTwelfths="7/12",e.EightTwelfths="8/12",e.NineTwelfths="9/12",e.TenTwelfths="10/12",e.ElevenTwelfths="11/12",e.Screen="screen",e.Max="max",e.Min="min",e.Full="full",e}({});a.BLOCK_SIZES={...n,SCREEN:"screen",MAX:"max",MIN:"min",FULL:"full"};a.TextAlign=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Justify="justify",e.End="end",e.Start="start",e}({});a.TEXT_ALIGN={LEFT:"left",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",END:"end",START:"start"};a.TextTransform=function(e){return e.Uppercase="uppercase",e.Lowercase="lowercase",e.Capitalize="capitalize",e}({});a.TEXT_TRANSFORM={UPPERCASE:"uppercase",LOWERCASE:"lowercase",CAPITALIZE:"capitalize"};a.FontWeight=function(e){return e.Bold="bold",e.Medium="medium",e.Normal="normal",e}({}),a.FontFamily=function(e){return e.Default="default",e.Accent="accent",e.Hero="hero",e}({});a.FONT_WEIGHT={BOLD:"bold",MEDIUM:"medium",NORMAL:"normal"};a.OverflowWrap=function(e){return e.BreakWord="break-word",e.Anywhere="anywhere",e.Normal="normal",e}({});a.OVERFLOW_WRAP={BREAK_WORD:"break-word",ANYWHERE:"anywhere",NORMAL:"normal"};a.FontStyle=function(e){return e.Italic="italic",e.Normal="normal",e}({});a.FONT_STYLE={ITALIC:"italic",NORMAL:"normal"};a.Severity=function(e){return e.Danger="danger",e.Warning="warning",e.Info="info",e.Success="success",e}({});a.SEVERITIES={DANGER:"danger",WARNING:"warning",INFO:"info",SUCCESS:"success"},a.BREAKPOINTS=["base","sm","md","lg"]}}},{package:"$root$",file:"ui/helpers/constants/design-system.ts"}],[6985,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.USER_OP_CONTRACT_DEPLOY_ERROR_KEY=a.UNSENDABLE_ASSET_ERROR_KEY=a.TRANSACTION_ERROR_KEY=a.IS_SIGNING_OR_SUBMITTING=a.INVALID_ASSET_TYPE=a.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=a.INSUFFICIENT_FUNDS_ERROR_KEY=a.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=a.GAS_PRICE_EXCESSIVE_ERROR_KEY=a.GAS_LIMIT_TOO_LOW_ERROR_KEY=a.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;a.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds",a.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow",a.TRANSACTION_ERROR_KEY="transactionError",a.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning",a.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed",a.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive",a.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset",a.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas",a.INVALID_ASSET_TYPE="invalidAssetType",a.IS_SIGNING_OR_SUBMITTING="isSigningOrSubmitting",a.USER_OP_CONTRACT_DEPLOY_ERROR_KEY="userOpContractDeployError"}}},{package:"$root$",file:"ui/helpers/constants/error-keys.js"}],[6987,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.NOTIFICATIONS_EXPIRATION_DELAY=void 0;a.NOTIFICATIONS_EXPIRATION_DELAY=1e4}}},{package:"$root$",file:"ui/helpers/constants/notifications.ts"}],[6989,{lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.WALLET_DETAILS_ROUTE=a.UNLOCK_ROUTE=a.SWAPS_ROUTE=a.SWAPS_NOTIFICATION_ROUTE=a.SWAPS_MAINTENANCE_ROUTE=a.SWAPS_ERROR_ROUTE=a.SNAP_SETTINGS_ROUTE=a.SNAPS_VIEW_ROUTE=a.SNAPS_ROUTE=a.SMART_TRANSACTION_STATUS_ROUTE=a.SMART_ACCOUNT_UPDATE=a.SIGNATURE_REQUEST_PATH=a.SETTINGS_ROUTE=a.SEND_ROUTE=a.SECURITY_ROUTE=a.SECURITY_PASSWORD_CHANGE_ROUTE=a.REVIEW_PERMISSIONS=a.REVEAL_SRP_LIST_ROUTE=a.REVEAL_SEED_ROUTE=a.RESTORE_VAULT_ROUTE=a.REMOTE_ROUTE_SETUP_SWAPS=a.REMOTE_ROUTE_SETUP_DAILY_ALLOWANCE=a.REMOTE_ROUTE=a.PREPARE_SWAP_ROUTE=a.PERMISSIONS=a.PATH_NAME_MAP=a.ONBOARDING_WELCOME_ROUTE=a.ONBOARDING_UNLOCK_ROUTE=a.ONBOARDING_SECURE_YOUR_WALLET_ROUTE=a.ONBOARDING_ROUTE=a.ONBOARDING_REVIEW_SRP_ROUTE=a.ONBOARDING_REVEAL_SRP_ROUTE=a.ONBOARDING_PRIVACY_SETTINGS_ROUTE=a.ONBOARDING_PIN_EXTENSION_ROUTE=a.ONBOARDING_METAMETRICS=a.ONBOARDING_IMPORT_WITH_SRP_ROUTE=a.ONBOARDING_HELP_US_IMPROVE_ROUTE=a.ONBOARDING_CREATE_PASSWORD_ROUTE=a.ONBOARDING_CONFIRM_SRP_ROUTE=a.ONBOARDING_COMPLETION_ROUTE=a.ONBOARDING_ACCOUNT_NOT_FOUND=a.ONBOARDING_ACCOUNT_EXIST=a.NOTIFICATIONS_SETTINGS_ROUTE=a.NOTIFICATIONS_ROUTE=a.NEW_ACCOUNT_ROUTE=a.NETWORKS_ROUTE=a.NETWORKS_FORM_ROUTE=a.LOCK_ROUTE=a.LOADING_QUOTES_ROUTE=a.IMPORT_TOKEN_ROUTE=a.IMPORT_TOKENS_ROUTE=a.IMPORT_SRP_ROUTE=a.GENERAL_ROUTE=a.EXPERIMENTAL_ROUTE=a.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=a.DEVELOPER_OPTIONS_ROUTE=a.DEFI_ROUTE=a.DEFAULT_ROUTE=a.DEEP_LINK_ROUTE=a.DECRYPT_MESSAGE_REQUEST_PATH=a.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE=a.CROSS_CHAIN_SWAP_ROUTE=a.CONTACT_VIEW_ROUTE=a.CONTACT_LIST_ROUTE=a.CONTACT_EDIT_ROUTE=a.CONTACT_ADD_ROUTE=a.CONNECT_SNAP_UPDATE_ROUTE=a.CONNECT_SNAP_RESULT_ROUTE=a.CONNECT_SNAP_INSTALL_ROUTE=a.CONNECT_SNAPS_CONNECT_ROUTE=a.CONNECT_ROUTE=a.CONNECT_HARDWARE_ROUTE=a.CONNECT_CONFIRM_PERMISSIONS_ROUTE=a.CONNECTIONS=a.CONNECTED_ROUTE=a.CONNECTED_ACCOUNTS_ROUTE=a.CONFIRM_TRANSFER_FROM_PATH=a.CONFIRM_TRANSACTION_ROUTE=a.CONFIRM_TOKEN_METHOD_PATH=a.CONFIRM_SET_APPROVAL_FOR_ALL_PATH=a.CONFIRM_SEND_TOKEN_PATH=a.CONFIRM_SEND_ETHER_PATH=a.CONFIRM_SAFE_TRANSFER_FROM_PATH=a.CONFIRM_INCREASE_ALLOWANCE_PATH=a.CONFIRM_IMPORT_TOKEN_ROUTE=a.CONFIRM_DEPLOY_CONTRACT_PATH=a.CONFIRM_APPROVE_PATH=a.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=a.CONFIRM_ADD_SUGGESTED_NFT_ROUTE=a.CONFIRMATION_V_NEXT_ROUTE=a.BACKUPANDSYNC_ROUTE=a.AWAITING_SWAP_ROUTE=a.AWAITING_SIGNATURES_ROUTE=a.ASSET_ROUTE=a.ADVANCED_ROUTE=a.ADD_POPULAR_CUSTOM_NETWORK=a.ADD_NETWORK_ROUTE=a.ACCOUNT_DETAILS_ROUTE=a.ACCOUNT_DETAILS_QR_CODE_ROUTE=a.ABOUT_US_ROUTE=void 0,a.getPaths=void 0;var n=e("lodash");const s=a.PATH_NAME_MAP=new Map,r=(a.getPaths=(0,n.memoize)((()=>Array.from(s.keys()))),a.DEFAULT_ROUTE="/");s.set(r,"Home"),s.set("","Home");const o=a.UNLOCK_ROUTE="/unlock";s.set(o,"Unlock Page");const i=a.LOCK_ROUTE="/lock";s.set(i,"Lock Page");const c=a.ASSET_ROUTE="/asset";a.DEFI_ROUTE="/defi";s.set(`${c}/:asset/:id`,"Asset Page"),s.set(`${c}/image/:asset/:id`,"Nft Image Page");const l=a.SETTINGS_ROUTE="/settings";s.set(l,"Settings Page");const u=a.GENERAL_ROUTE="/settings/general";s.set(u,"General Settings Page");const d=a.ADVANCED_ROUTE="/settings/advanced";s.set(d,"Advanced Settings Page");a.DEVELOPER_OPTIONS_ROUTE="/settings/developer-options";const p=a.EXPERIMENTAL_ROUTE="/settings/experimental";s.set(p,"Experimental Settings Page");const m=a.SECURITY_ROUTE="/settings/security";s.set(m,"Security Settings Page");const T=a.ABOUT_US_ROUTE="/settings/about-us";s.set(T,"About Us Page");const g=a.NETWORKS_ROUTE="/settings/networks";s.set(g,"Network Settings Page");const f=a.NETWORKS_FORM_ROUTE="/settings/networks/form";s.set(f,"Network Settings Page Form");const S=a.ADD_NETWORK_ROUTE="/settings/networks/add-network";s.set(S,"Add Network From Settings Page Form");const E=a.ADD_POPULAR_CUSTOM_NETWORK="/settings/networks/add-popular-custom-network";s.set(E,"Add Network From A List Of Popular Custom Networks");const h=a.CONTACT_LIST_ROUTE="/settings/contact-list";s.set(h,"Contact List Settings Page");const A=a.CONTACT_EDIT_ROUTE="/settings/contact-list/edit-contact";s.set(`${A}/:address`,"Edit Contact Settings Page");const _=a.CONTACT_ADD_ROUTE="/settings/contact-list/add-contact";s.set(_,"Add Contact Settings Page");const I=a.CONTACT_VIEW_ROUTE="/settings/contact-list/view-contact";s.set(`${I}/:address`,"View Contact Settings Page");const v=a.SNAP_SETTINGS_ROUTE="/settings/snap";s.set(`${v}/:snapId`,"Snap Settings Page");const y=a.REVEAL_SRP_LIST_ROUTE="/settings/security-and-privacy/reveal-srp-list";s.set(y,"Reveal Secret Recovery Phrase List Page");const N=a.SECURITY_PASSWORD_CHANGE_ROUTE="/settings/security-and-privacy/password-change";s.set(N,"Change Password");const w=a.BACKUPANDSYNC_ROUTE="/settings/security-and-privacy/backup-and-sync";s.set(w,"Backup And Sync Settings Page");const R=a.REVEAL_SEED_ROUTE="/seed";s.set(`${R}/:keyringId`,"Reveal Secret Recovery Phrase Page");const O=a.SMART_ACCOUNT_UPDATE="/smart-account-update";s.set(O,"Smart Account Update Page");const k=a.IMPORT_SRP_ROUTE="/import-srp";s.set(k,"Import Secret Recovery Phrase Page");const C=a.RESTORE_VAULT_ROUTE="/restore-vault";s.set(C,"Restore Vault Page");const P=a.IMPORT_TOKEN_ROUTE="/import-token";s.set(P,"Import Token Page");const M=a.IMPORT_TOKENS_ROUTE="/import-tokens";s.set(M,"Import Tokens Page");const D=a.CONFIRM_IMPORT_TOKEN_ROUTE="/confirm-import-token";s.set(D,"Confirm Import Token Page");const F=a.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE="/confirm-add-suggested-token";s.set(F,"Confirm Add Suggested Token Page");const b=a.NEW_ACCOUNT_ROUTE="/new-account";s.set(b,"New Account Page");const L=a.ACCOUNT_DETAILS_ROUTE="/account-details";s.set(L,"Account Details Page");const x=a.ACCOUNT_DETAILS_QR_CODE_ROUTE="/account-details/qr-code";s.set(x,"Account Details QR Code Page");const U=a.CONFIRM_ADD_SUGGESTED_NFT_ROUTE="/confirm-add-suggested-nft";s.set(U,"Confirm Add Suggested NFT Page");const G=a.CONNECT_HARDWARE_ROUTE="/new-account/connect";s.set(G,"Connect Hardware Wallet Page");const H=a.SEND_ROUTE="/send";s.set(H,"Send Page");const B=a.REMOTE_ROUTE="/remote";s.set(B,"Remote Mode Page");const W=a.REMOTE_ROUTE_SETUP_SWAPS="/remote/setup-swaps";s.set(W,"Remote Mode Setup Swaps Page");const $=a.REMOTE_ROUTE_SETUP_DAILY_ALLOWANCE="/remote/setup-daily-allowance";s.set($,"Remote Mode Setup Daily Allowance Page");const j=a.CONNECTIONS="/connections";s.set(j,"Connections");const V=a.PERMISSIONS="/permissions";s.set(V,"Permissions");a.REVIEW_PERMISSIONS="/review-permissions";const K=a.CONNECT_ROUTE="/connect";s.set(`${K}/:id`,"Connect To Site Confirmation Page");const q=a.CONNECT_CONFIRM_PERMISSIONS_ROUTE="/confirm-permissions";s.set(`${K}/:id${q}`,"Grant Connected Site Permissions Confirmation Page");const Q=a.CONNECT_SNAPS_CONNECT_ROUTE="/snaps-connect";s.set(`${K}/:id${Q}`,"Snaps Connect Page");const Y=a.CONNECT_SNAP_INSTALL_ROUTE="/snap-install";s.set(`${K}/:id${Y}`,"Snap Install Page");const X=a.CONNECT_SNAP_UPDATE_ROUTE="/snap-update";s.set(`${K}/:id${X}`,"Snap Update Page");const z=a.CONNECT_SNAP_RESULT_ROUTE="/snap-install-result";s.set(`${K}/:id${z}`,"Snap Install Result Page");const Z=a.SNAPS_ROUTE="/snaps";s.set(Z,"Snaps List Page");const J=a.SNAPS_VIEW_ROUTE="/snaps/view";s.set(`${J}/:snapId`,"Snap View Page");const ee=a.NOTIFICATIONS_ROUTE="/notifications";s.set(ee,"Notifications Page"),s.set(`${ee}/:uuid`,"Notification Detail Page");const te=a.NOTIFICATIONS_SETTINGS_ROUTE="/notifications/settings";s.set(te,"Notifications Settings Page");const ae=a.CONNECTED_ROUTE="/connected";s.set(ae,"Sites Connected To This Account Page");const ne=a.CONNECTED_ACCOUNTS_ROUTE="/connected/accounts";s.set(ne,"Accounts Connected To This Site Page");const se=a.CONFIRM_TRANSACTION_ROUTE="/confirm-transaction";s.set(se,"Confirmation Root Page"),s.set(`${se}/:id`,"Confirmation Root Page");const re=a.CONFIRMATION_V_NEXT_ROUTE="/confirmation";s.set(re,"New Confirmation Page"),s.set(`${re}/:id`,"New Confirmation Page");const oe=a.CONFIRM_SEND_ETHER_PATH="/send-ether";s.set(`${se}/:id${oe}`,"Confirm Send Ether Transaction Page");const ie=a.CONFIRM_SEND_TOKEN_PATH="/send-token";s.set(`${se}/:id${ie}`,"Confirm Send Token Transaction Page");const ce=a.CONFIRM_DEPLOY_CONTRACT_PATH="/deploy-contract";s.set(`${se}/:id${ce}`,"Confirm Deploy Contract Transaction Page");const le=a.CONFIRM_APPROVE_PATH="/approve";s.set(`${se}/:id${le}`,"Confirm Approve Transaction Page");const ue=a.CONFIRM_SET_APPROVAL_FOR_ALL_PATH="/set-approval-for-all";s.set(`${se}/:id${ue}`,"Confirm Set Approval For All Transaction Page");const de=a.CONFIRM_TRANSFER_FROM_PATH="/transfer-from";s.set(`${se}/:id${de}`,"Confirm Transfer From Transaction Page");const pe=a.CONFIRM_SAFE_TRANSFER_FROM_PATH="/safe-transfer-from";s.set(`${se}/:id${pe}`,"Confirm Safe Transfer From Transaction Page");const me=a.CONFIRM_TOKEN_METHOD_PATH="/token-method";s.set(`${se}/:id${me}`,"Confirm Token Method Transaction Page");const Te=a.CONFIRM_INCREASE_ALLOWANCE_PATH="/increase-allowance";s.set(`${se}/:id${Te}`,"Confirm Increase Allowance Transaction Page");const ge=a.SIGNATURE_REQUEST_PATH="/signature-request";s.set(`${se}/:id${ge}`,"Signature Request Page");const fe=a.DECRYPT_MESSAGE_REQUEST_PATH="/decrypt-message-request";s.set(`${se}/:id${fe}`,"Decrypt Message Request Page");const Se=a.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH="/encryption-public-key-request";s.set(`${se}/:id${Se}`,"Encryption Public Key Request Page");const Ee=a.CROSS_CHAIN_SWAP_ROUTE="/cross-chain";s.set(Ee,"Prepare Cross Chain Swap Page");a.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE="/cross-chain/tx-details",a.SWAPS_ROUTE="/swaps";const he=a.PREPARE_SWAP_ROUTE="/swaps/prepare-swap-page";s.set(he,"Prepare Swap Page");const Ae=a.SWAPS_NOTIFICATION_ROUTE="/swaps/notification-page";s.set(Ae,"Swaps Notification Page");const _e=a.LOADING_QUOTES_ROUTE="/swaps/loading-quotes";s.set(_e,"Swaps Loading Quotes Page");a.AWAITING_SIGNATURES_ROUTE="/swaps/awaiting-signatures",a.SMART_TRANSACTION_STATUS_ROUTE="/swaps/smart-transaction-status";const Ie=a.AWAITING_SWAP_ROUTE="/swaps/awaiting-swap";s.set(Ie,"Swaps Awaiting Swaps Page");const ve=a.SWAPS_ERROR_ROUTE="/swaps/swaps-error";s.set(ve,"Swaps Error Page");a.SWAPS_MAINTENANCE_ROUTE="/swaps/maintenance",a.ONBOARDING_ROUTE="/onboarding",a.ONBOARDING_REVEAL_SRP_ROUTE="/onboarding/reveal-recovery-phrase",a.ONBOARDING_REVIEW_SRP_ROUTE="/onboarding/review-recovery-phrase",a.ONBOARDING_CONFIRM_SRP_ROUTE="/onboarding/confirm-recovery-phrase",a.ONBOARDING_CREATE_PASSWORD_ROUTE="/onboarding/create-password",a.ONBOARDING_COMPLETION_ROUTE="/onboarding/completion",a.ONBOARDING_UNLOCK_ROUTE="/onboarding/unlock",a.ONBOARDING_HELP_US_IMPROVE_ROUTE="/onboarding/help-us-improve",a.ONBOARDING_IMPORT_WITH_SRP_ROUTE="/onboarding/import-with-recovery-phrase",a.ONBOARDING_SECURE_YOUR_WALLET_ROUTE="/onboarding/secure-your-wallet",a.ONBOARDING_PRIVACY_SETTINGS_ROUTE="/onboarding/privacy-settings",a.ONBOARDING_PIN_EXTENSION_ROUTE="/onboarding/pin-extension",a.ONBOARDING_WELCOME_ROUTE="/onboarding/welcome",a.ONBOARDING_METAMETRICS="/onboarding/metametrics",a.ONBOARDING_ACCOUNT_EXIST="/onboarding/account-exist",a.ONBOARDING_ACCOUNT_NOT_FOUND="/onboarding/account-not-found";const ye=a.DEEP_LINK_ROUTE="/link";s.set(ye,"Deep link Redirect Page");const Ne=a.WALLET_DETAILS_ROUTE="/wallet-details/:id";s.set(Ne,"Wallet Details Page")}}},{package:"$root$",file:"ui/helpers/constants/routes.ts"}],[6995,{"@metamask/transaction-controller":2925},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.TOKEN_CATEGORY_HASH=a.PRIORITY_STATUS_HASH=a.PENDING_STATUS_HASH=void 0;var n=e("@metamask/transaction-controller");const s=a.PENDING_STATUS_HASH={[n.TransactionStatus.unapproved]:!0,[n.TransactionStatus.approved]:!0,[n.TransactionStatus.submitted]:!0};a.PRIORITY_STATUS_HASH={...s,[n.TransactionStatus.confirmed]:!0},a.TOKEN_CATEGORY_HASH={[n.TransactionType.tokenMethodApprove]:!0,[n.TransactionType.tokenMethodSetApprovalForAll]:!0,[n.TransactionType.tokenMethodTransfer]:!0,[n.TransactionType.tokenMethodTransferFrom]:!0,[n.TransactionType.tokenMethodIncreaseAllowance]:!0}}}},{package:"$root$",file:"ui/helpers/constants/transactions.js"}],[6996,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default={ACCOUNT_UPGRADE:"https://support.metamask.io/configure/accounts/what-is-a-smart-account",ADD_CUSTOM_TOKENS:"https://support.metamask.io/managing-my-tokens/custom-tokens/how-to-display-tokens-in-metamask/",ADD_SOLANA_ACCOUNTS:"https://support.metamask.io/configure/accounts/how-to-add-accounts-in-your-wallet/#solana-accounts",ADD_MISSING_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-missing-accounts-after-restoring-with-secret-recovery-phrase/",BASIC_SAFETY:"https://support.metamask.io/privacy-and-security/basic-safety-and-security-tips-for-metamask/",CUSTOMIZE_NONCE:"https://support.metamask.io/transactions-and-gas/transactions/how-to-customize-a-transaction-nonce/",GAS_FEES:"https://support.metamask.io/transactions-and-gas/gas-fees/",SWAPS_GAS_FEES:"https://support.metamask.io/token-swaps/user-guide-swaps/#gas-fees",HARDWARE_CONNECTION:"https://support.metamask.io/privacy-and-security/hardware-wallet-hub/",IMPORT_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-import-an-account/",IMPORTED_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/what-are-imported-accounts-/",IMPORTED_ACCOUNT_JSON:"https://support.metamask.io/start/how-to-import-an-account/#how-can-i-import-my-private-key-using-a-json-file",IMPORTED_ACCOUNTS_PRIVATE_KEY:"https://support.metamask.io/start/use-an-existing-wallet/#importing-using-a-private-key",INFURA_BLOCKAGE:"https://support.metamask.io/troubleshooting/why-infura-cannot-serve-certain-areas/",LEDGER_FIREFOX_U2F_GUIDE:"https://support.ledger.com/hc/en-us/articles/10371387758493-MetaMask-Firefox-Ledger-Integration-Issue?support=true",LEGACY_WEB3:"https://support.metamask.io/third-party-platforms-and-dapps/metamask-legacy-web3/",NFT_TOKENS:"https://support.metamask.io/nfts/nft-tokens-in-your-metamask-wallet/",PASSWORD_ARTICLE:"https://support.metamask.io/configure/wallet/passwords-and-metamask/",PASSWORD_AND_SRP_ARTICLE:"https://support.metamask.io/getting-started/user-guide-secret-recovery-phrase-password-and-private-keys/",PASSWORD_RESET:"https://support.metamask.io/configure/wallet/how-can-i-reset-my-password/",RESET_ADD_MISSING_ACCOUNT:"https://support.metamask.io/configure/accounts/how-to-add-missing-accounts-after-restoring-with-secret-recovery-phrase/",RESET_DISPLAY_TOKENS:"https://support.metamask.io/manage-crypto/tokens/how-to-display-tokens-in-metamask/",RESET_IMPORT_AN_ACCOUNT:"https://support.metamask.io/start/how-to-import-an-account/",SECRET_RECOVERY_PHRASE:"https://support.metamask.io/privacy-and-security/what-is-a-secret-recovery-phrase-and-how-to-keep-your-crypto-wallet-secure/",NON_CUSTODIAL_WALLET:"https://support.metamask.io/getting-started/metamask-is-a-self-custodial-wallet/",SPEEDUP_CANCEL:"https://support.metamask.io/transactions-and-gas/transactions/how-to-speed-up-or-cancel-a-pending-transaction/",SUPPORT_URL:"https://support.metamask.io",TOKEN_ALLOWANCE_WITH_SPENDING_CAP:"https://support.metamask.io/privacy-and-security/how-to-customize-token-approvals-with-a-spending-cap/",TOKEN_SAFETY_PRACTICES:"https://support.metamask.io/managing-my-tokens/token-safety-practices/",UNKNOWN_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/the-risks-of-connecting-to-an-unknown-network/",USER_GUIDE_CUSTOM_NETWORKS:"https://support.metamask.io/networks-and-sidechains/managing-networks/user-guide-custom-networks-and-sidechains/",USER_GUIDE_DAPPS:"https://support.metamask.io/third-party-platforms-and-dapps/user-guide-dapps/",USER_GUIDE_GAS:"https://support.metamask.io/transactions-and-gas/gas-fees/user-guide-gas/",VERIFY_CUSTOM_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/verifying-custom-network-information/",NETWORK_DEPRECATED:"https://support.metamask.io/networks-and-sidechains/eth-on-testnets/",SOLANA_ACCOUNTS:"https://support.metamask.io/configure/accounts/how-to-add-accounts-in-your-wallet/#solana-accounts"}}}},{package:"$root$",file:"ui/helpers/constants/zendesk-url.js"}],[7,{"../../../shared/modules/object.utils":5915},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.SENTRY_UI_STATE=a.SENTRY_BACKGROUND_STATE=void 0;var n=e("../../../shared/modules/object.utils");const s=a.SENTRY_BACKGROUND_STATE={AccountTreeController:{accountTree:!1},AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},AuthenticationController:{isSignedIn:!1,srpSessionData:!1},NetworkOrderController:{orderedNetworkList:[],enabledNetworkMap:{}},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,onboardingDate:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,enableEnforcedSimulations:!0,enableEnforcedSimulationsForTransactions:!1,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,isRampCardClosed:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,throttledOrigins:!1,timeoutMinutes:!0,trezorModel:!0,isUpdateAvailable:!0,updateModalLastDismissedAt:!0,lastUpdatedAt:!0},MultichainBalancesController:{balances:!1},MultichainAssetsController:{accountsAssets:!1,assetsMetadata:!1},MultichainAssetsRatesController:{assetsRates:!1},BridgeController:{assetExchangeRates:!1,minimumBalanceForRentExemptionInLamports:!1,quoteRequest:{walletAddress:!1,srcTokenAddress:!0,slippage:!0,srcChainId:!0,destChainId:!0,destTokenAddress:!0,srcTokenAmount:!0},quotes:[],quotesInitialLoadTime:!0,quotesLastFetched:!0,quotesLoadingStatus:!0,quoteFetchError:!0,quotesRefreshCount:!0},BridgeStatusController:{txHistory:!1},CronjobController:{events:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0,nonRPCGasFeeApisDisabled:!1},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},NotificationServicesController:{subscriptionAccountsSeen:!1,isMetamaskNotificationsFeatureSeen:!1,isNotificationServicesEnabled:!1,isFeatureAnnouncementsEnabled:!1,metamaskNotificationsList:!1,metamaskNotificationsReadList:!1,isCheckingAccountsPresence:!1,isFetchingMetamaskNotifications:!1,isUpdatingMetamaskNotifications:!1,isUpdatingMetamaskNotificationsAccount:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,tracesBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,segmentApiCalls:!1,traits:!1,dataCollectionForMarketing:!1,marketingCampaignCookieId:!0,latestNonAnonymousEventTimestamp:!0},MetaMetricsDataDeletionController:{metaMetricsDataDeletionId:!0,metaMetricsDataDeletionTimestamp:!0},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,dismissSeedBackUpReminder:!0,overrideContentSecurityPolicyHeader:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,tokenNetworkFilter:{},showNativeTokenAsMainBalance:!0,showConfirmationAdvancedDetails:!0,privacyMode:!1},useExternalServices:!1,selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,addressSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,usePhishDetect:!0,useTokenDetection:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0},RemoteFeatureFlagController:{remoteFeatureFlags:!0,cacheTimestamp:!1},NotificationServicesPushController:{fcmToken:!1},MultichainRatesController:{fiatCurrency:!0,rates:!0,cryptocurrencies:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{snaps:!1},SnapInterfaceController:{interfaces:!1},SnapInsightsController:{insights:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxStatusDeadline:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[n.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokensChainsCache:{[n.AllProperties]:!1}},TokenBalancesController:{tokenBalances:!1},TokenRatesController:{marketData:!1},TokensController:{allDetectedTokens:{[n.AllProperties]:!1},allIgnoredTokens:{[n.AllProperties]:!1},allTokens:{[n.AllProperties]:!1}},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1},UserStorageController:{isBackupAndSyncEnabled:!0,isBackupAndSyncUpdateLoading:!1,isAccountSyncingEnabled:!0,isContactSyncingEnabled:!0,hasAccountSyncingSyncedAtLeastOnce:!1,isAccountSyncingReadyToBeDispatched:!1}},r=Object.values(s).reduce(((e,t)=>({...e,...t})),{});a.SENTRY_UI_STATE={gas:!0,history:!0,appState:{customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,slides:!1,confirmationExchangeRates:!0},metamask:{...r,isInitialized:!0,useSafeChainsListValidation:!0,watchEthereumAccountEnabled:!1,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,newPrivacyPolicyToastClickedOrClosed:!1,newPrivacyPolicyToastShownDate:!1},unconnectedAccount:!0}}}},{package:"$root$",file:"app/scripts/constants/sentry-state.ts"}],[7008,{"../../../app/build-types/main/fox.json":3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){var n;Object.defineProperty(a,"__esModule",{value:!0}),a.getBuildSpecificAsset=function(e){const t="main";if(!s[t]||!Object.keys(s[t]).includes(e))return console.error(`Cannot find asset "${e}" for build "${t}", returning main build asset.`),s.main[e];return s[t][e]},a.isBeta=function(){return!1},a.isFlask=function(){return!1};const s={main:{foxMeshJson:((n=e("../../../app/build-types/main/fox.json"))&&n.__esModule?n:{default:n}).default}}}}},{package:"$root$",file:"ui/helpers/utils/build-types.js"}],[7010,{"../../../shared/constants/common":5800,"../../../shared/modules/Numeric":5899,"bignumber.js":3997,"currency-formatter":4254,"currency-formatter/currencies":4253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.addEth=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(6)),new o.Numeric(e,10)).toString()},a.addFiat=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(2)),new o.Numeric(e,10)).toString()},a.areDappSuggestedAndTxParamGasFeesTheSame=function(e){const{txParams:t,dappSuggestedGasFees:a}=e??{},{gasPrice:n,maxFeePerGas:s,maxPriorityFeePerGas:r}=t||{},{gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c}=a||{},l=!o&&!i&&!c;if(!n&&!s&&!r||l)return!1;const u=n&&n===o,d=[s,r].every((e=>e===o)),p=s&&s===i&&r===c;return Boolean(u||d||p)},a.convertTokenToFiat=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:a,conversionRate:n,contractExchangeRate:s}){const r=n*s;let c=new o.Numeric(e,10);t!==a&&r&&(c=c.applyConversionRate(r));return c.round(2).toString()},a.formatCurrency=function(e,t,a){const r=t.toUpperCase();return s.default.find((e=>e.code===r))?n.default.format(Number(e),{code:r,precision:a}):e},a.getHexGasTotal=function({gasLimit:e="0x0",gasPrice:t="0x0"}){return new o.Numeric(e,16).times(new o.Numeric(t,16)).toPrefixedHexString()},a.getTransactionFee=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:a,conversionRate:n,numberOfDecimals:s}){let r=new o.Numeric(e,16,i.EtherDenomination.WEI).toDenomination(i.EtherDenomination.ETH).toBase(10);t!==a&&n&&(r=r.applyConversionRate(n));return r.round(s).toString()},a.roundExponential=function(e){const t=new r.BigNumber(e);return t.e>20?t.toPrecision(4):e};var n=c(e("currency-formatter")),s=c(e("currency-formatter/currencies")),r=e("bignumber.js"),o=e("../../../shared/modules/Numeric"),i=e("../../../shared/constants/common");function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/helpers/utils/confirm-tx.util.ts"}],[7013,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$",file:"ui/helpers/utils/formatters.js"}],[7016,{"../../../shared/constants/network":5813,"../../../shared/modules/i18n":5911,"@sentry/browser":3091,react:5262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getMessage=void 0,a.getNetworkLabelKey=function(e){if(e===i.NETWORK_TYPES.LINEA_SEPOLIA)return"lineaSepolia";if(e===i.NETWORK_TYPES.LINEA_MAINNET)return"lineaMainnet";return e};var n,s=(n=e("react"))&&n.__esModule?n:{default:n},r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var o=s?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(e("@sentry/browser")),o=e("../../../shared/modules/i18n"),i=e("../../../shared/constants/network");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}a.getMessage=(e,t,a,n)=>{const i=(null==n?void 0:n.some((e=>null!==e&&("function"==typeof e||"object"==typeof e))))?e=>s.default.createElement("span",null," ",e," "):undefined;return(0,o.getMessage)(e,t,a,n,(e=>{r.captureException(e)}),i)}}}},{package:"$root$",file:"ui/helpers/utils/i18n-helper.tsx"}],[7017,{"../../../shared/modules/hexstring-utils":5910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.IconFactory=void 0,a.default=function(e){o||(o=new r(e));return o};var n=e("../../../shared/modules/hexstring-utils");function s(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e,t=i){s(this,"jazzicon",void 0),s(this,"generateSeed",void 0),s(this,"cache",void 0),this.jazzicon=e,this.generateSeed=t,this.cache={}}iconForAddress(e,t,a){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,n.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,a)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(a):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const a=`${e}:${t}`;return(this.cache[a]||(this.cache[a]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const a=this.generateSeed(e);return this.jazzicon(t,a)}}let o;function i(e){const t=e.slice(2,10);return parseInt(t,16)}a.IconFactory=r}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[7020,{"../../../shared/constants/metametrics":5810,"../../../shared/constants/security-provider":5820,"../../../shared/lib/transactions-controller-utils":5894,"@metamask/transaction-controller":2925},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.formatAccountType=function(e){if("default"===e)return"metamask";return e},a.generateSignatureUniqueId=function(e){return`signature-${e}`},a.getBlockaidMetricsProps=void 0,a.getMethodName=function(e){if(!e||"string"!=typeof e)return"";return e.replace(/([a-z])([A-Z])/gu,"$1 $2").replace(/([A-Z])([a-z])/gu," $1$2").replace(/ +/gu," ")},a.getSwapAndSendMetricsProps=void 0;var n=e("@metamask/transaction-controller"),s=e("../../../shared/constants/security-provider"),r=e("../../../shared/constants/metametrics"),o=e("../../../shared/lib/transactions-controller-utils");a.getBlockaidMetricsProps=({securityAlertResponse:e})=>{if(!e)return{};const t={},{providerRequestsCount:a,reason:n,result_type:o,description:i,source:c}=e,l=(e=>{let t;return e===s.BlockaidResultType.Malicious?t=[r.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:e===s.BlockaidResultType.Warning?t=[r.MetaMetricsEventUiCustomization.FlaggedAsWarning]:e===s.BlockaidResultType.Errored&&(t=[r.MetaMetricsEventUiCustomization.SecurityAlertError]),t})(o);return l&&(t.ui_customizations=l),o!==s.BlockaidResultType.Benign&&(t.security_alert_reason=n??s.BlockaidReason.notApplicable),i&&(t.security_alert_description=i),t.security_alert_response=o??s.BlockaidResultType.NotApplicable,t.security_alert_source=c,a&&Object.keys(a).forEach((e=>{t[`ppom_${e}_count`]=a[e]})),t};a.getSwapAndSendMetricsProps=e=>{if(e.type!==n.TransactionType.swapAndSend)return{};const{chainId:t,sourceTokenAmount:a,sourceTokenDecimals:s,destinationTokenAmount:r,destinationTokenDecimals:i,sourceTokenSymbol:c,destinationTokenAddress:l,destinationTokenSymbol:u,sourceTokenAddress:d}=e;return{chain_id:t,token_amount_source:a&&s?(0,o.calcTokenAmount)(a,s).toString():undefined,token_amount_dest_estimate:r&&i?(0,o.calcTokenAmount)(r,i).toString():undefined,token_symbol_source:c,token_symbol_destination:u,token_address_source:d,token_address_destination:l}}}}},{package:"$root$",file:"ui/helpers/utils/metrics.js"}],[7030,{"../../../shared/modules/environment":5905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.isSnapIgnoredInProd=a.decodeSnapIdFromPathname=void 0;var n=e("../../../shared/modules/environment");a.decodeSnapIdFromPathname=e=>{var t;const a=null==e||null===(t=e.match(/[^/]+$/u))||void 0===t?void 0:t[0];return a&&decodeURIComponent(a)};const s=["npm:@metamask/preinstalled-example-snap"];a.isSnapIgnoredInProd=e=>!!(0,n.isProduction)()&&s.includes(e)}}},{package:"$root$",file:"ui/helpers/utils/snaps.ts"}],[7033,{"../../../shared/constants/transaction":5829,"../../../shared/lib/metamask-controller-utils":5879,"../../../shared/lib/transactions-controller-utils":5894,"../../../shared/modules/Numeric":5899,"../../../shared/modules/string-utils":5924,"../../../shared/modules/transaction.utils":5926,"../../store/actions":7835,"./confirm-tx.util":7010,"./util":7037,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getAssetDetails=async function(e,t,a,n,d){var p,m,T;const g=(0,i.parseStandardTokenTransactionData)(a);if(!g)throw new Error(`Unable to detect valid token data for token: ${e}`);let f=(null===(p=I(g))||void 0===p?void 0:p.toString())??(0,l.getTokenValueParam)(g);const S=_(g);let E;if(null!=n&&n.length&&f){const t=n.find((({address:t,tokenId:a})=>(0,o.isEqualCaseInsensitive)(e,t)&&a===f));if(t&&(t.name||t.symbol))return{toAddress:S,...t}}try{E=d?await(0,r.getTokenStandardAndDetailsByChain)(e,t,f,d):await(0,r.getTokenStandardAndDetails)(e,t,f)}catch(e){return s.default.warn(e),{toAddress:S,tokenId:f}}const h=(0,l.getTokenValueParam)(g),A=null===(m=E)||void 0===m?void 0:m.decimals,v=g&&h&&A&&(0,u.calcTokenAmount)(h,A).toString(10),y=A&&Number(null==A?void 0:A.toString(10));(null===(T=E)||void 0===T?void 0:T.standard)===c.TokenStandard.ERC20&&(f=undefined);return{tokenAmount:v,toAddress:S,decimals:y,tokenId:f,...E}},a.getSymbolAndDecimalsAndName=A,a.getTokenAddressParam=_,a.getTokenFiatAmount=function(e,t,a,n,s,r=!0,o=!1){if(t<=0||!e||n===undefined||!1===n)return undefined;const i=new d.Numeric(e,10).times(new d.Numeric(t,10)).toString();let c,l=new d.Numeric(n,10);s!==a.toUpperCase()&&i&&(l=l.applyConversionRate(i));l=l.round(2).toString(),c=o&&r?(0,m.formatCurrency)(l,a):r?`${(0,m.formatCurrency)(l,a)} ${a.toUpperCase()}`:l;return c},a.getTokenIdParam=I,a.getTokenMetadata=f,a.tokenInfoGetter=function(){const e={};return async(t,a)=>e[t.toLowerCase()]?e[t.toLowerCase()]:(e[t]=await A(t,a),e[t])};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n},r=e("../../store/actions"),o=e("../../../shared/modules/string-utils"),i=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/transaction"),l=e("../../../shared/lib/metamask-controller-utils"),u=e("../../../shared/lib/transactions-controller-utils"),d=e("../../../shared/modules/Numeric"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var o=s?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(e("./util")),m=e("./confirm-tx.util");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}const g="";function f(e,t){return e&&t[e.toLowerCase()]}async function S(e,t){let a=await async function(e){const t=p.getContractAtAddress(e);try{return"0x"===await t.provider.getCode(e)?"":await t.symbol()}catch(t){return s.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!a){const n=f(e,t);n&&(a=n.symbol)}return a}async function E(e,t){let a=await async function(e){const t=p.getContractAtAddress(e);try{return"0x"===await t.provider.getCode(e)?"":await t.name()}catch(t){return s.default.warn(`name() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!a){const n=f(e,t);n&&(a=n.name)}return a}async function h(e,t){let a=await async function(e){const t=p.getContractAtAddress(e);try{if("0x"===await t.provider.getCode(e))return"0";const a=await t.decimals();return null==a?void 0:a.toString()}catch(t){return s.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!a||"0"===a){const s=f(e,t);var n;if(s)a=null===(n=s.decimals)||void 0===n?void 0:n.toString()}return a}async function A(e,t){let a,n,r;try{const s=(await Promise.allSettled([S(e,t),h(e,t),E(e,t)])).filter((e=>"fulfilled"===e.status)).map((e=>e.value));[a,n,r]=s}catch(t){s.default.warn(`symbol() and decimal() and name() calls for token at address ${e} resulted in error:`,t)}return{symbol:a||g,decimals:n,name:r}}function _(e={}){var t,a,n;const s=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(a=e.args)||void 0===a?void 0:a.to)||(null==e||null===(n=e.args)||void 0===n?void 0:n[0]);return null==s?void 0:s.toString().toLowerCase()}function I(e={}){var t,a;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(a=e.args)||void 0===a||null===(a=a.id)||void 0===a?void 0:a.toString())}}}},{package:"$root$",file:"ui/helpers/utils/token-util.js"}],[7034,{"../../../app/scripts/lib/util":226,"../../../shared/constants/transaction":5829,"../../../shared/modules/contract-utils":5903,"@metamask/transaction-controller":2925},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getFourBytePrefix=function(e=""){const t=(0,s.addHexPrefix)(e);return t.slice(0,10)},a.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,a)=>{const{submittedTime:n,txParams:{nonce:s}={}}=a;return s===t?e.submittedTime?n>e.submittedTime?a:e:a:e}),{})},a.getStatusKey=function(e){const{txReceipt:{status:t}={},type:a,status:s}=e;if("0x0"===t)return n.TransactionStatus.failed;if(s===n.TransactionStatus.confirmed&&a===n.TransactionType.cancel)return r.TransactionGroupStatus.cancelled;return e.status},a.getTransactionTypeTitle=function(e,t,a="ETH"){switch(t){case n.TransactionType.tokenMethodTransfer:return e("transfer");case n.TransactionType.tokenMethodTransferFrom:return e("transferFrom");case n.TransactionType.tokenMethodSafeTransferFrom:return e("safeTransferFrom");case n.TransactionType.tokenMethodApprove:return e("approve");case n.TransactionType.tokenMethodSetApprovalForAll:return e("setApprovalForAll");case n.TransactionType.tokenMethodIncreaseAllowance:return e("approveIncreaseAllowance");case n.TransactionType.simpleSend:return e("sendingNativeAsset",[a]);case n.TransactionType.contractInteraction:case n.TransactionType.batch:case n.TransactionType.revokeDelegation:return e("contractInteraction");case n.TransactionType.deployContract:return e("contractDeployment");case n.TransactionType.swap:return e("swap");case n.TransactionType.swapAndSend:return e("swapAndSend");case n.TransactionType.swapApproval:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},a.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===n.TransactionEnvelopeType.legacy},a.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,o.readAddressAsContract)(global.ethereumProvider,e);return t},a.isTokenMethodAction=function(e){return[n.TransactionType.tokenMethodTransfer,n.TransactionType.tokenMethodApprove,n.TransactionType.tokenMethodSetApprovalForAll,n.TransactionType.tokenMethodTransferFrom,n.TransactionType.tokenMethodSafeTransferFrom,n.TransactionType.tokenMethodIncreaseAllowance].includes(e)};var n=e("@metamask/transaction-controller"),s=e("../../../app/scripts/lib/util"),r=e("../../../shared/constants/transaction"),o=e("../../../shared/modules/contract-utils")}}},{package:"$root$",file:"ui/helpers/utils/transactions.util.js"}],[7036,{"./util":7037,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,a,n,o,i){s.default.debug("tx-helper called with params:"),s.default.debug({unapprovedTxs:e,personalMsgs:t,decryptMsgs:a,encryptionPublicKeyMsgs:n,typedMessages:o,chainId:i});const c=i?(0,r.valuesFor)(e).filter((e=>e.chainId===i)):(0,r.valuesFor)(e),l=(0,r.valuesFor)(t),u=(0,r.valuesFor)(a),d=(0,r.valuesFor)(n),p=(0,r.valuesFor)(o),m=c.concat(l).concat(u).concat(d).concat(p).sort(((e,t)=>e.time-t.time));return s.default.debug(`tx helper found ${c.length} unapproved txs`),s.default.debug(`tx helper found ${l.length} unsigned personal messages`),s.default.debug(`tx helper found ${u.length} decrypt requests`),s.default.debug(`tx helper found ${d.length} encryptionPublicKey requests`),s.default.debug(`tx helper found ${p.length} unsigned typed messages`),m};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n},r=e("./util")}}},{package:"$root$",file:"ui/helpers/utils/tx-helper.ts"}],[7037,{"../../../app/scripts/lib/multichain/address":153,"../../../shared/constants/labels":5808,"../../../shared/constants/network":5813,"../../../shared/lib/accounts":5834,"../../../shared/modules/Numeric":5899,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/error":5906,"../../../shared/modules/hexstring-utils":5910,"../../../shared/modules/string-utils":5924,"../constants/common":6982,"../constants/routes":6989,"@ethersproject/contracts":581,"@ethersproject/providers":619,"@metamask/assets-controllers":1457,"@metamask/keyring-controller":2084,"@metamask/snaps-rpc-methods":2683,"@metamask/snaps-utils":2853,"@metamask/utils":2974,"bignumber.js":3997,"bn.js":4045,bowser:4056,buffer:4106,"human-standard-token-abi":4698,lodash:4912,luxon:4922,"punycode/punycode":5141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){(function(t){(function(){Object.defineProperty(a,"__esModule",{value:!0}),a.IS_FLASK=void 0,a.addressSummary=function(e,t=10,a=4,n=!0){if(!e)return"";let s=(0,w.normalizeSafeAddress)(e);n||(s=(0,h.stripHexPrefix)(s));return s?`${s.slice(0,t)}...${s.slice(s.length-a)}`:"..."},a.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new r.default(e,10).gt(t,10)},a.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new r.default(e,10).gte(t,10)},a.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new r.default(e,10).lt(t,10)},a.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new r.default(e,10).lte(t,10)},a.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},a.checkExistingAllTokens=function(e,t,a,n={}){var s;if(!e)return!1;return null==n||null===(s=n[t])||void 0===s||null===(s=s[a])||void 0===s?void 0:s.some((t=>t.address.toLowerCase()===e.toLowerCase()))},a.checkTokenIdExists=void 0,a.clearClipboard=function(){window.navigator.clipboard.writeText("")},a.fetchTokenExchangeRates=void 0,a.formatBalance=function(e,t,a=!0,n="ETH"){const s=a?P(e):e.split("."),r=s[0];let o=s[1],i="None";if(t===undefined)if("0"===r){if("0"!==o){const e=o.match(/^0*(.{2})/u);e&&(o=e[0]),i=`0.${o} ${n}`}}else i=`${r}.${o.slice(0,3)} ${n}`;else o+=Array(t).join("0"),i=`${r}.${o.slice(0,t)} ${n}`;return i},a.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},a.formatDateWithSuffix=function(e){const t=i.DateTime.fromMillis(1e3*e),{day:a}=t,n=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(a);return t.toFormat(`MMM d'${n}', yyyy`)},a.formatDateWithYearContext=function(e,t="MMM d",a="MMM d, y"){if(!e)return"";const n=i.DateTime.fromMillis(e),s=i.DateTime.local();return n.toFormat(s.year===n.year?t:a)},a.formatUTCDateFromUnixTimestamp=void 0,a.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},a.getAssetImageURL=async function(e,t){if(!e||"string"!=typeof e)return"";if(t&&e.startsWith("ipfs://"))try{return await(0,c.getFormattedIpfsUrl)(t,e,!0)}catch(e){return(0,E.logErrorWithMessage)(e),""}return e},a.getCalculatedTokenAmount1dAgo=a.getAvatarFallbackLetter=void 0,a.getContractAtAddress=function(e){return new g.Contract(e,s.default,new T.Web3Provider(global.ethereumProvider))},a.getFilteredSnapPermissions=a.getDedupedSnaps=void 0,a.getIsBrowserDeprecated=function(e=u.default.getParser(window.navigator.userAgent)){return e.satisfies(I.OUTDATED_BROWSER_VERSIONS)??!1},a.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],a=Math.floor(7*Math.random()+6);for(let n=0;n<a;n++)e+=t[Math.floor(Math.random()*t.length)];return e},a.getSnapRoute=a.getSnapName=void 0,a.getURL=F,a.getURLHost=function(e){var t;return(null===(t=F(e))||void 0===t?void 0:t.host)||""},a.getURLHostName=function(e){var t;return(null===(t=F(e))||void 0===t?void 0:t.hostname)||""},a.isAbleToRevealSrp=a.isAbleToExportAccount=a.hexToText=void 0,a.isDefaultMetaMaskChain=function(e){if(!e||e===S.CHAIN_IDS.MAINNET||e===S.CHAIN_IDS.LINEA_MAINNET||e===S.CHAIN_IDS.GOERLI||e===S.CHAIN_IDS.SEPOLIA||e===S.CHAIN_IDS.LINEA_GOERLI||e===S.CHAIN_IDS.LINEA_SEPOLIA||e===S.CHAIN_IDS.LOCALHOST)return!0;return!1},a.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const a of t)if(e.startsWith(a))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},a.isIpAddress=void 0,a.isNullish=function(e){return null===e||e===undefined},a.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},a.isValidDomainName=function(e){return null!==n.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},a.numericBalance=C,a.parseBalance=P,a.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return new _.Numeric(new _.Numeric(e,10).toFixed(t),10).toNumber()},a.sanitizeString=a.sanitizeMessage=void 0,a.shortenAddress=function(e=""){return M(e,{truncatedCharLimit:A.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:A.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:A.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1})},a.shortenString=M,a.sortSelectedInternalAccounts=function(e){return e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)))},a.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},a.stripHttpsScheme=D,a.stripHttpsSchemeWithoutPort=function(e){if(F(e).port)return e;return D(e)},a.transformOriginToTitle=a.toHumanReadableTime=a.stripOneLayerofNesting=void 0,a.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var n=k(e("punycode/punycode")),s=k(e("human-standard-token-abi")),r=k(e("bignumber.js")),o=k(e("bn.js")),i=e("luxon"),c=e("@metamask/assets-controllers"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var o=s?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(e("lodash")),u=k(e("bowser")),d=e("@metamask/snaps-rpc-methods"),p=e("@metamask/snaps-utils"),m=e("@metamask/utils"),T=e("@ethersproject/providers"),g=e("@ethersproject/contracts"),f=e("@metamask/keyring-controller"),S=e("../../../shared/constants/network"),E=e("../../../shared/modules/error"),h=e("../../../shared/modules/hexstring-utils"),A=e("../../../shared/constants/labels"),_=e("../../../shared/modules/Numeric"),I=e("../constants/common"),v=e("../../../shared/modules/string-utils"),y=e("../../../shared/modules/conversion.utils"),N=e("../constants/routes"),w=e("../../../app/scripts/lib/multichain/address"),R=e("../../../shared/lib/accounts");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}function k(e){return e&&e.__esModule?e:{default:e}}function C(e){if(!e)return new o.default(0,16);const t=(0,h.stripHexPrefix)(e);return new o.default(t,16)}function P(e){let t;const a=C(e),n=a.toString(),s=n.length>18?n.slice(0,n.length-18):"0";return t=`000000000000000000${a}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[s,t]}function M(e="",{truncatedCharLimit:t,truncatedStartChars:a,truncatedEndChars:n,skipCharacterInEnd:s}={truncatedCharLimit:A.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:A.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:A.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1}){return e.length<t?e:`${e.slice(0,a)}...${s?"":e.slice(-n)}`}function D(e){return e.replace(/^https:\/\//u,"")}function F(e){try{return new URL(e)}catch(e){return""}}a.formatUTCDateFromUnixTimestamp=e=>e?i.DateTime.fromSeconds(e).toUTC().toFormat("dd LLLL yyyy, HH:mm"):e;a.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const a=Math.ceil(t/1e3);return a<=90?e("gasTimingSecondsShort",[a]):a<=5400?e("gasTimingMinutesShort",[Math.ceil(a/60)]):e("gasTimingHoursShort",[Math.ceil(a/3600)])};const b=(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),n=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),s=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),r=Array.from(new Array(80)).map(((e,t)=>n.map((e=>`${e}x${t+1}`)))),o=Array.from(new Array(80)).map(((e,t)=>s.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...a,...r.flat(),...o.flat()]})(),L=e=>e.replace(/\[(\d*)\]/u,"");a.stripOneLayerofNesting=L;const x=(e,t,a)=>{if(!a)throw new Error("Invalid types definition");const n=t&&null!==t.match(/\[[[0-9]*\]*/u);var s;if(n)return{value:e.map((e=>x(e,L(t),a))),type:t};if(s=t,b.includes(s))return{value:e,type:t};const r=n?(e=>e.replace(/\[[[0-9]*\]*/gu,""))(t):t,o=a[r];if(!o)throw new Error("Invalid primary type definition");const i={};return Object.keys(e).forEach((t=>{const n=Object.values(o).find((e=>e.name===t));n&&(i[t]=x(e[t],n.type,a))})),{value:i,type:t}};a.sanitizeMessage=x;a.getSnapName=e=>t=>{var a;return(null===(a=e[t])||void 0===a?void 0:a.name)??(0,p.stripSnapPrefix)(t)};a.getSnapRoute=e=>`${N.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e)}`;a.getDedupedSnaps=(e,t)=>{var a,n;const s=null==e||null===(a=e.permissions)||void 0===a?void 0:a[d.WALLET_SNAP_PERMISSION_KEY],r=null==s?void 0:s.caveats[0].value,o=null==t||null===(n=t[d.WALLET_SNAP_PERMISSION_KEY])||void 0===n?void 0:n.caveats[0].value;if(!(0,m.isObject)(o)&&r)return Object.keys(r);const i=r?Object.keys(r):[],c=o?Object.keys(o):[],l=i.filter((e=>!c.includes(e)));return l.length>0?l:i};a.IS_FLASK=!1;const U=/\u202D/giu,G=/\u202E/giu;a.sanitizeString=e=>e&&l.isString(e)?e.replace(U,"\\u202D").replace(G,"\\u202E"):e;a.isAbleToExportAccount=(e="")=>!e.includes("Hardware")&&!e.includes("Snap");a.isAbleToRevealSrp=(e,t)=>{const{metadata:{keyring:{type:a},snap:n},options:{entropySource:s}}=e;if(a===f.KeyringTypes.hd)return!0;if(a===f.KeyringTypes.snap&&(0,R.isMultichainWalletSnap)(null==n?void 0:n.id)&&s){const e=s;return t.some((t=>t.type===f.KeyringTypes.hd&&t.metadata.id===e))}return!1};a.checkTokenIdExists=(e,t,a)=>{const n=(0,m.isStrictHexString)(t);let s=t;n&&(s=(0,y.hexToDecimal)(t));const r=(0,h.toChecksumHexAddress)(e);if(a[r]){const e=a[r];return l.some(e.nfts,(e=>e.address===r&&((0,v.isEqualCaseInsensitive)(e.tokenId,t)||(0,v.isEqualCaseInsensitive)(e.tokenId,s.toString()))))}return!1};a.fetchTokenExchangeRates=async(e,t,a)=>{try{return await(0,c.fetchTokenContractExchangeRates)({tokenPricesService:new c.CodefiTokenPricesServiceV2,nativeCurrency:e,tokenAddresses:t,chainId:a})}catch(e){return{}}};a.hexToText=e=>{if(!e)return e;try{const a=(0,h.stripHexPrefix)(e),n=t.from(a,"hex");return 32===n.length?e:n.toString("utf8")}catch(t){return e}};a.getAvatarFallbackLetter=e=>{var t;return(null==e||null===(t=e.match(/[a-z0-9]/iu))||void 0===t?void 0:t[0])??"?"};const H=e=>"string"==typeof e&&Boolean(e.match(/^(\d{1,3}\.){3}\d{1,3}$|^\[[0-9a-f:]+\]$/iu));a.isIpAddress=H;a.transformOriginToTitle=e=>{try{const t=new URL(e);if(H(t.hostname))return t.hostname;return t.hostname.split(".").slice(-2).join(".")}catch(e){return"Unknown Origin"}};a.getFilteredSnapPermissions=(e,t=Infinity,a=3)=>{const n=e.filter((e=>e.weight<=t));if(a&&n.length<a){const s=e.filter((e=>e.weight>t));return n.concat(s.slice(0,a-n.length))}return n};a.getCalculatedTokenAmount1dAgo=(e,t)=>t!==undefined&&e?e/(1+t/100):e??0}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/util.js"}],[7109,{"../contexts/i18n":6943,react:5262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.useI18nContext=function(){return(0,n.useContext)(s.I18nContext)};var n=e("react"),s=e("../contexts/i18n")}}},{package:"$root$",file:"ui/hooks/useI18nContext.js"}],[7140,{"../../shared/modules/selectors/networks":5921,"../../shared/modules/string-utils":5924,"../ducks/metamask/metamask":6971,"../helpers/utils/token-util":7033,"../selectors":7812,react:5262,"react-redux":5208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.useTokenFiatAmount=function(e,t,a,u={},d,p=null,m=!0){var T,g;const f=(0,s.useSelector)(r.getMarketData),S=(0,s.useSelector)(r.getTokenExchangeRates,s.shallowEqual),E=p&&f[p]?Object.entries(f[p]).reduce(((e,[t,a])=>(e[t]=(null==a?void 0:a.price)??null,e)),{}):null,h=p?E:S,A=(0,s.useSelector)(r.getConfirmationExchangeRates),_={...h,...A},I=(0,s.useSelector)(r.getCurrencyRates),v=(0,s.useSelector)(c.getConversionRate),y=(0,s.useSelector)(o.getNetworkConfigurationsByChainId),N=p?null==I||null===(T=I[null===(g=y[p])||void 0===g?void 0:g.nativeCurrency])||void 0===T?void 0:T.conversionRate:v,w=(0,s.useSelector)(c.getCurrentCurrency),R=(0,s.useSelector)(r.getShouldShowFiat),O=u.showFiat??R,k=Object.keys(_).find((t=>(0,l.isEqualCaseInsensitive)(t,e))),C=u.exchangeRate??(k&&_[k]),P=(0,n.useMemo)((()=>(0,i.getTokenFiatAmount)(C,N,w,t,a,m,d)),[N,C,w,t,a,d]);if(!O||w.toUpperCase()===a)return undefined;return P};var n=e("react"),s=e("react-redux"),r=e("../selectors"),o=e("../../shared/modules/selectors/networks"),i=e("../helpers/utils/token-util"),c=e("../ducks/metamask/metamask"),l=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useTokenFiatAmount.js"}],[7408,{"../../../components/component-library":6474,"../../../helpers/constants/design-system":6984,"./util":7433,"@metamask/controller-utils":1559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ResultTemplate=void 0;var n=e("@metamask/controller-utils"),s=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),o=e("./util");function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,a){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:a;throw new TypeError("Private element is not present on this object")}var l=new WeakMap,u=new WeakSet;function d(e,t){const{error:a,header:i,icon:u,message:d,title:p}=e,m=(g=this,(T=l).get(c(T,g))===n.ApprovalType.ResultSuccess);var T,g;return[...(0,o.processHeader)(i)??[],{key:"container",element:"Box",props:{flexDirection:r.FlexDirection.Column,alignItems:r.AlignItems.center,height:r.BlockSize.Full,padding:4},children:[{key:"content",element:"Box",props:{flexDirection:r.FlexDirection.Column,alignItems:r.AlignItems.center,justifyContent:r.JustifyContent.center,height:r.BlockSize.Full,style:{alignSelf:r.AlignItems.stretch}},children:[null===u?undefined:{key:"icon",element:"AvatarIcon",props:{iconName:u??(m?s.IconName.Confirmation:s.IconName.Warning),size:s.IconSize.Xl,iconProps:{size:s.IconSize.Xl},color:m?r.IconColor.successDefault:r.IconColor.errorDefault,backgroundColor:m?r.BackgroundColor.successMuted:r.BackgroundColor.errorMuted},children:"Icon"},null===p?undefined:{key:"title",element:"Typography",props:{variant:r.TypographyVariant.H3,fontWeight:r.FontWeight.Bold},children:p??t(m?"resultPageSuccess":"resultPageError")},{key:"message",element:"Box",props:{alignItems:r.AlignItems.center,textAlign:r.TextAlign.Center,flexDirection:r.FlexDirection.Column,width:r.BlockSize.Full},children:m?(0,o.processString)(d,t("resultPageSuccessDefaultMessage")):(0,o.processError)(a,t("resultPageErrorDefaultMessage"))}]}]}]}a.ResultTemplate=class{constructor(e){var t,a;i(t=this,a=u),a.add(t),function(e,t,a){i(e,t),t.set(e,a)}(this,l,void 0),function(e,t,a){e.set(c(e,t),a)}(l,this,e)}getValues(e,t,a){return{content:c(u,this,d).call(this,e.requestData||{},t),submitText:t("ok"),onSubmit:()=>a.resolvePendingApproval(e.id,e.requestData),networkDisplay:!1}}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/ResultTemplate.ts"}],[7419,{"../../../../../shared/constants/network":5813,"../../../../../shared/modules/rpc.utils":5917,"../../../../helpers/constants/design-system":6984,"../../../../helpers/constants/routes":6989,"../../../../helpers/constants/zendesk-url":6996,"../../utils/confirm":7511,"@metamask/network-controller":2321,"@metamask/rpc-errors":2524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,s=e("@metamask/rpc-errors"),r=e("@metamask/network-controller"),o=e("../../../../../shared/constants/network"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../helpers/constants/routes"),l=(n=e("../../../../helpers/constants/zendesk-url"))&&n.__esModule?n:{default:n},u=e("../../../../../shared/modules/rpc.utils"),d=e("../../utils/confirm");const p={id:"UNRECOGNIZED_CHAIN",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},m={id:"SAFE_CHAIN_LIST_PROVIDER_ERROR",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorGettingSafeChainList"}}}},T={id:"MISMATCHED_CHAIN_RECOMMENDATION",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:l.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},g={id:"DEPRECATED_CHAIN_ALERT",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"deprecatedNetwork"}}}},f={id:"MISMATCHED_NETWORK_NAME",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},S={id:"MISMATCHED_NETWORK_SYMBOL",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},E={id:"MISMATCHED_NETWORK_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}},h={id:"MISMATCHED_NETWORK_RPC_CHAIN_ID",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcChainId"}}}},A={id:"ERROR_CONNECTING_TO_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorWhileConnectingToRPC"}}}};const _={getAlerts:async function(e,t){const a=[];if("metamask"===e.origin&&Boolean(t.matchedChain))return[];if(t.matchedChain){var n,s,r,i;(null===(n=t.matchedChain.name)||void 0===n?void 0:n.toLowerCase())!==e.requestData.chainName.toLowerCase()&&a.push(f),(null===(s=t.matchedChain.nativeCurrency)||void 0===s||null===(s=s.symbol)||void 0===s?void 0:s.toLowerCase())!==(null===(r=e.requestData.ticker)||void 0===r?void 0:r.toLowerCase())&&a.push(S);const{origin:c}=new URL(e.requestData.rpcUrl);null!==(i=t.matchedChain.rpc)&&void 0!==i&&i.map((e=>new URL(e).origin)).includes(c)||a.push(E),o.DEPRECATED_NETWORKS.includes(e.requestData.chainId)&&a.push(g)}return!t.matchedChain&&t.useSafeChainsListValidation&&(t.providerError?a.push(m):a.push(p)),a.length&&a.push(T),a},getValues:function(e,t,a,n,p){var m;const T="metamask"===e.origin,g=e.requestData.rpcUrl;let f,S;return f=T?t("wantToAddThisNetwork"):p.existingNetworkConfiguration?t("updateNetworkConfirmationTitle",[p.existingNetworkConfiguration.name]):t("addNetworkConfirmationTitle",[e.requestData.chainName]),S=p.existingNetworkConfiguration?t("updateEthereumChainConfirmationDescription"):t("multichainAddEthereumChainConfirmationDescription"),{content:[{element:"Typography",key:"title",children:f,props:{variant:i.TypographyVariant.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:S,props:{variant:i.TypographyVariant.H6,align:"center",boxProps:{margin:T?[0,8,4]:[0,0,4]}}},{element:"OriginPill",key:"origin-pill",props:{origin:e.origin,dataTestId:"signature-origin-pill"}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("currencySymbol")]:t("currencySymbolDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("networkName")]:t("networkNameDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},warnings:{[t("networkURL")]:!g||(0,d.isValidASCIIURL)(g)?undefined:t("networkUrlErrorWarning",[(0,d.toPunycodeURL)(g)]),[t("currencySymbol")]:p.currencySymbolWarning},dictionary:{[t("currencySymbol")]:e.requestData.ticker,[t("networkURL")]:null!==(m=g.toLowerCase())&&void 0!==m&&m.includes(`/v3/${o.infuraProjectId}`)?g.replace(`/v3/${o.infuraProjectId}`,"").toLowerCase():g.toLowerCase(),[t("chainId")]:parseInt(e.requestData.chainId,16),[t("networkName")]:e.requestData.chainName,[t("blockExplorerUrl")]:e.requestData.rpcPrefs.blockExplorerUrl},prefaceKeys:[t("currencySymbol"),t("networkURL")]}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"watchOutMessage",variables:[{element:"a",children:t("securityMessageLinkForNetworks"),key:"securityMessageLinkForNetworks",props:{href:l.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:i.TypographyVariant.H6,boxProps:{margin:T?[0,8]:0,display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center}}}],cancelText:t("cancel"),submitText:t("approveButtonText"),loadingText:t("addingCustomNetwork"),onSubmit:async()=>{let t;try{t=await(0,u.jsonRpcRequest)(g,"eth_chainId")}catch(e){return console.error(`Request for method 'eth_chainId on ${g} failed`),[A]}if(e.requestData.chainId!==t)return console.error(`Chain ID returned by RPC URL ${g} does not match ${t}`),[h];if(await a.resolvePendingApproval(e.id,e.requestData),T){const t=e.requestData.rpcPrefs.blockExplorerUrl,s=await a.addNetwork({chainId:e.requestData.chainId,name:e.requestData.chainName,nativeCurrency:e.requestData.ticker,blockExplorerUrls:t?[t]:[],defaultBlockExplorerUrlIndex:t?0:undefined,defaultRpcEndpointIndex:0,rpcEndpoints:[{url:e.requestData.rpcUrl,failoverUrls:e.requestData.failoverRpcUrls,type:r.RpcEndpointType.Custom}]});await a.setNewNetworkAdded({networkConfigurationId:s.rpcEndpoints[0].networkClientId,nickname:e.requestData.chainName});document.location.hash.replace("#","/")===c.ONBOARDING_PRIVACY_SETTINGS_ROUTE||n.push(c.DEFAULT_ROUTE)}return[]},onCancel:()=>a.rejectPendingApproval(e.id,s.providerErrors.userRejectedRequest().serialize()),networkDisplay:!T}},getState:function(e){return 1===parseInt(e.requestData.chainId,16)?{useWarningModal:!0}:{}}};a.default=_}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/add-ethereum-chain.js"}],[7420,{"../../../../../shared/constants/metametrics":5810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("../../../../../shared/constants/metametrics");const s={getValues:function(e,t,a,s,r,o){const{origin:i,snapName:c,requestData:l}=e,{snapSuggestedAccountName:u}=l,{trackEvent:d}=o,p=e=>{d({event:e,category:n.MetaMetricsEventCategory.Accounts,properties:{account_type:n.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})};return{content:[{element:"CreateNamedSnapAccount",key:"create-named-snap-account",props:{onActionComplete:async t=>{t.success?(p(n.MetaMetricsEventName.AddSnapAccountConfirmed),a.resolvePendingApproval(e.id,t)):(p(n.MetaMetricsEventName.AddSnapAccountCanceled),a.resolvePendingApproval(e.id,!1))},snapSuggestedAccountName:u}}],loadingText:t("addingAccount"),hideSubmitButton:!0,onLoad:()=>p(n.MetaMetricsEventName.AddSnapAccountViewed)}}};a.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-named-snap-account.js"}],[7421,{"../../../../../shared/constants/metametrics":5810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("../../../../../shared/constants/metametrics");const s={getValues:function(e,t,a,s,r,o){const{origin:i,snapName:c}=e,{trackEvent:l}=o,u=e=>{l({event:e,category:n.MetaMetricsEventCategory.Accounts,properties:{account_type:n.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},d=()=>{u(n.MetaMetricsEventName.AddSnapAccountCanceled),a.resolvePendingApproval(e.id,!1)};return{content:[{element:"CreateSnapAccount",key:"create-snap-account",props:{snapId:i,snapName:c,onCancel:d}}],cancelText:t("cancel"),submitText:t("create"),onLoad:()=>u(n.MetaMetricsEventName.AddSnapAccountViewed),onSubmit:()=>{u(n.MetaMetricsEventName.AddSnapAccountConfirmed),a.resolvePendingApproval(e.id,!0)},onCancel:d}}};a.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-snap-account.js"}],[7422,{"../ResultTemplate":7408,"@metamask/controller-utils":1559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("@metamask/controller-utils");const s=new(e("../ResultTemplate").ResultTemplate)(n.ApprovalType.ResultError),r={getValues:s.getValues.bind(s)};a.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/error.js"}],[7423,{"../../../../../shared/constants/app":5798,"../../../../store/actions":7835,"./add-ethereum-chain":7419,"./create-named-snap-account":7420,"./create-snap-account":7421,"./error":7422,"./remove-snap-account":7424,"./smart-transaction-status-page":7425,"./snap-account-redirect":7426,"./snaps/snap-alert/snap-alert":7427,"./snaps/snap-confirmation/snap-confirmation":7428,"./snaps/snap-default/snap-default":7429,"./snaps/snap-prompt/snap-prompt":7430,"./success":7431,"./switch-ethereum-chain":7432,"@metamask/controller-utils":1559,lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=void 0,a.getTemplateAlerts=async function(e,t){var a;const n=null===(a=_[e.type])||void 0===a?void 0:a.getAlerts,s=n?await n(e,t):[];if(!Array.isArray(s))throw new Error(`Template alerts must be an array, received: ${s}`);if(s.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${s}`);return s},a.getTemplateState=async function(e){var t;const a=(null===(t=_[e.type])||void 0===t?void 0:t.getState)??v,n=await a(e);if("object"!=typeof n||Array.isArray(n))throw new Error(`Template state must be an object, received: ${n}`);if(null===n||n===undefined)return{};return n},a.getTemplateValues=function(e,t,a,s,o,i){var c;const l=null===(c=_[e.type])||void 0===c?void 0:c.getValues;if(!l)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const u=function(e){return{rejectPendingApproval:(...t)=>e((0,r.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,r.resolvePendingApproval)(...t)),addNetwork:(...t)=>e((0,r.addNetwork)(...t)),setNewNetworkAdded:(...t)=>e((0,r.setNewNetworkAdded)(...t)),deleteInterface:(...t)=>e((0,r.deleteInterface)(...t))}}(a),d=l(e,t,u,s,o,i),p=(0,n.omit)(d,I),m=(0,n.pick)(d,I);if(p.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(p)}`);return m};var n=e("lodash"),s=e("@metamask/controller-utils"),r=e("../../../../store/actions"),o=e("../../../../../shared/constants/app"),i=A(e("./smart-transaction-status-page")),c=A(e("./create-snap-account")),l=A(e("./remove-snap-account")),u=A(e("./snap-account-redirect")),d=A(e("./create-named-snap-account")),p=A(e("./add-ethereum-chain")),m=A(e("./switch-ethereum-chain")),T=A(e("./success")),g=A(e("./error")),f=A(e("./snaps/snap-alert/snap-alert")),S=A(e("./snaps/snap-confirmation/snap-confirmation")),E=A(e("./snaps/snap-prompt/snap-prompt")),h=A(e("./snaps/snap-default/snap-default"));function A(e){return e&&e.__esModule?e:{default:e}}const _={[s.ApprovalType.AddEthereumChain]:p.default,[s.ApprovalType.SwitchEthereumChain]:m.default,[s.ApprovalType.ResultSuccess]:T.default,[s.ApprovalType.ResultError]:g.default,[o.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage]:i.default,[s.ApprovalType.SnapDialogAlert]:f.default,[s.ApprovalType.SnapDialogConfirmation]:S.default,[s.ApprovalType.SnapDialogPrompt]:E.default,[s.ApprovalType.SnapDialogDefault]:h.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation]:c.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval]:l.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount]:d.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect]:u.default},I=(a.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=Object.keys(_),["cancelText","content","onLoad","onCancel","onSubmit","networkDisplay","submitText","loadingText","hideSubmitButton"]);async function v(){return{}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/index.js"}],[7424,{"../../../../../shared/constants/metametrics":5810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("../../../../../shared/constants/metametrics");const s={getValues:function(e,t,a,s,r,o){const{origin:i,snapName:c}=e,{publicAddress:l}=e.requestData,{trackEvent:u}=o,d=e=>{u({event:e,category:n.MetaMetricsEventCategory.Accounts,properties:{account_type:n.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},p=()=>{d(n.MetaMetricsEventName.RemoveSnapAccountCanceled),a.resolvePendingApproval(e.id,!1)};return{content:[{element:"RemoveSnapAccount",key:"remove-snap-account",props:{snapId:i,snapName:c,publicAddress:l,onCancel:p}}],cancelText:t("cancel"),submitText:t("remove"),onLoad:()=>d(n.MetaMetricsEventName.RemoveSnapAccountViewed),onSubmit:()=>{d(n.MetaMetricsEventName.RemoveSnapAccountConfirmed),a.resolvePendingApproval(e.id,!0)},onCancel:p}}};a.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/remove-snap-account.js"}],[7425,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const n={getValues:function(e,t,a,n){const{id:s,requestState:r}=e;return{content:[{element:"SmartTransactionStatusPage",key:"smart-transaction-status-page",props:{requestState:r,onCloseExtension:()=>{a.resolvePendingApproval(s,!0)},onViewActivity:()=>{a.resolvePendingApproval(s,!0)}}}],hideSubmitButton:!0}}};a.default=n}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/smart-transaction-status-page.js"}],[7426,{"../../../../../shared/constants/metametrics":5810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("../../../../../shared/constants/metametrics");const s={getValues:function(e,t,a,s,r,o){const{origin:i,snapName:c}=e,{url:l,message:u,isBlockedUrl:d}=e.requestData,{trackEvent:p}=o,m=e=>{p({event:e,category:n.MetaMetricsEventCategory.Transactions,properties:{account_type:n.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},T=n=>l!==undefined&&null!==l&&l.length>0&&!1===d?{submitText:t("goToSite"),onSubmit:()=>{m(n),a.resolvePendingApproval(e.id,!0)}}:{};return{content:[{element:"SnapAccountRedirect",key:"snap-account-redirect",props:{url:l,message:u,snapId:i,snapName:c,isBlockedUrl:d,...T(n.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectSnapUrlClicked)}}],cancelText:t("close"),onLoad:()=>m(n.MetaMetricsEventName.SnapAccountTransactionFinalizeViewed),onCancel:()=>{m(n.MetaMetricsEventName.SnapAccountTransactionFinalizeClosed),a.resolvePendingApproval(e.id,!1)},...T(n.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectGoToSiteClicked)}}};a.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snap-account-redirect.js"}],[7427,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const n={getValues:function(e,t,a){const{requestData:{id:n}}=e;return{submitText:t("ok").toUpperCase(),onSubmit:()=>{a.resolvePendingApproval(e.id,null),a.deleteInterface(n)}}}};a.default=n}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-alert/snap-alert.js"}],[7428,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const n={getValues:function(e,t,a){const{requestData:{id:n}}=e;return{cancelText:t("reject"),submitText:t("approveButtonText"),onSubmit:()=>{a.resolvePendingApproval(e.id,!0),a.deleteInterface(n)},onCancel:()=>{a.resolvePendingApproval(e.id,!1),a.deleteInterface(n)}}}};a.default=n}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-confirmation/snap-confirmation.js"}],[7429,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const n={getValues:function(e,t,a){const{requestData:{id:n}}=e;return{onCancel:()=>{a.resolvePendingApproval(e.id,null),a.deleteInterface(n)}}}};a.default=n}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-default/snap-default.js"}],[7430,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;const n={getValues:function(e,t,a){const{requestData:{id:n}}=e;return{cancelText:t("cancel"),submitText:t("submit"),onSubmit:t=>{a.resolvePendingApproval(e.id,t),a.deleteInterface(n)},onCancel:()=>{a.resolvePendingApproval(e.id,null),a.deleteInterface(n)}}}};a.default=n}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-prompt/snap-prompt.js"}],[7431,{"../ResultTemplate":7408,"@metamask/controller-utils":1559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("@metamask/controller-utils");const s=new(e("../ResultTemplate").ResultTemplate)(n.ApprovalType.ResultSuccess),r={getValues:s.getValues.bind(s)};a.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/success.js"}],[7432,{"../../../../helpers/constants/design-system":6984,"@metamask/rpc-errors":2524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("@metamask/rpc-errors"),s=e("../../../../helpers/constants/design-system");const r={id:"PENDING_TX_DROP_NOTICE",severity:s.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};const o={getAlerts:async function(e,t){const a=[];return t.unapprovedTxsCount>0&&a.push(r),a},getValues:function(e,t,a){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:s.TypographyVariant.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:s.TypographyVariant.H7,color:s.TextColor.textAlternative,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"OriginPill",key:"origin-pill",props:{origin:e.origin,dataTestId:"signature-origin-pill"}},{element:"Box",key:"status-box",props:{justifyContent:s.JustifyContent.center},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{toNetwork:e.requestData.toNetworkConfiguration,fromNetwork:e.requestData.fromNetworkConfiguration}}}],cancelText:t("cancel"),submitText:t("switchNetwork"),onSubmit:()=>a.resolvePendingApproval(e.id,e.requestData.toNetworkConfiguration),onCancel:()=>a.rejectPendingApproval(e.id,n.providerErrors.userRejectedRequest().serialize()),networkDisplay:!0}}};a.default=o}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/switch-ethereum-chain.js"}],[7433,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){function n(e){return e===undefined?undefined:"string"==typeof e?e:Array.isArray(e)?e.map(n):{key:e.key,element:e.name,props:e.properties,children:n(e.children)}}Object.defineProperty(a,"__esModule",{value:!0}),a.processError=function(e,t){const a=n(e)||t;if("string"!=typeof a)return a;return{key:"error",element:"ActionableMessage",props:{type:"danger",message:a}}},a.processHeader=function(e){return n(e)},a.processString=function(e,t){const a=n(e)||t;if("string"!=typeof a)return a;return s=a,function(e,t,a){let n=0,s=0;const r=Array.from(e.matchAll(t)),o=[];for(const t of r){const r=e.substring(n,t.index);r.length&&o.push(r);const i=a(t[1],s);o.push(i),n=t.index+t[0].length,s+=1}const i=e.substring(n);return i.length&&o.push(i),o}(s,/\*\*(.+?)\*\*/gu,((e,t)=>({key:`bold-${t}`,element:"b",children:e})));var s}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/util.ts"}],[7434,{"../../../../shared/constants/network":5813},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.TypedSignSignaturePrimaryTypes=a.TYPED_SIGNATURE_VERSIONS=a.SPENDING_CAP_UNLIMITED_MSG=a.IGNORE_GAS_LIMIT_CHAIN_IDS=void 0;var n=e("../../../../shared/constants/network");a.IGNORE_GAS_LIMIT_CHAIN_IDS=[n.CHAINLIST_CHAIN_IDS_MAP.MANTLE],a.TYPED_SIGNATURE_VERSIONS={V1:"V1",V3:"V3",V4:"V4"},a.SPENDING_CAP_UNLIMITED_MSG="UNLIMITED MESSAGE",a.TypedSignSignaturePrimaryTypes={PERMIT:"Permit",ORDER:"Order"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/index.ts"}],[7503,{"../../../../shared/modules/selectors/util":5923,"../../../selectors/approvals":7804,"@metamask/controller-utils":1559,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.oldestPendingConfirmationSelector=void 0,a.pendingConfirmationsSelector=function(e){return(0,r.getPendingApprovals)(e).filter((({type:e})=>i.includes(e)))},a.pendingConfirmationsSortedSelector=c,a.selectEnableEnforcedSimulations=function(e,t){return e.metamask.enableEnforcedSimulationsForTransactions[t]??e.metamask.enableEnforcedSimulations};var n=e("@metamask/controller-utils"),s=e("reselect"),r=e("../../../selectors/approvals"),o=e("../../../../shared/modules/selectors/util");const i=[n.ApprovalType.PersonalSign,n.ApprovalType.EthSignTypedData,n.ApprovalType.Transaction];function c(e){return(0,r.getPendingApprovals)(e).filter((({type:e})=>i.includes(e))).sort(((e,t)=>e.time-t.time))}const l=(0,s.createSelector)(c,(e=>e[0]));a.oldestPendingConfirmationSelector=(0,o.createDeepEqualSelector)(l,(e=>e))}}},{package:"$root$",file:"ui/pages/confirmations/selectors/confirm.ts"}],[7505,{"../../../selectors":7812},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getDismissSmartAccountSuggestionEnabled=function(e){return Boolean((0,n.getPreferences)(e).dismissSmartAccountSuggestionEnabled)},a.getUseSmartAccount=function(e){return Boolean((0,n.getPreferences)(e).smartAccountOptIn)},a.selectConfirmationAdvancedDetailsOpen=function(e){return Boolean((0,n.getPreferences)(e).showConfirmationAdvancedDetails)},a.selectUseTransactionSimulations=void 0;var n=e("../../../selectors");a.selectUseTransactionSimulations=e=>e.metamask.useTransactionSimulations}}},{package:"$root$",file:"ui/pages/confirmations/selectors/preferences.ts"}],[7509,{"../../../../shared/constants/common":5800,"../../../../shared/constants/gas":5805,"../../../../shared/modules/Numeric":5899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.TOKEN_TRANSFER_FUNCTION_SIGNATURE=a.SWAPS_QUOTES_ERROR=a.SWAPS_NO_QUOTES=a.REQUIRED_ERROR=a.RECIPIENT_TYPES=a.NO_RESOLUTION_FOR_DOMAIN=a.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE=a.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE=a.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR=a.NEGATIVE_ETH_ERROR=a.MIN_GAS_TOTAL=a.MIN_GAS_PRICE_HEX=a.MIN_GAS_PRICE_GWEI=a.MIN_GAS_PRICE_DEC=a.MIN_GAS_LIMIT_DEC=a.MAX_GAS_LIMIT_DEC=a.KNOWN_RECIPIENT_ADDRESS_WARNING=a.INVALID_RECIPIENT_ADDRESS_ERROR=a.INVALID_HEX_DATA_ERROR=a.INSUFFICIENT_TOKENS_ERROR=a.INSUFFICIENT_FUNDS_FOR_GAS_ERROR=a.INSUFFICIENT_FUNDS_ERROR=a.HIGH_FEE_WARNING_MULTIPLIER=a.FLOAT_TOKENS_ERROR=a.ENS_UNKNOWN_ERROR=a.CONTRACT_ADDRESS_ERROR=a.CONFUSING_ENS_ERROR=void 0;var n=e("../../../../shared/constants/gas"),s=e("../../../../shared/modules/Numeric"),r=e("../../../../shared/constants/common");const o=a.MIN_GAS_PRICE_DEC="0",i=a.MIN_GAS_PRICE_HEX=parseInt(o,10).toString(16);a.MIN_GAS_LIMIT_DEC=new s.Numeric("21000",10),a.MAX_GAS_LIMIT_DEC="30000000",a.HIGH_FEE_WARNING_MULTIPLIER=1.5,a.MIN_GAS_PRICE_GWEI=new s.Numeric(i,16,r.EtherDenomination.WEI).toDenomination(r.EtherDenomination.GWEI).round(1).toPrefixedHexString(),a.MIN_GAS_TOTAL=new s.Numeric(n.MIN_GAS_LIMIT_HEX,16).times(new s.Numeric(i,16,r.EtherDenomination.WEI)).toPrefixedHexString(),a.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb",a.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd",a.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE="0xf242432a",a.INSUFFICIENT_FUNDS_ERROR="insufficientFunds",a.INSUFFICIENT_FUNDS_FOR_GAS_ERROR="insufficientFundsForGas",a.INSUFFICIENT_TOKENS_ERROR="insufficientTokens",a.NEGATIVE_ETH_ERROR="negativeETH",a.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR="negativeOrZeroAmountToken",a.FLOAT_TOKENS_ERROR="floatAmountToken",a.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient",a.REQUIRED_ERROR="required",a.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient",a.CONTRACT_ADDRESS_ERROR="contractAddressError",a.CONFUSING_ENS_ERROR="confusingEnsDomain",a.ENS_UNKNOWN_ERROR="ensUnknownError",a.NO_RESOLUTION_FOR_DOMAIN="noDomainResolution",a.SWAPS_NO_QUOTES="swapQuotesNotAvailableErrorTitle",a.SWAPS_QUOTES_ERROR="swapFetchingQuotesErrorTitle",a.INVALID_HEX_DATA_ERROR="invalidHexDataError",a.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.constants.js"}],[7510,{"../../../../app/scripts/lib/util":226,"../../../../shared/constants/transaction":5829,"../../../../shared/modules/Numeric":5899,"./send.constants":7509,"@metamask/abi-utils":1324,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.addGasBuffer=function(e,t,a=1.5){const n=new i.Numeric(e,16),s=new i.Numeric(t,16).times(new i.Numeric(.9,10)).round(0),r=n.times(new i.Numeric(a,10)).round(0);if(n.greaterThanOrEqualTo(s))return e;if(r.lessThan(s))return r.toString();return s.toString()},a.ellipsify=function(e,t=6,a=4){if(!e)return"";return`${e.slice(0,t)}...${e.slice(-a)}`},a.generateERC1155TransferData=d,a.generateERC20TransferData=l,a.generateERC721TransferData=u,a.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:a,amount:n}){switch(e.standard){case o.TokenStandard.ERC721:return u({toAddress:a,fromAddress:t,tokenId:e.tokenId});case o.TokenStandard.ERC1155:return d({toAddress:a,fromAddress:t,tokenId:e.tokenId});case o.TokenStandard.ERC20:default:return l({toAddress:a,amount:n,sendToken:e})}},a.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:a=1,gasTotal:n="0x0",primaryCurrency:r=undefined}){let o=new i.Numeric(e,16).add(new i.Numeric(n,16)),c=new i.Numeric(t,(0,s.isHexString)(t)?16:10);null!=r&&(o=o.applyConversionRate(a),c=c.applyConversionRate(a));return c.greaterThanOrEqualTo(o)},a.isERC1155BalanceSufficient=function({amount:e="0",tokenBalance:t}){const a=new i.Numeric(e,16);return new i.Numeric(t,10).greaterThanOrEqualTo(a)},a.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:a}){const n=new i.Numeric(e,16).shiftedBy(a);return new i.Numeric(t,16).greaterThanOrEqualTo(n)};var n=e("@metamask/abi-utils"),s=e("@metamask/utils"),r=e("../../../../app/scripts/lib/util"),o=e("../../../../shared/constants/transaction"),i=e("../../../../shared/modules/Numeric"),c=e("./send.constants");function l({toAddress:e="0x0",amount:t="0x0",sendToken:a}){return a?c.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call((0,n.encode)(["address","uint256"],[(0,r.addHexPrefix)(e),(0,r.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function u({toAddress:e="0x0",fromAddress:t="0x0",tokenId:a}){return a?c.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,n.encode)(["address","address","uint256"],[(0,r.addHexPrefix)(t),(0,r.addHexPrefix)(e),BigInt(a)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function d({toAddress:e="0x0",fromAddress:t="0x0",tokenId:a,amount:s="1",data:o="0"}){return a?c.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,n.encode)(["address","address","uint256","uint256","bytes"],[(0,r.addHexPrefix)(t),(0,r.addHexPrefix)(e),BigInt(a),(0,r.addHexPrefix)(s),(0,r.addHexPrefix)(o)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.utils.js"}],[7511,{"../../../../shared/constants/signatures":5821,"../../../../shared/modules/transaction.utils":5926,"../../../helpers/utils/util":7037,"../constants":7434,"@metamask/transaction-controller":2925},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.toPunycodeURL=a.parseSanitizeTypedDataMessage=a.isValidASCIIURL=a.isSignatureTransactionType=a.isSIWESignatureRequest=a.isPermitSignatureRequest=a.isOrderSignatureRequest=a.SIGNATURE_TRANSACTION_TYPES=void 0;var n=e("@metamask/transaction-controller"),s=e("../../../../shared/constants/signatures"),r=e("../../../../shared/modules/transaction.utils"),o=e("../../../helpers/utils/util"),i=e("../constants");const c=a.SIGNATURE_TRANSACTION_TYPES=[n.TransactionType.personalSign,n.TransactionType.signTypedData],l=e=>e&&c.includes(e.type);a.isSignatureTransactionType=l;a.parseSanitizeTypedDataMessage=e=>{const{message:t,primaryType:a,types:n}=(0,r.parseTypedDataMessage)(e);return{sanitizedMessage:(0,o.sanitizeMessage)(t,a,n),primaryType:a}};a.isSIWESignatureRequest=e=>{var t;return Boolean(null==e||null===(t=e.msgParams)||void 0===t||null===(t=t.siwe)||void 0===t?void 0:t.isSIWEMessage)};a.isOrderSignatureRequest=e=>{var t,a;if(!e||!l(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:n}=(0,r.parseTypedDataMessage)(null===(a=e.msgParams)||void 0===a?void 0:a.data);return s.PRIMARY_TYPES_ORDER.includes(n)};a.isPermitSignatureRequest=e=>{var t,a;if(!e||!l(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:n}=(0,r.parseTypedDataMessage)(null===(a=e.msgParams)||void 0===a?void 0:a.data);return s.PRIMARY_TYPES_PERMIT.includes(n)};a.isValidASCIIURL=e=>{try{return!(!e||0===e.length)&&e.includes(new URL(e).host)}catch(t){return console.error(`Failed to detect if URL hostname contains non-ASCII characters: ${e}. Error: ${t}`),!1}};a.toPunycodeURL=e=>{try{const t=new URL(e);return"/"===t.pathname&&!e.endsWith("/")?t.href.slice(0,-1):t.href}catch(e){return console.error(`Failed to convert URL to Punycode: ${e}`),undefined}}}}},{package:"$root$",file:"ui/pages/confirmations/utils/confirm.ts"}],[7790,{"../../store/background-connection":7836},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.estimateGasFee=function(e){return(0,n.submitRequestToBackground)("estimateGasFee",[e])};var n=e("../../store/background-connection")}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.gas.ts"}],[7791,{"../../../shared/constants/common":5800,"../../../shared/constants/network":5813,"../../../shared/constants/swaps":5825,"../../../shared/lib/fetch-with-cache":5874,"../../../shared/lib/swaps-utils":5889,"../../../shared/lib/transactions-controller-utils":5894,"../../../shared/modules/conversion.utils":5904,"../../../shared/modules/hexstring-utils":5910,"../../../shared/modules/swaps.utils":5925,"../../helpers/utils/confirm-tx.util":7010,"./swaps.util.gas":7790,"bignumber.js":3997},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.countDecimals=a.TOKEN_VALIDATORS=a.StxErrorTypes=void 0,a.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),a=await(0,l.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchAggregatorMetadata"}),n={};for(const e in a)(0,p.validateData)(_,a[e],t)&&(n[e]=a[e]);return n},a.fetchBlockedTokens=async function(e){const t=(0,p.getBaseApi)("blockedTokens",e);return await(0,l.default)({url:`${t}`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchBlockedTokens"})},a.fetchSwapsFeatureFlags=async function(){const e=r.SWAPS_API_V2_BASE_URL;return await(0,l.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},a.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),a=await(0,l.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(v,a,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:n,ProposeGasPrice:s,FastGasPrice:r}=a;return{safeLow:n,average:s,fast:r}},a.fetchToken=async function(e,t){const a=(0,p.getBaseApi)("token",t);return await(0,l.default)({url:`${a}?address=${e}`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchToken"})},a.fetchTokenPrice=async function(e){var t;const a=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,n=await(0,l.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${a}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==n||null===(t=n[e])||void 0===t?void 0:t.eth},a.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),a=await(0,l.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchTokens"});return[r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...a.filter((a=>(0,p.validateData)(h,a,t,false)&&!((0,o.isSwapsDefaultTokenSymbol)(a.symbol,e)||(0,o.isSwapsDefaultTokenAddress)(a.address,e))))]},a.fetchTopAssets=async function(e){const t=await y(e);return t.reduce(((e,t,a)=>({...e,[t.address]:{index:String(a)}})),{})},a.fetchTopAssetsList=y,a.formatSwapsValueForDisplay=R,a.getNetworkNameByChainId=a.getFeeForSmartTransaction=a.getClassNameForCharLength=void 0,a.getRenderableNetworkFeesForQuote=w,a.getSwapsLivenessForNetwork=a.getSwap1559GasFeeEstimates=void 0,a.getTransaction1559GasFeeEstimates=C,a.parseSmartTransactionsError=a.isContractAddressValid=a.getTranslatedStxErrorMessage=void 0,a.quotesToRenderableData=function({quotes:e,gasPriceTrade:t,gasPriceApprove:a,conversionRate:n,currentCurrency:r,approveGas:i,tokenConversionRates:c,chainId:l,smartTransactionEstimatedGas:u,nativeCurrencySymbol:p,multiLayerL1ApprovalFeeTotal:T}){return Object.values(e).map((e=>{const{destinationAmount:g=0,sourceAmount:f=0,sourceTokenInfo:S,destinationTokenInfo:E,slippage:h,aggType:A,aggregator:_,gasEstimateWithRefund:I,averageGas:v,fee:y,trade:O,multiLayerL1TradeFeeTotal:k}=e;let C=null;null!==k&&null!==T?C=(0,m.sumHexes)(k||"0x0",T||"0x0"):null!==k&&(C=k);const P=(0,d.calcTokenAmount)(f,S.decimals).toString(10),M=(0,d.calcTokenAmount)(g,E.decimals).toPrecision(8);let D=null,F=null,b=null,L=null;({feeInFiat:D,feeInEth:F,rawNetworkFees:b,rawEthFee:L}=w({tradeGas:I||(0,m.decimalToHex)(v||8e5),approveGas:i,gasPriceTrade:t,gasPriceApprove:a,currentCurrency:r,conversionRate:n,tradeValue:O.value,sourceSymbol:S.symbol,sourceAmount:f,chainId:l,multiLayerL1FeeTotal:C})),u&&({feeInFiat:D,feeInEth:F}=N({chainId:l,currentCurrency:r,conversionRate:n,nativeCurrencySymbol:p,feeInWeiDec:u.feeEstimate}));const x=new s.BigNumber(100-h).div(100),U=new s.BigNumber(M).times(x).toFixed(6),G=c[E.address],H=(0,o.isSwapsDefaultTokenSymbol)(E.symbol,l)?(0,d.calcTokenAmount)(g,E.decimals).minus(L,10):new s.BigNumber(G||0,10).times((0,d.calcTokenAmount)(g,E.decimals),10).minus(L,10);let B,W=h;return"AGG"===A?B="swapAggregator":"RFQ"===A?(B="swapRequestForQuotation",W=0):B="DEX"===A?"swapDecentralizedExchange":"CONTRACT"===A?"swapDirectContract":"swapUnknown",{aggId:_,amountReceiving:`${M} ${E.symbol}`,destinationTokenDecimals:E.decimals,destinationTokenSymbol:E.symbol,destinationTokenValue:R(M),destinationIconUrl:E.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:B,feeInEth:F,detailedNetworkFees:`${F} (${D})`,networkFees:D,quoteSource:A,rawNetworkFees:b,slippage:W,sourceTokenDecimals:S.decimals,sourceTokenSymbol:S.symbol,sourceTokenValue:P,sourceTokenIconUrl:S.iconUrl,ethValueOfTrade:H,minimumAmountReceived:U,metaMaskFee:y}}))},a.showRemainingTimeInMinAndSec=void 0;var n,s=e("bignumber.js"),r=e("../../../shared/constants/swaps"),o=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),l=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},u=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/constants/common"),g=e("./swaps.util.gas");const f=3e5,S="usd",E={"X-Client-Id":r.SWAPS_CLIENT_ID},h=a.TOKEN_VALIDATORS=[{property:"address",type:"string",validator:e=>(0,u.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],A=h.slice(0,2),_=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],I=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),v=[{property:"SafeGasPrice",type:"string",validator:I},{property:"ProposeGasPrice",type:"string",validator:I},{property:"FastGasPrice",type:"string",validator:I}];async function y(e){if(!Object.values(i.CHAIN_IDS).includes(e))return[];const t=(0,p.getBaseApi)("topAssets",e);return(await(0,l.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f}})||[]).filter((e=>(0,p.validateData)(A,e,t)))}const N=({chainId:e,currentCurrency:t,conversionRate:a,USDConversionRate:n,nativeCurrencySymbol:s,feeInWeiDec:o})=>{var i;const l=(0,m.decimalToHex)(o),u=(0,m.getValueFromWeiHex)({value:l,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:l,toCurrency:t,conversionRate:a,numberOfDecimals:2});let p;p=t===S?d:(0,m.getValueFromWeiHex)({value:l,toCurrency:S,conversionRate:n,numberOfDecimals:2});return{rawNetworkFees:d,feeInUsd:p,feeInFiat:(0,c.formatCurrency)(d,t),feeInEth:`${u} ${s||(null===(i=r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:u}};function w({tradeGas:e,approveGas:t,gasPriceTrade:a,gasPriceApprove:n,currentCurrency:i,conversionRate:l,USDConversionRate:u,tradeValue:p,sourceSymbol:g,sourceAmount:f,chainId:E,nativeCurrencySymbol:h,multiLayerL1FeeTotal:A}){const _=(0,d.calcGasTotal)(e,a),I=t?(0,d.calcGasTotal)(t,n):"0x0",v=(0,m.sumHexes)(_,I,A||"0x0"),y=new s.BigNumber(p,16).minus((0,o.isSwapsDefaultTokenSymbol)(g,E)?f:0,10).toString(16),N=new s.BigNumber(v,16).plus(y,16).toString(16),w=(0,m.getValueFromWeiHex)({value:N,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),R=(0,m.getValueFromWeiHex)({value:N,toCurrency:i,conversionRate:l,numberOfDecimals:2}),O=(0,c.formatCurrency)(R,i);let k;k=i===S?R:(0,m.getValueFromWeiHex)({value:N,toCurrency:S,conversionRate:u,numberOfDecimals:2});return{rawNetworkFees:R,feeInUsd:k,rawEthFee:w,feeInFiat:O,feeInEth:`${w} ${h||r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[E].symbol}`,nonGasFee:y}}function R(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new s.BigNumber(t).toFixed()),t}a.getFeeForSmartTransaction=N;a.getClassNameForCharLength=(e,t)=>{let a;return a=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${a}`};a.isContractAddressValid=(e,t)=>!(!e||!r.ALLOWED_CONTRACT_ADDRESSES[t])&&r.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const O=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return r.ETHEREUM;case i.CHAIN_IDS.BSC:return r.BSC;case i.CHAIN_IDS.POLYGON:return r.POLYGON;case i.CHAIN_IDS.GOERLI:return r.GOERLI;case i.CHAIN_IDS.AVALANCHE:return r.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return r.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return r.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return r.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return r.LINEA;case i.CHAIN_IDS.BASE:return r.BASE;case i.CHAIN_IDS.SEI:return r.SEI;default:return""}};a.getNetworkNameByChainId=O;a.getSwapsLivenessForNetwork=(e,t={})=>{const a=O(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[a])return{swapsFeatureIsLive:!1};return t[a].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[a].fallbackToV1}};a.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};a.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let k=a.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});a.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case k.unavailable:case k.regularTxPending:return t("smartSwapsErrorUnavailable");case k.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};a.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())};async function C(e,t,a){const n=await(0,g.estimateGasFee)({transactionParams:e,chainId:a}),s=null==n?void 0:n.estimates,{maxFeePerGas:r}=(null==s?void 0:s.high)??{},{maxPriorityFeePerGas:o}=(null==s?void 0:s.high)??{};return{baseAndPriorityFeePerGas:o?(0,m.addHexes)(t,o):undefined,maxFeePerGas:r,maxPriorityFeePerGas:o}}a.getSwap1559GasFeeEstimates=async(e,t,a,n)=>{const s=(0,m.decGWEIToHexWEI)(a);return{tradeGasFeeEstimates:await C(e,s,n),approveGasFeeEstimates:t?await C(t,s,n):undefined,estimatedBaseFee:s}}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[7802,{"../../shared/modules/selectors/util":5923,"../../shared/modules/string-utils":5924,"@metamask/keyring-api":2077,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getMemoizedInternalAccountByAddress=a.getInternalAccounts=void 0,a.getSelectedInternalAccount=l,a.hasCreatedSolanaAccount=function(e){return c(e).some((e=>i(e)))},a.isNonEvmAccount=function(e){const{DataAccount:t}=n.SolAccountType;return Boolean(e&&(Object.values(n.BtcAccountType).includes(e.type)||e.type===t))},a.isSelectedInternalAccountEth=function(e){const t=l(e),{Eoa:a,Erc4337:s}=n.EthAccountType;return Boolean(t&&(t.type===a||t.type===s))},a.isSelectedInternalAccountSolana=function(e){return i(l(e))},a.isSolanaAccount=i;var n=e("@metamask/keyring-api"),s=e("reselect"),r=e("../../shared/modules/selectors/util"),o=e("../../shared/modules/string-utils");function i(e){const{DataAccount:t}=n.SolAccountType;return Boolean(e&&e.type===t)}const c=a.getInternalAccounts=(0,s.createSelector)((e=>Object.values(e.metamask.internalAccounts.accounts)),(e=>e));a.getMemoizedInternalAccountByAddress=(0,r.createDeepEqualSelector)([c,(e,t)=>t],((e,t)=>e.find((e=>(0,o.isEqualCaseInsensitive)(e.address,t)))));function l(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}}}},{package:"$root$",file:"ui/selectors/accounts.ts"}],[7804,{"../../shared/modules/selectors/util":5923,"@metamask/controller-utils":1559,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getApprovalFlows=function(e){return e.metamask.approvalFlows},a.getApprovalsByOrigin=a.getApprovalRequestsByType=void 0,a.getPendingApprovals=o,a.hasPendingApprovals=function(e,t,a){const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(a)return n.some(a);return n.length>0},a.pendingApprovalsSortedSelector=i,a.selectPendingApprovalsForNavigation=a.selectPendingApproval=void 0;var n=e("@metamask/controller-utils"),s=e("reselect"),r=e("../../shared/modules/selectors/util");function o(e){return Object.values(e.metamask.pendingApprovals??{})}function i(e){return o(e).sort(((e,t)=>e.time-t.time))}a.getApprovalRequestsByType=(e,t,a)=>{const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return a?n.filter(a):n};a.selectPendingApprovalsForNavigation=(0,r.createDeepEqualSelector)(i,(e=>e.filter(((t,a)=>(!u(t)||e.findIndex(u)===a)&&(!l(t)||e.findIndex(l)===a)))));const c=(0,s.createSelector)(o,((e,t)=>t),((e,t)=>e.find((({id:e})=>e===t))));a.selectPendingApproval=(0,r.createDeepEqualSelector)(c,(e=>e));function l(e){var t;const a=null===(t=e.requestData)||void 0===t||null===(t=t.asset)||void 0===t?void 0:t.tokenId;return e.type===n.ApprovalType.WatchAsset&&!a}function u(e){var t;const a=null===(t=e.requestData)||void 0===t||null===(t=t.asset)||void 0===t?void 0:t.tokenId;return e.type===n.ApprovalType.WatchAsset&&Boolean(a)}a.getApprovalsByOrigin=(e,t)=>{const a=o(e);return null==a?void 0:a.filter((e=>e.origin===t))}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[7806,{"../../shared/constants/gas":5805,"../../shared/modules/conversion.utils":5904,"../../shared/modules/gas.utils":5909,"../../shared/modules/selectors/networks":5921,"../ducks/metamask/metamask":6971,"../helpers/utils/confirm-tx.util":7010,"../helpers/utils/tx-helper":7036,"./custom-gas":7807,"./selectors":7827,"./transactions":7833,"@metamask/transaction-controller":2925,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.currentCurrencySelector=a.conversionRateSelector=void 0,a.selectIsMaxValueEnabled=y,a.selectMaxValue=void 0,a.selectMaxValueModeForTransaction=function(e,t){return w(e)[t]},a.selectTransactionAvailableBalance=v,a.selectTransactionFeeById=I,a.use4ByteResolutionSelector=a.unconfirmedTransactionsListSelector=a.unconfirmedTransactionsHashSelector=a.unconfirmedMessagesHashSelector=a.txDataSelector=a.transactionFeeSelector=a.tokenAddressSelector=a.selectTransactionValue=void 0;var n,s=e("reselect"),r=e("@metamask/transaction-controller"),o=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),l=e("../../shared/constants/gas"),u=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/conversion.utils"),p=e("../../shared/modules/selectors/networks"),m=e("./custom-gas"),T=e("./selectors"),g=e("./transactions");const f=e=>(0,g.getUnapprovedTransactions)(e);a.unconfirmedTransactionsListSelector=(0,s.createSelector)(f,g.unapprovedPersonalMsgsSelector,g.unapprovedDecryptMsgsSelector,g.unapprovedEncryptionPublicKeyMsgsSelector,g.unapprovedTypedMessagesSelector,((e={},t={},a={},n={},s={})=>(0,o.default)(e,t,a,n,s)||[])),a.unconfirmedTransactionsHashSelector=(0,s.createSelector)(f,g.unapprovedPersonalMsgsSelector,g.unapprovedDecryptMsgsSelector,g.unapprovedEncryptionPublicKeyMsgsSelector,g.unapprovedTypedMessagesSelector,((e={},t={},a={},n={},s={})=>({...e,...t,...a,...n,...s}))),a.unconfirmedMessagesHashSelector=(0,s.createSelector)(g.unapprovedPersonalMsgsSelector,g.unapprovedDecryptMsgsSelector,g.unapprovedEncryptionPublicKeyMsgsSelector,g.unapprovedTypedMessagesSelector,((e={},t={},a={},n={})=>({...e,...t,...a,...n})));a.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const S=e=>e.metamask.currentCurrency;a.currentCurrencySelector=S;const E=e=>{var t;return null===(t=e.metamask.currencyRates[(0,p.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};a.conversionRateSelector=E;const h=e=>e.confirmTransaction.txData;a.txDataSelector=h;const A=(0,s.createSelector)(h,(e=>e&&e.txParams||{})),_=(a.tokenAddressSelector=(0,s.createSelector)(A,(e=>e&&e.to)),function(e,t){var a,n,s,o;const p=S(e),g=E(e),f=(0,c.getNativeCurrency)(e),h=(0,c.getGasFeeEstimates)(e)||{},A=(0,c.getGasEstimateType)(e),_=(0,T.checkNetworkAndAccountSupports1559)(e),I={gasLimit:(null===(a=t.txParams)||void 0===a?void 0:a.gas)??"0x0",gasLimitNoBuffer:t.gasLimitNoBuffer};if(_){var v;const{gasPrice:e="0"}=h,a=h[t.userFeeLevel]||{};if((null===(v=t.txParams)||void 0===v?void 0:v.type)===r.TransactionEnvelopeType.legacy){var y;I.gasPrice=(null===(y=t.txParams)||void 0===y?void 0:y.gasPrice)??(0,d.decGWEIToHexWEI)(e)}else{var N,w,R,O;const{suggestedMaxPriorityFeePerGas:n,suggestedMaxFeePerGas:s}=a;I.maxFeePerGas=null===(N=t.txParams)||void 0===N||!N.maxFeePerGas||t.userFeeLevel!==l.CUSTOM_GAS_ESTIMATE&&s?(0,d.decGWEIToHexWEI)(s||e):null===(w=t.txParams)||void 0===w?void 0:w.maxFeePerGas,I.maxPriorityFeePerGas=null===(R=t.txParams)||void 0===R||!R.maxPriorityFeePerGas||t.userFeeLevel!==l.CUSTOM_GAS_ESTIMATE&&n?n&&(0,d.decGWEIToHexWEI)(n)||I.maxFeePerGas:null===(O=t.txParams)||void 0===O?void 0:O.maxPriorityFeePerGas,I.baseFeePerGas=(0,d.decGWEIToHexWEI)(h.estimatedBaseFee)}}else switch(A){case l.GasEstimateTypes.feeMarket:case l.GasEstimateTypes.none:I.gasPrice=(null===(n=t.txParams)||void 0===n?void 0:n.gasPrice)??"0x0";break;case l.GasEstimateTypes.ethGasPrice:I.gasPrice=(null===(s=t.txParams)||void 0===s?void 0:s.gasPrice)??(0,d.decGWEIToHexWEI)(h.gasPrice);break;case l.GasEstimateTypes.legacy:I.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,m.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:k="0x0"}={}}=t,C=(0,d.getValueFromWeiHex)({value:k,fromCurrency:f,toCurrency:p,conversionRate:g,numberOfDecimals:2}),P=(0,d.getValueFromWeiHex)({value:k,fromCurrency:f,toCurrency:f,conversionRate:g,numberOfDecimals:6}),M=(0,u.getMinimumGasTotalInHexWei)(I),D=(0,u.getMaximumGasTotalInHexWei)(I),F=(0,i.getTransactionFee)({value:M,fromCurrency:f,toCurrency:p,numberOfDecimals:2,conversionRate:g}),b=(0,i.getTransactionFee)({value:D,fromCurrency:f,toCurrency:p,numberOfDecimals:2,conversionRate:g}),L=(0,i.getTransactionFee)({value:M,fromCurrency:f,toCurrency:f,numberOfDecimals:6,conversionRate:g});return{hexTransactionAmount:k,fiatTransactionAmount:C,ethTransactionAmount:P,hexMinimumTransactionFee:M,fiatMinimumTransactionFee:F,hexMaximumTransactionFee:D,fiatMaximumTransactionFee:b,ethTransactionFee:L,fiatTransactionTotal:(0,i.addFiat)(F,C),ethTransactionTotal:(0,i.addEth)(L,P),hexTransactionTotal:(0,d.sumHexes)(k,M),gasEstimationObject:I}});function I(e,t){const a=(0,g.selectTransactionMetadata)(e,t);return _(e,a??{})}function v(e,t,a){var n;return null===(n=(0,T.getMetaMaskAccounts)(e,a)[(0,g.selectTransactionSender)(e,t)])||void 0===n?void 0:n.balance}function y(e,t){var a;return(null===(a=e.confirmTransaction.maxValueMode)||void 0===a?void 0:a[t])??!1}a.transactionFeeSelector=_;const N=a.selectMaxValue=(0,s.createSelector)(I,v,((e,t)=>t&&e.hexMaximumTransactionFee?(0,d.subtractHexes)(t,e.hexMaximumTransactionFee):undefined)),w=(a.selectTransactionValue=(0,s.createSelector)(y,N,g.selectTransactionMetadata,((e,t,a)=>{var n;return e?t:null==a||null===(n=a.txParams)||void 0===n?void 0:n.value})),e=>e.confirmTransaction.maxValueMode)}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[7807,{"../../app/scripts/lib/util":226,"../../shared/constants/common":5800,"../../shared/constants/gas":5805,"../../shared/lib/transactions-controller-utils":5894,"../../shared/modules/Numeric":5899,"../../shared/modules/conversion.utils":5904,"../ducks/metamask/metamask":6971,"../ducks/send":6976,"../helpers/utils/confirm-tx.util":7010,"../helpers/utils/formatters":7013,"./selectors":7827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.basicPriceEstimateToETHTotal=E,a.getAverageEstimate=f,a.getAveragePriceEstimateInHexWEI=function(e){return A(f(e))},a.getBasicGasEstimateLoadingStatus=function(e){return!1===_(e)},a.getCustomGasLimit=function(e){return e.gas.customData.limit},a.getCustomGasPrice=T,a.getDefaultActiveButtonIndex=function(e,t,a){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,n.addHexPrefix)(t||a))},a.getFastPriceEstimate=S,a.getFastPriceEstimateInHexWEI=function(e){return A(S(e)||"0x0")},a.getGasPriceInHexWei=A,a.getIsCustomNetworkGasPriceFetched=function(e){return(0,l.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},a.getIsGasEstimatesFetched=_,a.getNoGasPriceFetched=function(e){return(0,l.getGasEstimateType)(e)===c.GasEstimateTypes.none},a.getRenderableConvertedCurrencyFee=function(e,t,a,n){const o=E(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,s.decEthToConvertedCurrency)(o,a,n);return(0,r.formatCurrency)(i,a)},a.getRenderableEthFee=function(e,t,a=9,n="ETH"){const s=E(new d.Numeric(e,10).toBase(16).toString(),t,a);return(0,o.formatETHFee)(s,n)},a.getSafeLowEstimate=g,a.isCustomPriceExcessive=function(e,t=!1){const a=t?(0,i.getGasPrice)(e):T(e),n=S(e);if(!a||!n)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*n),10)},a.isCustomPriceSafe=function(e){const t=g(e),a=T(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.isCustomPriceSafeForCustomNetwork=function(e){const t=f(e),a=T(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.priceEstimateToWei=h;var n=e("../../app/scripts/lib/util"),s=e("../../shared/modules/conversion.utils"),r=e("../helpers/utils/confirm-tx.util"),o=e("../helpers/utils/formatters"),i=e("../ducks/send"),c=e("../../shared/constants/gas"),l=e("../ducks/metamask/metamask"),u=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e("./selectors");function T(e){return e.gas.customData.price}function g(e){const t=(0,l.getGasFeeEstimates)(e);return(0,l.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function f(e){const t=(0,l.getGasFeeEstimates)(e);return(0,l.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function S(e){const t=(0,l.getGasFeeEstimates)(e);return(0,l.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function E(e,t,a=9){return new d.Numeric((0,u.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(a).toBase(10).toString()}function h(e){return new d.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function A(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,n.addHexPrefix)(h(t))}function _(e){const t=(0,l.getGasEstimateType)(e);return!(0,l.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[7809,{"../../shared/constants/app":5798,"../../shared/constants/onboarding":5816,"../../shared/modules/browser-runtime.utils":5901,"../../shared/modules/environment":5905,"../helpers/constants/routes":6989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getFirstTimeFlowType=void 0,a.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===s.FirstTimeFlowType.create)return i.ONBOARDING_COMPLETION_ROUTE;if(t===s.FirstTimeFlowType.import)return i.ONBOARDING_COMPLETION_ROUTE;if(t===s.FirstTimeFlowType.restore)return i.ONBOARDING_SECURE_YOUR_WALLET_ROUTE;if(t===s.FirstTimeFlowType.socialCreate)return i.ONBOARDING_COMPLETION_ROUTE;if(t===s.FirstTimeFlowType.socialImport)return i.ONBOARDING_PIN_EXTENSION_ROUTE;return i.DEFAULT_ROUTE},a.getFirstTimeFlowTypeRouteAfterUnlock=function(e){const{firstTimeFlowType:t,participateInMetaMetrics:a}=e.metamask,o=null!==a;if(t===s.FirstTimeFlowType.create)return i.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===s.FirstTimeFlowType.import)return i.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===s.FirstTimeFlowType.restore)return i.ONBOARDING_METAMETRICS;if(t===s.FirstTimeFlowType.socialCreate)return o?i.ONBOARDING_COMPLETION_ROUTE:i.ONBOARDING_METAMETRICS;if(t===s.FirstTimeFlowType.socialImport)return(0,r.getBrowserName)()===n.PLATFORM_FIREFOX?i.ONBOARDING_PIN_EXTENSION_ROUTE:o?i.ONBOARDING_COMPLETION_ROUTE:i.ONBOARDING_METAMETRICS;return i.DEFAULT_ROUTE},a.getOnboardingInitiator=a.getIsSocialLoginFlow=void 0;var n=e("../../shared/constants/app"),s=e("../../shared/constants/onboarding"),r=e("../../shared/modules/browser-runtime.utils"),o=e("../../shared/modules/environment"),i=e("../helpers/constants/routes");a.getIsSocialLoginFlow=e=>{if(!(0,o.getIsSeedlessOnboardingFeatureEnabled)())return!1;const{firstTimeFlowType:t}=e.metamask;return t===s.FirstTimeFlowType.socialCreate||t===s.FirstTimeFlowType.socialImport};a.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;a.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const a=Object.keys(t)[0];return{location:a,tabId:t[a]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[7812,{"../pages/confirmations/selectors/confirm":7503,"./accounts":7802,"./approvals":7804,"./confirm-transaction":7806,"./custom-gas":7807,"./first-time-flow":7809,"./metametrics":7814,"./multichain-accounts":7818,"./multichain/networks":7820,"./origin-throttling":7822,"./remote-feature-flags":7823,"./seedless-onboarding":7825,"./selectors":7827,"./transactions":7833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("../pages/confirmations/selectors/confirm");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}));var s=e("./confirm-transaction");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===s[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return s[e]}}))}));var r=e("./custom-gas");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===r[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===o[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===i[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./selectors");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===c[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=e("./transactions");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===l[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=e("./approvals");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===u[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return u[e]}}))}));var d=e("./accounts");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===d[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return d[e]}}))}));var p=e("./remote-feature-flags");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===p[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return p[e]}}))}));var m=e("./origin-throttling");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===m[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return m[e]}}))}));var T=e("./multichain/networks");Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===T[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return T[e]}}))}));var g=e("./multichain-accounts");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===g[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return g[e]}}))}));var f=e("./seedless-onboarding");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===f[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return f[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[7814,{reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.selectMatchingFragment=a.selectFragments=a.selectFragmentBySuccessEvent=a.selectFragmentById=a.getParticipateInMetaMetrics=a.getLatestMetricsEventTimestamp=a.getIsParticipateInMetaMetricsSet=a.getDataCollectionForMarketing=void 0;var n=e("reselect");const s=e=>e.metamask.fragments;a.selectFragments=s;a.getDataCollectionForMarketing=e=>e.metamask.dataCollectionForMarketing;a.getParticipateInMetaMetrics=e=>Boolean(e.metamask.participateInMetaMetrics);a.getIsParticipateInMetaMetricsSet=e=>null!==e.metamask.participateInMetaMetrics;a.getLatestMetricsEventTimestamp=e=>e.metamask.latestNonAnonymousEventTimestamp;const r=a.selectFragmentBySuccessEvent=(0,n.createSelector)(s,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),o=a.selectFragmentById=(0,n.createSelector)(s,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));a.selectMatchingFragment=(0,n.createSelector)(((e,t)=>r(e,t.fragmentOptions)),((e,t)=>o(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[7817,{"../../../package.json":5793,"../remote-feature-flags":7823,"@metamask/superstruct":2875,semver:5627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.isMultichainAccountsFeatureEnabled=a.getMultichainAccountsRemoteFeatureFlags=a.getIsMultichainAccountsState2Enabled=a.getIsMultichainAccountsState1Enabled=void 0;var n=e("@metamask/superstruct"),s=i(e("semver")),r=i(e("../../../package.json")),o=e("../remote-feature-flags");function i(e){return e&&e.__esModule?e:{default:e}}const c=(0,n.object)({enabled:(0,n.boolean)(),featureVersion:(0,n.nullable)((0,n.string)()),minimumVersion:(0,n.nullable)((0,n.string)())}),l=r.default.version,u=(e,t)=>{const{enabled:a,featureVersion:n,minimumVersion:r}=e;return a&&n&&r&&n===t&&s.default.gte(l,r)};a.isMultichainAccountsFeatureEnabled=u;const d=e=>{const t=(0,o.getRemoteFeatureFlags)(e).enableMultichainAccounts;try{(0,n.assert)(t,c)}catch(e){return{enabled:!1,featureVersion:null,minimumVersion:null}}return t};a.getMultichainAccountsRemoteFeatureFlags=d;a.getIsMultichainAccountsState1Enabled=e=>{const t=d(e);return u(t,"2")||u(t,"1")};a.getIsMultichainAccountsState2Enabled=e=>{const t=d(e);return u(t,"2")}}}},{package:"$root$",file:"ui/selectors/multichain-accounts/feature-flags.ts"}],[7818,{"./feature-flags":7817},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./feature-flags");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"ui/selectors/multichain-accounts/index.ts"}],[7819,{"../../app/scripts/lib/util":226,"../../shared/constants/multichain/assets":5811,"../../shared/constants/multichain/networks":5812,"../../shared/constants/network":5813,"../../shared/modules/Numeric":5899,"../../shared/modules/selectors/networks":5921,"../../shared/modules/selectors/util":5923,"../ducks/metamask/metamask":6971,"./accounts":7802,"./multichain/networks":7820,"./selectors":7827,"@metamask/keyring-api":2077,"@metamask/network-controller":2321,"@metamask/utils":2974,"prop-types":5080,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.MultichainNetworkPropType=a.InternalAccountPropType=void 0,a.getImageForChainId=function(e){return{...m.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP,...l.MULTICHAIN_TOKEN_IMAGE_MAP}[e]},a.getLastSelectedNonEvmAccount=function(e){const t=(0,S.getInternalAccounts)(e).filter((e=>!(0,s.isEvmAccountType)(e.type))).sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t.length>0?t[0]:undefined},a.getLastSelectedSolanaAccount=function(e){const t=(0,S.getInternalAccounts)(e).filter((e=>(0,S.isSolanaAccount)(e))).sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t.length>0?t[0]:undefined},a.getMemoizedMultichainNetworkConfigurationsByChainId=void 0,a.getMultichainBalances=O,a.getMultichainCoinRates=void 0,a.getMultichainConversionRate=function(e,t){var a;const{conversionRates:n}=e.metamask,{chainId:s}=_(e,t),r=null===(a=(0,g.getConversionRatesForNativeAsset)({conversionRates:n,chainId:s}))||void 0===a?void 0:a.rate;return I(e,t)?(0,d.getConversionRate)(e):r},a.getMultichainCurrencyImage=y,a.getMultichainCurrentChainId=function(e){const{chainId:t}=v(e);return t},a.getMultichainCurrentCurrency=function(e){return(0,d.getCurrentCurrency)(e)},a.getMultichainCurrentNetwork=function(e,t){return v(e,t)},a.getMultichainDefaultToken=w,a.getMultichainIsBitcoin=function(e,t){const a=I(e,t),{symbol:n}=w(e,t);return!a&&"BTC"===n},a.getMultichainIsEvm=I,a.getMultichainIsMainnet=function(e,t){const a=t??(0,S.getSelectedInternalAccount)(e),n=v(e,a);if(I(e,t))return(0,E.getIsMainnet)(e);const s=l.MULTICHAIN_ACCOUNT_TYPE_TO_MAINNET[a.type];return n.chainId===s},a.getMultichainIsSolana=function(e,t){const a=I(e,t),{symbol:n}=w(e,t);return!a&&"SOL"===n},a.getMultichainIsTestnet=R,a.getMultichainNativeCurrency=function(e,t){return I(e,t)?(0,d.getNativeCurrency)(e):v(e,t).ticker},a.getMultichainNativeCurrencyImage=function(e,t){return y(e,t)},a.getMultichainNetwork=_,a.getMultichainNetworkConfigurationsByChainId=void 0,a.getMultichainNetworkProviders=A,a.getMultichainProviderConfig=v,a.getMultichainSelectedAccountCachedBalance=k,a.getMultichainSelectedAccountCachedBalanceIsZero=void 0,a.getMultichainShouldShowFiat=N,a.getMultichainTransactions=function(e){return e.metamask.nonEvmTransactions},a.getSelectedAccountMultichainTransactions=function(e){const t=(0,S.getSelectedInternalAccount)(e);if((0,s.isEvmAccountType)(t.type))return undefined;return e.metamask.nonEvmTransactions[t.id]},a.isChainIdMainnet=function(e){return e===m.CHAIN_IDS.MAINNET},a.makeGetMultichainShouldShowFiatByChainId=void 0;var n,s=e("@metamask/keyring-api"),r=e("@metamask/network-controller"),o=e("@metamask/utils"),i=(n=e("prop-types"))&&n.__esModule?n:{default:n},c=e("reselect"),l=e("../../shared/constants/multichain/networks"),u=e("../../shared/modules/Numeric"),d=e("../ducks/metamask/metamask"),p=e("../../shared/constants/multichain/assets"),m=e("../../shared/constants/network"),T=e("../../shared/modules/selectors/networks"),g=e("../../app/scripts/lib/util"),f=e("../../shared/modules/selectors/util"),S=e("./accounts"),E=e("./selectors"),h=e("./multichain/networks");a.MultichainNetworkPropType=i.default.shape({nickname:i.default.string.isRequired,isEvmNetwork:i.default.bool.isRequired,chainId:i.default.string,network:i.default.oneOfType([i.default.shape({rpcUrl:i.default.string,type:i.default.string.isRequired,chainId:i.default.string.isRequired,ticker:i.default.string.isRequired,rpcPrefs:i.default.shape({blockExplorerUrl:i.default.string,imageUrl:i.default.string}),nickname:i.default.string,id:i.default.string}),i.default.shape({chainId:i.default.string.isRequired,ticker:i.default.string.isRequired,rpcPrefs:i.default.shape({blockExplorerUrl:i.default.string,imageUrl:i.default.string})})]).isRequired}),a.InternalAccountPropType=i.default.shape({id:i.default.string.isRequired,address:i.default.string.isRequired,metadata:i.default.shape({name:i.default.string.isRequired,snap:i.default.shape({id:i.default.string.isRequired,name:i.default.string,enabled:i.default.bool}),keyring:i.default.shape({type:i.default.string.isRequired}).isRequired}).isRequired,type:i.default.string.isRequired});function A(e){return Object.values(l.MULTICHAIN_PROVIDER_CONFIGS)}function _(e,t){if(I(e,t)){var a;const t=(0,T.getCurrentChainId)(e),n=(0,T.getProviderConfig)(e),s=t;n.rpcPrefs={...n.rpcPrefs,imageUrl:m.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[s]};return{nickname:(null===(a=(0,T.getNetworkConfigurationsByChainId)(e)[t])||void 0===a?void 0:a.name)??n.rpcUrl,isEvmNetwork:!0,chainId:`${o.KnownCaipNamespace.Eip155}:${Number(t)}`,network:n}}const n=t??(0,S.getSelectedInternalAccount)(e),s=A().find((e=>n.scopes.includes(e.chainId)));if(!s)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:s.nickname,isEvmNetwork:!1,chainId:null==s?void 0:s.chainId,network:s}}function I(e,t){const a=(0,d.getCompletedOnboarding)(e),n=t??(0,E.getMaybeSelectedInternalAccount)(e);return!a||!n||(0,s.isEvmAccountType)(n.type)}function v(e,t){return _(e,t).network}function y(e,t){var a;if(I(e,t))return(0,E.getNativeCurrencyImage)(e);return null===(a=v(e,t).rpcPrefs)||void 0===a?void 0:a.imageUrl}function N(e,t,a){const n=t??(0,S.getSelectedInternalAccount)(e),s=R(e,n),r=!s,o=(0,E.getUseCurrencyRateCheck)(e);return I(e,n)?(0,E.getShouldShowFiat)(e,a):o&&r||o&&s&&(0,E.getShowFiatInTestnets)(e)}function w(e,t){var a;return{symbol:I(e,t)?(null===(a=(0,T.getProviderConfig)(e))||void 0===a?void 0:a.ticker)??"ETH":v(e,t).ticker}}function R(e,t){const a=v(e,t??(0,S.getSelectedInternalAccount)(e));return I(e,t)?m.TEST_NETWORK_IDS.includes(a.chainId):[l.MultichainNetworks.BITCOIN_TESTNET,l.MultichainNetworks.BITCOIN_SIGNET,l.MultichainNetworks.SOLANA_DEVNET,l.MultichainNetworks.SOLANA_TESTNET].includes(a.chainId)}function O(e){return e.metamask.balances}a.makeGetMultichainShouldShowFiatByChainId=e=>(t,a)=>N(t,a,e);function k(e){return I(e)?(0,E.getSelectedAccountCachedBalance)(e):function(e,t){var a;const n=O(e),s=t??(0,S.getSelectedInternalAccount)(e),r=(0,h.getSelectedMultichainNetworkConfiguration)(e),o=null===(a=p.MULTICHAIN_NETWORK_TO_ASSET_TYPES[r.chainId])||void 0===a?void 0:a[0];o||console.warn("Could not find asset type for network:",r);const i=null==n?void 0:n[s.id];i||console.warn("Could not find balances for account:",s);const c=null==i?void 0:i[o];return c||console.warn("Could not find balance for asset:",o),(null==c?void 0:c.amount)??0}(e)}a.getMultichainCoinRates=e=>e.metamask.rates;a.getMultichainSelectedAccountCachedBalanceIsZero=(0,c.createSelector)([I,k],((e,t)=>{const a=e?16:10;return new u.Numeric(t,a).isZero()}));const C=e=>({...(0,T.getNetworkConfigurationsByChainId)(e),[l.MultichainNetworks.SOLANA]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.SOLANA],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.SOLANA].nickname??"",nativeCurrency:"sol",rpcEndpoints:[{url:"",type:r.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.SOLANA},[l.MultichainNetworks.BITCOIN]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN].nickname??"",nativeCurrency:"BTC",rpcEndpoints:[{url:"",type:r.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.BITCOIN},[l.MultichainNetworks.BITCOIN_TESTNET]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_TESTNET],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_TESTNET].nickname??"",nativeCurrency:"tBTC",rpcEndpoints:[{url:"",type:r.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.BITCOIN_TESTNET},[l.MultichainNetworks.BITCOIN_SIGNET]:{...l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_SIGNET],blockExplorerUrls:[],name:l.MULTICHAIN_PROVIDER_CONFIGS[l.MultichainNetworks.BITCOIN_SIGNET].nickname??"",nativeCurrency:"sBTC",rpcEndpoints:[{url:"",type:r.RpcEndpointType.Custom,networkClientId:""}],defaultRpcEndpointIndex:0,chainId:l.MultichainNetworks.BITCOIN_SIGNET}});a.getMultichainNetworkConfigurationsByChainId=C;a.getMemoizedMultichainNetworkConfigurationsByChainId=(0,f.createDeepEqualSelector)([C],(e=>e))}}},{package:"$root$",file:"ui/selectors/multichain.ts"}],[7820,{"../../../shared/modules/selectors/networks":5921,"../../../shared/modules/selectors/util":5923,"../accounts":7802,"../selectors":7827,"@metamask/keyring-api":2077,"@metamask/multichain-network-controller":2212,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getSelectedMultichainNetworkConfiguration=a.getSelectedMultichainNetworkChainId=a.getNonEvmMultichainNetworkConfigurationsByChainId=a.getNetworksWithTransactionActivity=a.getNetworksWithActivity=a.getMultichainNetworkConfigurationsByChainId=a.getIsNonEvmNetworksEnabled=a.getIsEvmMultichainNetworkSelected=a.getEnabledNetworksByNamespace=a.getEnabledNetworkClientIds=a.getEnabledChainIds=void 0;var n=e("@metamask/multichain-network-controller"),s=e("@metamask/keyring-api"),r=e("@metamask/utils"),o=e("../../../shared/modules/selectors/networks"),i=e("../../../shared/modules/selectors/util"),c=e("../selectors"),l=e("../accounts");const u=a.getIsNonEvmNetworksEnabled=(0,i.createDeepEqualSelector)(c.getIsBitcoinSupportEnabled,c.getIsSolanaSupportEnabled,l.getInternalAccounts,((e,t,a)=>{if(e&&t)return{bitcoinEnabled:!0,solanaEnabled:!0};let n=e,r=t;for(const{scopes:e}of a)if(null!=e&&e.includes(s.BtcScope.Mainnet||s.BtcScope.Testnet||s.BtcScope.Signet)&&(n=!0),null!=e&&e.includes(s.SolScope.Mainnet)&&(r=!0),n&&r)break;return{bitcoinEnabled:n,solanaEnabled:r}})),d=a.getNonEvmMultichainNetworkConfigurationsByChainId=(0,i.createDeepEqualSelector)((e=>e.metamask.multichainNetworkConfigurationsByChainId),u,(e=>(0,c.getIsSolanaTestnetSupportEnabled)(e)),((e,t,a)=>{const n={},{bitcoinEnabled:r,solanaEnabled:o}=t;return r&&(n[s.BtcScope.Mainnet]=e[s.BtcScope.Mainnet],n[s.BtcScope.Testnet]=e[s.BtcScope.Testnet],n[s.BtcScope.Signet]=e[s.BtcScope.Signet]),o&&(n[s.SolScope.Mainnet]=e[s.SolScope.Mainnet]),o&&a&&(n[s.SolScope.Devnet]=e[s.SolScope.Devnet]),n})),p=a.getMultichainNetworkConfigurationsByChainId=(0,i.createDeepEqualSelector)(d,o.getNetworkConfigurationsByChainId,((e,t)=>[{...e,...Object.entries(t).reduce(((e,[,t])=>({...e,[(0,n.toEvmCaipChainId)(t.chainId)]:{...(0,n.toMultichainNetworkConfiguration)(t),name:t.name||t.rpcEndpoints[t.defaultRpcEndpointIndex].url}})),{})},t])),m=e=>e.metamask.isEvmSelected;a.getIsEvmMultichainNetworkSelected=m;const T=e=>{if(m(e)){const t=(0,o.getProviderConfig)(e);return(0,n.toEvmCaipChainId)(t.chainId)}return e.metamask.selectedMultichainNetworkChainId};a.getSelectedMultichainNetworkChainId=T;a.getSelectedMultichainNetworkConfiguration=e=>{const t=T(e),[a]=p(e);return a[t]};const g=e=>e.metamask.networksWithTransactionActivity;a.getNetworksWithActivity=g;a.getNetworksWithTransactionActivity=(0,i.createDeepEqualSelector)(g,(e=>e)),a.getEnabledNetworksByNamespace=(0,i.createDeepEqualSelector)(c.getEnabledNetworks,T,((e,t)=>{const{namespace:a}=(0,r.parseCaipChainId)(t);return e[a]??{}})),a.getEnabledChainIds=(0,i.createDeepEqualSelector)(o.getNetworkConfigurationsByChainId,c.getEnabledNetworks,T,((e,t,a)=>{const{namespace:n}=(0,r.parseCaipChainId)(a),s=t[n]||{};return Object.keys(e).filter((e=>s[e]))})),a.getEnabledNetworkClientIds=(0,i.createDeepEqualSelector)(o.getNetworkConfigurationsByChainId,c.getEnabledNetworks,T,((e,t,a)=>{const{namespace:n}=(0,r.parseCaipChainId)(a),s=t[n]||{};return Object.entries(e).reduce(((e,[t,a])=>(s[t]&&e.push(a.rpcEndpoints[a.defaultRpcEndpointIndex].networkClientId),e)),[])}))}}},{package:"$root$",file:"ui/selectors/multichain/networks.ts"}],[7822,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.selectThrottledOrigins=void 0;a.selectThrottledOrigins=e=>e.metamask.throttledOrigins}}},{package:"$root$",file:"ui/selectors/origin-throttling.ts"}],[7823,{"../../shared/lib/manifestFlags":5878,"lodash/merge":4913,reselect:5363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getRemoteFeatureFlags=void 0;var n,s=(n=e("lodash/merge"))&&n.__esModule?n:{default:n},r=e("reselect"),o=e("../../shared/lib/manifestFlags");a.getRemoteFeatureFlags=(0,r.createSelector)((()=>(0,o.getManifestFlags)().remoteFeatureFlags),(e=>e.metamask.remoteFeatureFlags),((e,t)=>(0,s.default)({},t,e)))}}},{package:"$root$",file:"ui/selectors/remote-feature-flags.ts"}],[7825,{"./social-sync":7826},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./social-sync");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"ui/selectors/seedless-onboarding/index.ts"}],[7826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getSocialLoginEmail=function(e){return e.metamask.socialLoginEmail},a.getSocialLoginType=function(e){return e.metamask.authConnection}}}},{package:"$root$",file:"ui/selectors/seedless-onboarding/social-sync.ts"}]],[],{});