LavaPack.loadBundle([[10,{"@metamask/account-tree-controller":1364},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTreeControllerInit=void 0;var r=e("@metamask/account-tree-controller");n.AccountTreeControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AccountTreeController({messenger:e,state:t.AccountTreeController})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/account-tree-controller-init.ts"}],[101,{"../../../shared/constants/hardware-wallets":5806,"../../../shared/constants/network":5813,"../../../shared/constants/preferences":5818,"@metamask/base-controller":1476,"@metamask/preferences-controller":2423},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultPreferencesControllerState=n.PreferencesController=void 0;var r=e("@metamask/base-controller"),s=e("@metamask/preferences-controller"),a=e("../../../shared/constants/network"),i=e("../../../shared/constants/hardware-wallets"),o=e("../../../shared/constants/preferences");function c(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}const l=()=>({selectedAddress:"",useBlockie:!1,usePhishDetect:!0,dismissSeedBackUpReminder:!1,overrideContentSecurityPolicyHeader:!0,useMultiAccountBalanceChecker:!0,useSafeChainsListValidation:!0,useTokenDetection:!0,useNftDetection:!0,use4ByteResolution:!0,useCurrencyRateCheck:!0,openSeaEnabled:!0,securityAlertsEnabled:!0,watchEthereumAccountEnabled:!1,addSnapAccountEnabled:!1,advancedGasFee:{},featureFlags:{},knownMethodData:{},currentLocale:"",identities:{},lostIdentities:{},forgottenPassword:!1,preferences:{autoLockTimeLimit:undefined,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:!0,smartTransactionsMigrationApplied:!1,showNativeTokenAsMainBalance:!1,useNativeCurrencyAsPrimaryCurrency:!0,hideZeroBalanceTokens:!1,petnamesEnabled:!0,featureNotificationsEnabled:!1,showConfirmationAdvancedDetails:!1,showMultiRpcModal:!1,privacyMode:!1,dismissSmartAccountSuggestionEnabled:!1,smartAccountOptIn:!0,tokenSortConfig:{key:"tokenFiatAmount",order:"dsc",sortCallback:"stringNumeric"},tokenNetworkFilter:{},skipDeepLinkInterstitial:!1},ipfsGateway:a.IPFS_DEFAULT_GATEWAY_URL,isIpfsGatewayEnabled:!0,useAddressBarEnsResolution:!0,ledgerTransportType:window.navigator.hid?i.LedgerTransportTypes.webhid:i.LedgerTransportTypes.u2f,snapRegistryList:{},theme:o.ThemeType.dark,snapsAddSnapAccountModalDismissed:!1,useExternalNameSources:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0,useExternalServices:!0,isMultiAccountBalancesEnabled:!0,showIncomingTransactions:{[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.MAINNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.GOERLI]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC_TESTNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM_SEPOLIA]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON_TESTNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE_TESTNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM_TESTNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.SEPOLIA]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_GOERLI]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_SEPOLIA]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_MAINNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM_TESTNET]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONRIVER]:!0,[s.ETHERSCAN_SUPPORTED_CHAIN_IDS.GNOSIS]:!0},manageInstitutionalWallets:!1});n.getDefaultPreferencesControllerState=l;const u={selectedAddress:{persist:!0,anonymous:!1},useBlockie:{persist:!0,anonymous:!0},usePhishDetect:{persist:!0,anonymous:!0},dismissSeedBackUpReminder:{persist:!0,anonymous:!0},overrideContentSecurityPolicyHeader:{persist:!0,anonymous:!0},useMultiAccountBalanceChecker:{persist:!0,anonymous:!0},useSafeChainsListValidation:{persist:!0,anonymous:!1},useTokenDetection:{persist:!0,anonymous:!0},useNftDetection:{persist:!0,anonymous:!0},use4ByteResolution:{persist:!0,anonymous:!0},useCurrencyRateCheck:{persist:!0,anonymous:!0},openSeaEnabled:{persist:!0,anonymous:!0},securityAlertsEnabled:{persist:!0,anonymous:!1},watchEthereumAccountEnabled:{persist:!0,anonymous:!1},addSnapAccountEnabled:{persist:!0,anonymous:!1},advancedGasFee:{persist:!0,anonymous:!0},featureFlags:{persist:!0,anonymous:!0},knownMethodData:{persist:!0,anonymous:!1},currentLocale:{persist:!0,anonymous:!0},identities:{persist:!0,anonymous:!1},lostIdentities:{persist:!0,anonymous:!1},forgottenPassword:{persist:!0,anonymous:!0},preferences:{persist:!0,anonymous:!0,properties:{smartTransactionsOptInStatus:{persist:!0,anonymous:!0},smartTransactionsMigrationApplied:{persist:!0,anonymous:!0}}},ipfsGateway:{persist:!0,anonymous:!1},isIpfsGatewayEnabled:{persist:!0,anonymous:!1},useAddressBarEnsResolution:{persist:!0,anonymous:!0},ledgerTransportType:{persist:!0,anonymous:!0},snapRegistryList:{persist:!0,anonymous:!1},theme:{persist:!0,anonymous:!0},snapsAddSnapAccountModalDismissed:{persist:!0,anonymous:!1},useExternalNameSources:{persist:!0,anonymous:!1},useTransactionSimulations:{persist:!0,anonymous:!0},enableMV3TimestampSave:{persist:!0,anonymous:!0},useExternalServices:{persist:!0,anonymous:!1},textDirection:{persist:!0,anonymous:!1},isMultiAccountBalancesEnabled:{persist:!0,anonymous:!0},showIncomingTransactions:{persist:!0,anonymous:!0},manageInstitutionalWallets:{persist:!0,anonymous:!1}};var d=new WeakSet;class p extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:u,name:"PreferencesController",state:{...l(),...t}}),c(this,d),this.messagingSystem.subscribe("AccountsController:stateChange",function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(d,this,m).bind(this)),globalThis.setPreference=(e,t)=>this.setFeatureFlag(e,t)}setPasswordForgotten(e){this.update((t=>{t.forgottenPassword=e}))}setUseBlockie(e){this.update((t=>{t.useBlockie=e}))}setUsePhishDetect(e){this.update((t=>{t.usePhishDetect=e}))}setUseMultiAccountBalanceChecker(e){this.update((t=>{t.useMultiAccountBalanceChecker=e}))}setUseSafeChainsListValidation(e){this.update((t=>{t.useSafeChainsListValidation=e}))}toggleExternalServices(e){this.update((t=>{t.useExternalServices=e})),this.setUseTokenDetection(e),this.setUseCurrencyRateCheck(e),this.setUsePhishDetect(e),this.setUseAddressBarEnsResolution(e),this.setOpenSeaEnabled(e),this.setUseNftDetection(e),this.setUseSafeChainsListValidation(e)}setUseTokenDetection(e){this.update((t=>{t.useTokenDetection=e}))}setUseNftDetection(e){this.update((t=>{t.useNftDetection=e}))}setUse4ByteResolution(e){this.update((t=>{t.use4ByteResolution=e}))}setUseCurrencyRateCheck(e){this.update((t=>{t.useCurrencyRateCheck=e}))}setOpenSeaEnabled(e){this.update((t=>{t.openSeaEnabled=e}))}setSecurityAlertsEnabled(e){this.update((t=>{t.securityAlertsEnabled=e}))}setAddSnapAccountEnabled(e){this.update((t=>{t.addSnapAccountEnabled=e}))}setUseExternalNameSources(e){this.update((t=>{t.useExternalNameSources=e}))}setUseTransactionSimulations(e){this.update((t=>{t.useTransactionSimulations=e}))}setAdvancedGasFee({chainId:e,gasFeePreferences:t}){const{advancedGasFee:n}=this.state;this.update((r=>{r.advancedGasFee={...n,[e]:t}}))}setTheme(e){this.update((t=>{t.theme=e}))}addKnownMethodData(e,t){const{knownMethodData:n}=this.state,r={...n};r[e]=t,this.update((e=>{e.knownMethodData=r}))}setCurrentLocale(e){const t=["ar","dv","fa","he","ku"].includes(e)?"rtl":"auto";return this.update((n=>{n.currentLocale=e,n.textDirection=t})),t}setSelectedAddress(e){const t=this.messagingSystem.call("AccountsController:getAccountByAddress",e);if(!t)throw new Error(`Identity for '${e} not found`);this.messagingSystem.call("AccountsController:setSelectedAccount",t.id)}getSelectedAddress(){return this.messagingSystem.call("AccountsController:getSelectedAccount").address}setAccountLabel(e,t){if(!e)throw new Error(`setAccountLabel requires a valid address, got ${String(e)}`);const n=this.messagingSystem.call("AccountsController:getAccountByAddress",e);return n?(this.messagingSystem.call("AccountsController:setAccountName",n.id,t),t):undefined}setFeatureFlag(e,t){const n={...this.state.featureFlags,[e]:t};return this.update((e=>{e.featureFlags=n})),n}setPreference(e,t){const n={...this.getPreferences(),[e]:t};return this.update((e=>{e.preferences=n})),n}getPreferences(){return this.state.preferences}getIpfsGateway(){return this.state.ipfsGateway}setIpfsGateway(e){return this.update((t=>{t.ipfsGateway=e})),e}setIsIpfsGatewayEnabled(e){this.update((t=>{t.isIpfsGatewayEnabled=e}))}setUseAddressBarEnsResolution(e){this.update((t=>{t.useAddressBarEnsResolution=e}))}setLedgerTransportPreference(e){return this.update((t=>{t.ledgerTransportType=e})),e}setDismissSeedBackUpReminder(e){this.update((t=>{t.dismissSeedBackUpReminder=e}))}setOverrideContentSecurityPolicyHeader(e){this.update((t=>{t.overrideContentSecurityPolicyHeader=e}))}setManageInstitutionalWallets(e){this.update((t=>{t.manageInstitutionalWallets=e}))}setServiceWorkerKeepAlivePreference(e){this.update((t=>{t.enableMV3TimestampSave=e}))}setSnapsAddSnapAccountModalDismissed(e){this.update((t=>{t.snapsAddSnapAccountModalDismissed=e}))}}function m(e){const{accounts:t,selectedAccount:n}=e.internalAccounts,r=t[n],{identities:s,lostIdentities:a}=this.state,i=Object.values(t).map((e=>e.address.toLowerCase())),o=Object.keys(s).reduce(((e,t)=>(i.includes(t.toLowerCase())&&(e[t]=s[t]),e)),{...a??{}}),c=Object.values(t).reduce(((e,t)=>(e[t.address]={address:t.address,name:t.metadata.name,lastSelected:t.metadata.lastSelected},e)),{});this.update((e=>{e.identities=c,e.lostIdentities=o,e.selectedAddress=(null==r?void 0:r.address)||""}))}n.PreferencesController=p}}},{package:"$root$",file:"app/scripts/controllers/preferences-controller.ts"}],[102,{"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationImage=async function(){return await s.default.runtime.getURL("../../images/icon-64.png")};var r,s=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"app/scripts/controllers/push-notifications/get-notification-image.ts"}],[103,{"../../../../shared/lib/translate":5897,"@metamask/notification-services-controller":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createNotificationMessage=function(e){return r.NotificationServicesPushController.Utils.createOnChainPushNotificationMessage(e,i)};var r=e("@metamask/notification-services-controller"),s=e("../../../../shared/lib/translate");const a=(...e)=>(0,s.t)(...e)??"",i={pushPlatformNotificationsFundsSentTitle:()=>a("pushPlatformNotificationsFundsSentTitle"),pushPlatformNotificationsFundsSentDescriptionDefault:()=>a("pushPlatformNotificationsFundsSentDescriptionDefault"),pushPlatformNotificationsFundsSentDescription:(e,t)=>a("pushPlatformNotificationsFundsSentDescription",e,t),pushPlatformNotificationsFundsReceivedTitle:()=>a("pushPlatformNotificationsFundsReceivedTitle"),pushPlatformNotificationsFundsReceivedDescriptionDefault:()=>a("pushPlatformNotificationsFundsReceivedDescriptionDefault"),pushPlatformNotificationsFundsReceivedDescription:(e,t)=>a("pushPlatformNotificationsFundsReceivedDescription",e,t),pushPlatformNotificationsSwapCompletedTitle:()=>a("pushPlatformNotificationsSwapCompletedTitle"),pushPlatformNotificationsSwapCompletedDescription:()=>a("pushPlatformNotificationsSwapCompletedDescription"),pushPlatformNotificationsNftSentTitle:()=>a("pushPlatformNotificationsNftSentTitle"),pushPlatformNotificationsNftSentDescription:()=>a("pushPlatformNotificationsNftSentDescription"),pushPlatformNotificationsNftReceivedTitle:()=>a("pushPlatformNotificationsNftReceivedTitle"),pushPlatformNotificationsNftReceivedDescription:()=>a("pushPlatformNotificationsNftReceivedDescription"),pushPlatformNotificationsStakingRocketpoolStakeCompletedTitle:()=>a("pushPlatformNotificationsStakingRocketpoolStakeCompletedTitle"),pushPlatformNotificationsStakingRocketpoolStakeCompletedDescription:()=>a("pushPlatformNotificationsStakingRocketpoolStakeCompletedDescription"),pushPlatformNotificationsStakingRocketpoolUnstakeCompletedTitle:()=>a("pushPlatformNotificationsStakingRocketpoolUnstakeCompletedTitle"),pushPlatformNotificationsStakingRocketpoolUnstakeCompletedDescription:()=>a("pushPlatformNotificationsStakingRocketpoolUnstakeCompletedDescription"),pushPlatformNotificationsStakingLidoStakeCompletedTitle:()=>a("pushPlatformNotificationsStakingLidoStakeCompletedTitle"),pushPlatformNotificationsStakingLidoStakeCompletedDescription:()=>a("pushPlatformNotificationsStakingLidoStakeCompletedDescription"),pushPlatformNotificationsStakingLidoStakeReadyToBeWithdrawnTitle:()=>a("pushPlatformNotificationsStakingLidoStakeReadyToBeWithdrawnTitle"),pushPlatformNotificationsStakingLidoStakeReadyToBeWithdrawnDescription:()=>a("pushPlatformNotificationsStakingLidoStakeReadyToBeWithdrawnDescription"),pushPlatformNotificationsStakingLidoWithdrawalRequestedTitle:()=>a("pushPlatformNotificationsStakingLidoWithdrawalRequestedTitle"),pushPlatformNotificationsStakingLidoWithdrawalRequestedDescription:()=>a("pushPlatformNotificationsStakingLidoWithdrawalRequestedDescription"),pushPlatformNotificationsStakingLidoWithdrawalCompletedTitle:()=>a("pushPlatformNotificationsStakingLidoWithdrawalCompletedTitle"),pushPlatformNotificationsStakingLidoWithdrawalCompletedDescription:()=>a("pushPlatformNotificationsStakingLidoWithdrawalCompletedDescription")}}}},{package:"$root$",file:"app/scripts/controllers/push-notifications/get-notification-message.ts"}],[104,{"../../platforms/extension":431,"./get-notification-image":102,"./get-notification-message":103},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.onPushNotificationClicked=async function(e,t){var n;e.notification.close();const r=t??(null==e||null===(n=e.notification)||void 0===n?void 0:n.data),s=`${c.getExtensionURL(null,null)}#notifications/${r.id}`;e.waitUntil(o.clients.openWindow(s))},n.onPushNotificationReceived=async function(e){const t=(0,i.createNotificationMessage)(e);if(!t)return;const n=null==o?void 0:o.registration;if(!n)return;const r=await(0,a.getNotificationImage)();await n.showNotification(t.title,{body:t.description,icon:r,tag:null==e?void 0:e.id,data:e})};var r,s=(r=e("../../platforms/extension"))&&r.__esModule?r:{default:r},a=e("./get-notification-image"),i=e("./get-notification-message");const o=self,c=new s.default}}},{package:"$root$",file:"app/scripts/controllers/push-notifications/index.ts"}],[105,{"../../../../shared/constants/common":5800,"../../../../shared/constants/gas":5805,"../../../../shared/constants/metametrics":5810,"../../../../shared/constants/network":5813,"../../../../shared/constants/smartTransactions":5822,"../../../../shared/constants/swaps":5825,"../../../../shared/constants/time":5827,"../../../../shared/lib/fetch-with-cache":5874,"../../../../shared/lib/swaps-utils":5889,"../../../../shared/lib/transactions-controller-utils":5894,"../../../../shared/modules/Numeric":5899,"../../../../shared/modules/conversion.utils":5904,"../../../../shared/modules/string-utils":5924,"../../../../shared/modules/swaps.utils":5925,"./swaps.constants":106,"./swaps.utils":107,"@ethersproject/contracts":581,"@ethersproject/providers":619,"@metamask/base-controller":1476,"@sentry/browser":3091,"bignumber.js":3997,"human-standard-token-abi":4698,lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@ethersproject/contracts"),s=e("@ethersproject/providers"),a=e("@metamask/base-controller"),i=e("@sentry/browser"),o=e("bignumber.js"),c=A(e("human-standard-token-abi")),l=e("lodash"),u=e("../../../../shared/constants/common"),d=e("../../../../shared/constants/gas"),p=e("../../../../shared/constants/metametrics"),m=e("../../../../shared/constants/network"),h=e("../../../../shared/constants/smartTransactions"),f=e("../../../../shared/constants/swaps"),g=e("../../../../shared/constants/time"),y=A(e("../../../../shared/lib/fetch-with-cache")),b=e("../../../../shared/lib/swaps-utils"),w=e("../../../../shared/lib/transactions-controller-utils"),S=e("../../../../shared/modules/conversion.utils"),v=e("../../../../shared/modules/Numeric"),T=e("../../../../shared/modules/string-utils"),E=e("../../../../shared/modules/swaps.utils"),k=e("./swaps.constants"),_=e("./swaps.utils");function A(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n){C(e,t),t.set(e,n)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return e.get(j(e,t))}function O(e,t,n){return e.set(j(e,t),n),n}function j(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const N={swapsState:{persist:!1,anonymous:!1}};var R=new WeakMap,x=new WeakMap,D=new WeakMap,B=new WeakMap,L=new WeakMap,U=new WeakMap,F=new WeakSet;class $ extends a.BaseController{constructor(e,t){var n,r,s;super({name:k.controllerName,metadata:N,messenger:e.messenger,state:{swapsState:{...(0,k.getDefaultSwapsControllerState)().swapsState,swapsFeatureFlags:(null==t||null===(n=t.swapsState)||void 0===n?void 0:n.swapsFeatureFlags)||{}}}}),C(r=this,s=F),s.add(r),M(this,"getBufferedGasLimit",void 0),M(this,"resetState",void 0),M(this,"trackMetaMetricsEvent",void 0),P(this,R,void 0),P(this,x,void 0),P(this,D,null),P(this,B,void 0),P(this,L,void 0),P(this,U,void 0),M(this,"_fetchTradesInfo",b.fetchTradesInfo),M(this,"__test__updateState",(e=>{this.update((t=>({swapsState:{...t.swapsState,...e.swapsState}})))})),this.messagingSystem.registerActionHandler("SwapsController:fetchAndSetQuotes",this.fetchAndSetQuotes.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSelectedQuoteAggId",this.setSelectedQuoteAggId.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:resetSwapsState",this.resetSwapsState.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsTokens",this.setSwapsTokens.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:clearSwapsQuotes",this.clearSwapsQuotes.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setApproveTxId",this.setApproveTxId.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setTradeTxId",this.setTradeTxId.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsTxGasPrice",this.setSwapsTxGasPrice.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsTxGasLimit",this.setSwapsTxGasLimit.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsTxMaxFeePerGas",this.setSwapsTxMaxFeePerGas.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsTxMaxFeePriorityPerGas",this.setSwapsTxMaxFeePriorityPerGas.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:safeRefetchQuotes",this.safeRefetchQuotes.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:stopPollingForQuotes",this.stopPollingForQuotes.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setBackgroundSwapRouteState",this.setBackgroundSwapRouteState.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:resetPostFetchState",this.resetPostFetchState.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsErrorKey",this.setSwapsErrorKey.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setInitialGasEstimate",this.setInitialGasEstimate.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setCustomApproveTxData",this.setCustomApproveTxData.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsLiveness",this.setSwapsLiveness.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsFeatureFlags",this.setSwapsFeatureFlags.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsUserFeeLevel",this.setSwapsUserFeeLevel.bind(this)),this.messagingSystem.registerActionHandler("SwapsController:setSwapsQuotesPollingLimitEnabled",this.setSwapsQuotesPollingLimitEnabled.bind(this)),this.getBufferedGasLimit=e.getBufferedGasLimit,this.trackMetaMetricsEvent=e.trackMetaMetricsEvent,this.resetState=()=>{this.update((e=>{e.swapsState={...(0,k.getDefaultSwapsControllerState)().swapsState,swapsFeatureFlags:null==e?void 0:e.swapsState.swapsFeatureFlags}}))},O(B,this,e.getEIP1559GasFeeEstimates),O(L,this,e.getLayer1GasFee),O(R,this,0),O(x,this,0),this._fetchTradesInfo=e.fetchTradesInfo||b.fetchTradesInfo}clearSwapsQuotes(){this.update((e=>{e.swapsState.quotes={},e.swapsState.selectedAggId=null,e.swapsState.topAggId=null}))}async fetchAndSetQuotes(e,t,n=!1){var r;if(!e)return null;let s;s=(null===(r=I(U,this))||void 0===r?void 0:r.clientId)===t.networkClientId?I(U,this):j(F,this,H).call(this,t.networkClientId);const{quotesPollingLimitEnabled:a,saveFetchedQuotes:i}=this.state.swapsState;n||O(x,this,0),I(D,this)&&clearTimeout(I(D,this)),n||this.setSwapsErrorKey("");const o=I(R,this)+1;O(R,this,o),i||this._setSaveFetchedQuotes(!0);let[c]=await Promise.all([this._fetchTradesInfo(e,{chainId:s.chainId}),this._setSwapsNetworkConfig(s)]);const{saveFetchedQuotes:u}=this.state.swapsState;if(!u)return[{},null];c=(0,l.mapValues)(c,(e=>({...e,sourceTokenInfo:null==t?void 0:t.sourceTokenInfo,destinationTokenInfo:null==t?void 0:t.destinationTokenInfo})));const d=s.chainId===m.CHAIN_IDS.OPTIMISM.toString(),p=s.chainId===m.CHAIN_IDS.BASE.toString();(d||p)&&Object.values(c).length>0&&await Promise.all(Object.values(c).map((async e=>{if(e.trade){const t=await I(L,this).call(this,{transactionParams:e.trade,networkClientId:s.clientId});e.multiLayerL1TradeFeeTotal=t}return e})));const h=Date.now();let g=!1;if(!(0,E.isSwapsDefaultTokenAddress)(e.sourceToken,s.chainId)&&Object.values(c).length){const t=await this._getERC20Allowance(e.sourceToken,e.fromAddress,s),[r]=Object.values(c);if(g=r.approvalNeeded&&(t.eq(0)||t.lt(r.sourceAmount))&&"wrappedNative"!==r.aggregator,g){if(!n&&r.approvalNeeded){const{gasLimit:e}=await this._timedoutGasReturn(r.approvalNeeded,r.aggregator);c=(0,l.mapValues)(c,(t=>t.approvalNeeded?{...t,approvalNeeded:{...t.approvalNeeded,gas:e||f.DEFAULT_ERC20_APPROVE_GAS}}:t))}}else c=(0,l.mapValues)(c,(e=>({...e,approvalNeeded:null})))}let y=null;if(g||null!=e&&e.balanceError||(c=await this._getAllQuotesWithGasEstimates(c)),0===Object.values(c).length)this.setSwapsErrorKey(f.QUOTES_NOT_AVAILABLE_ERROR);else{const e=await this.getTopQuoteWithCalculatedSavings({quotes:c});Array.isArray(e)&&(y=e[0],c=e[1])}if(I(R,this)!==o)throw new Error(f.SWAPS_FETCH_ORDER_CONFLICT);let{selectedAggId:b}=this.state.swapsState;return b&&c[b]||(b=null),this.update((n=>{n.swapsState.quotes=c,n.swapsState.fetchParams={...e,metaData:t},n.swapsState.quotesLastFetched=h,n.swapsState.selectedAggId=b,n.swapsState.topAggId=y})),a&&O(x,this,I(x,this)+1),!a||I(x,this)<k.POLL_COUNT_LIMIT+1?(this._pollForNewQuotes(),[c,y]):(this.resetPostFetchState(),this.setSwapsErrorKey(f.QUOTES_EXPIRED_ERROR),null)}async getTopQuoteWithCalculatedSavings({quotes:e,networkClientId:t}){var n;let r;if(t){const e=this.messagingSystem.call("NetworkController:getNetworkClientById",t);r=e.configuration.chainId}else{if(I(U,this)===undefined)throw new Error("There is no network set");r=I(U,this).chainId}const{marketData:s}=this._getTokenRatesState(),a=(null==s?void 0:s[r])??{},{customGasPrice:i,customMaxPriorityFeePerGas:c}=this.state.swapsState;if(0===Object.keys(e).length)return{};const p=(0,l.cloneDeep)(e),{gasFeeEstimates:m,gasEstimateType:h}=await I(B,this).call(this,{networkClientId:t});let f="0x0";if(h===d.GasEstimateTypes.feeMarket){const{high:{suggestedMaxPriorityFeePerGas:e},estimatedBaseFee:t}=m,n=(0,S.decGWEIToHexWEI)(Number(e)),r=new v.Numeric(t,10,u.EtherDenomination.GWEI).toDenomination(u.EtherDenomination.WEI);f=new v.Numeric(c||n,16).add(r).round(6).toString()}else h===d.GasEstimateTypes.legacy?f=i||(0,S.decGWEIToHexWEI)(Number(m.high)):h===d.GasEstimateTypes.ethGasPrice&&(f=i||(0,S.decGWEIToHexWEI)(Number(m.gasPrice)));let g,y="";Object.values(p).forEach((e=>{const{aggregator:t,approvalNeeded:n,averageGas:s,destinationAmount:i,destinationToken:c,destinationTokenInfo:l,gasEstimateWithRefund:d,sourceAmount:p,sourceToken:m,trade:h,fee:b,multiLayerL1TradeFeeTotal:_}=e;if(!h||!c)return;const A=(d?new o.BigNumber(d,16):new o.BigNumber(s||k.MAX_GAS_LIMIT,10)).plus((null==n?void 0:n.gas)||"0x0",16).toString(16);let P=(0,w.calcGasTotal)(A,f);null!==_&&(P=(0,S.sumHexes)(P||"0x0",_||"0x0"));const C=new v.Numeric(P,16,u.EtherDenomination.WEI).add(new v.Numeric(h.value,16,u.EtherDenomination.WEI)),M=C.toDenomination(u.EtherDenomination.ETH).round(6).value,I=(0,E.isSwapsDefaultTokenAddress)(m,r)?C.minus(new v.Numeric(p,10)).toDenomination(u.EtherDenomination.ETH).round(6).value:M,O=(0,w.calcTokenAmount)(i??"0",l.decimals),j=new o.BigNumber(100,10).minus(b,10).div(100),N=O.div(j).minus(O),R=Object.keys(a).find((e=>(0,T.isEqualCaseInsensitive)(e,c))),x=R?a[R]:null,D=(null==x?void 0:x.price)||1,B=O.times(D.toString(10),10),L=(0,E.isSwapsDefaultTokenAddress)(c,r)?1:null==x?void 0:x.price,U=L?B.minus(I,10):B;e.ethFee=I.toString(10),L&&(e.ethValueOfTokens=B.toString(10),e.overallValueOfQuote=U.toString(10),e.metaMaskFeeInEth=N.times(L.toString(10)).toString(10)),g&&!U.gt(g||0)||(y=t,g=U)}));const b=Object.keys(a).find((e=>{var t;return(0,T.isEqualCaseInsensitive)(e,null===(t=p[y])||void 0===t?void 0:t.destinationToken)})),A=b?a[b]:null;if((0,E.isSwapsDefaultTokenAddress)(null===(n=p[y])||void 0===n?void 0:n.destinationToken,r)||Boolean(null==A?void 0:A.price)){const e=p[y],{ethFee:t,metaMaskFeeInEth:n,ethValueOfTokens:r}=(0,_.getMedianEthValueQuote)(Object.values(p)),s=new o.BigNumber(e.ethValueOfTokens,10).minus(r,10).toString(10),a=new o.BigNumber(t).minus(e.ethFee,10).toString(10),i=e.metaMaskFeeInEth,c={performance:s,fee:a,total:new o.BigNumber(s).plus(a).minus(i).toString(10),metaMaskFee:i,medianMetaMaskFee:n};p[y].isBestQuote=!0,p[y].savings=c}return[y,p]}resetPostFetchState(){this.update((e=>{e.swapsState={...(0,k.getDefaultSwapsControllerState)().swapsState,tokens:e.swapsState.tokens,fetchParams:e.swapsState.fetchParams,swapsFeatureIsLive:e.swapsState.swapsFeatureIsLive,swapsQuoteRefreshTime:e.swapsState.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsState.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsState.swapsFeatureFlags}})),I(D,this)&&clearTimeout(I(D,this))}resetSwapsState(){this.update((e=>{e.swapsState={...(0,k.getDefaultSwapsControllerState)().swapsState,swapsQuoteRefreshTime:e.swapsState.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsState.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsState.swapsFeatureFlags}})),I(D,this)&&clearTimeout(I(D,this))}safeRefetchQuotes(){!I(D,this)&&this.state.swapsState.fetchParams&&this.fetchAndSetQuotes(this.state.swapsState.fetchParams,{...this.state.swapsState.fetchParams.metaData})}setApproveTxId(e){this.update((t=>{t.swapsState.approveTxId=e}))}setBackgroundSwapRouteState(e){this.update((t=>{t.swapsState.routeState=e}))}setCustomApproveTxData(e){this.update((t=>{t.swapsState.customApproveTxData=e}))}async setInitialGasEstimate(e){const t={...this.state.swapsState.quotes[e]},{gasLimit:n,simulationFails:r}=t.trade?await this._timedoutGasReturn(t.trade,t.aggregator):{gasLimit:null,simulationFails:!0};if(n&&!r){const e=(0,_.calculateGasEstimateWithRefund)(t.maxGas,t.estimatedRefund,n);t.gasEstimate=n,t.gasEstimateWithRefund=e}this.update((n=>{n.swapsState.quotes={...n.swapsState.quotes,[e]:t}}))}setSelectedQuoteAggId(e){this.update((t=>{t.swapsState.selectedAggId=e}))}setSwapsFeatureFlags(e){this.update((t=>{t.swapsState.swapsFeatureFlags=e}))}setSwapsErrorKey(e){this.update((t=>{t.swapsState.errorKey=e}))}setSwapsLiveness(e){const{swapsFeatureIsLive:t}=e;this.update((e=>{e.swapsState.swapsFeatureIsLive=t}))}setSwapsQuotesPollingLimitEnabled(e){this.update((t=>{t.swapsState.quotesPollingLimitEnabled=e}))}setSwapsTokens(e){this.update((t=>{t.swapsState.tokens=e}))}setSwapsTxGasLimit(e){this.update((t=>{t.swapsState.customMaxGas=e}))}setSwapsTxGasPrice(e){this.update((t=>{t.swapsState.customGasPrice=e}))}setSwapsTxMaxFeePerGas(e){this.update((t=>{t.swapsState.customMaxFeePerGas=e}))}setSwapsTxMaxFeePriorityPerGas(e){this.update((t=>{t.swapsState.customMaxPriorityFeePerGas=e}))}setSwapsUserFeeLevel(e){this.update((t=>{t.swapsState.swapsUserFeeLevel=e}))}setTradeTxId(e){this.update((t=>{t.swapsState.tradeTxId=e}))}stopPollingForQuotes(){I(D,this)&&clearTimeout(I(D,this))}async _fetchSwapsNetworkConfig(e){const t=await(0,y.default)({url:(0,b.getBaseApi)("network",e.chainId),fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e5},functionName:"_fetchSwapsNetworkConfig"}),{refreshRates:n,parameters:r={}}=t||{};if(!n||"number"!=typeof n.quotes||"number"!=typeof n.quotesPrefetching)throw new Error(`MetaMask - invalid response for refreshRates: ${t}`);return{quotes:1e3*n.quotes,quotesPrefetching:1e3*n.quotesPrefetching,stxGetTransactions:1e3*n.stxGetTransactions,stxBatchStatus:1e3*n.stxBatchStatus,stxStatusDeadline:n.stxStatusDeadline,stxMaxFeeMultiplier:r.stxMaxFeeMultiplier}}async _getAllQuotesWithGasEstimates(e){const t=await Promise.all(Object.values(e).map((async e=>{if(!e.trade)return{gasLimit:null,simulationFails:!0,aggId:e.aggregator};const{gasLimit:t,simulationFails:n}=await this._timedoutGasReturn(e.trade,e.aggregator);return{gasLimit:t,simulationFails:n,aggId:e.aggregator}}))),n={};return t.forEach((({gasLimit:t,simulationFails:r,aggId:s})=>{if(t&&!r){const r=(0,_.calculateGasEstimateWithRefund)(e[s].maxGas,e[s].estimatedRefund,t);n[s]={...e[s],gasEstimate:t,gasEstimateWithRefund:r}}else e[s].approvalNeeded&&(n[s]=e[s])})),n}async _getERC20Allowance(e,t,n){const s=new r.Contract(e,c.default,n.ethersProvider);return await s.allowance(t,f.SWAPS_CHAINID_CONTRACT_ADDRESS_MAP[n.chainId])}_getTokenRatesState(){const{marketData:e}=this.messagingSystem.call("TokenRatesController:getState");return{marketData:e}}_pollForNewQuotes(){const{swapsQuoteRefreshTime:e,swapsQuotePrefetchingRefreshTime:t,quotesPollingLimitEnabled:n}=this.state.swapsState;O(D,this,setTimeout((()=>{var e;this.fetchAndSetQuotes(this.state.swapsState.fetchParams,null===(e=this.state.swapsState.fetchParams)||void 0===e?void 0:e.metaData,!0)}),n?e:t))}_setSaveFetchedQuotes(e){this.update((t=>{t.swapsState.saveFetchedQuotes=e}))}async _setSwapsNetworkConfig(e){let t=null;try{t=await this._fetchSwapsNetworkConfig(e)}catch(e){console.error("Request for Swaps network config failed: ",e)}this.update((e=>{var n,r,s,a,i,o;e.swapsState.swapsQuoteRefreshTime=(null===(n=t)||void 0===n?void 0:n.quotes)||k.FALLBACK_QUOTE_REFRESH_TIME,e.swapsState.swapsQuotePrefetchingRefreshTime=(null===(r=t)||void 0===r?void 0:r.quotesPrefetching)||k.FALLBACK_QUOTE_REFRESH_TIME,e.swapsState.swapsStxGetTransactionsRefreshTime=(null===(s=t)||void 0===s?void 0:s.stxGetTransactions)||h.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,e.swapsState.swapsStxBatchStatusRefreshTime=(null===(a=t)||void 0===a?void 0:a.stxBatchStatus)||h.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,e.swapsState.swapsStxMaxFeeMultiplier=(null===(i=t)||void 0===i?void 0:i.stxMaxFeeMultiplier)||h.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER,e.swapsState.swapsStxStatusDeadline=(null===(o=t)||void 0===o?void 0:o.stxStatusDeadline)||h.FALLBACK_SMART_TRANSACTIONS_DEADLINE}))}_timedoutGasReturn(e,t=""){return new Promise((n=>{let r=!1;const s=setTimeout((()=>{r=!0,this.trackMetaMetricsEvent({event:p.MetaMetricsEventName.QuoteError,category:p.MetaMetricsEventCategory.Swaps,properties:{error_type:p.MetaMetricsEventErrorType.GasTimeout,aggregator:t}}),n({gasLimit:null,simulationFails:!0})}),5*g.SECOND),a={data:e.data,from:e.from,to:e.to,value:e.value};this.getBufferedGasLimit({txParams:a},1).then((({gasLimit:e,simulationFails:t})=>{r||(clearTimeout(s),n({gasLimit:e,simulationFails:t}))})).catch((e=>{(0,i.captureException)(e,{extra:{aggregator:t}}),r||(clearTimeout(s),n({gasLimit:null,simulationFails:!0}))}))}))}}function H(e){const t=this.messagingSystem.call("NetworkController:getNetworkClientById",e),{chainId:n}=t.configuration,r={client:t,clientId:e,chainId:n,ethersProvider:new s.Web3Provider(t.provider)};return O(U,this,r),r}n.default=$}}},{package:"$root$",file:"app/scripts/controllers/swaps/index.ts"}],[106,{"../../../../shared/constants/smartTransactions":5822,"../../../../shared/constants/time":5827},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.controllerName=n.POLL_COUNT_LIMIT=n.MAX_GAS_LIMIT=n.FALLBACK_QUOTE_REFRESH_TIME=void 0,n.getDefaultSwapsControllerState=function(){return{swapsState:{quotes:{},quotesPollingLimitEnabled:!1,fetchParams:null,tokens:null,tradeTxId:null,approveTxId:null,quotesLastFetched:null,customMaxGas:"",customGasPrice:null,customMaxFeePerGas:null,customMaxPriorityFeePerGas:null,swapsUserFeeLevel:"",selectedAggId:null,customApproveTxData:"",errorKey:"",topAggId:null,routeState:"",swapsFeatureIsLive:!0,saveFetchedQuotes:!1,swapsQuoteRefreshTime:a,swapsQuotePrefetchingRefreshTime:a,swapsStxBatchStatusRefreshTime:r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxStatusDeadline:r.FALLBACK_SMART_TRANSACTIONS_DEADLINE,swapsStxGetTransactionsRefreshTime:r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxMaxFeeMultiplier:r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER,swapsFeatureFlags:{}}}};var r=e("../../../../shared/constants/smartTransactions"),s=e("../../../../shared/constants/time");n.controllerName="SwapsController",n.MAX_GAS_LIMIT=25e5,n.POLL_COUNT_LIMIT=3;const a=n.FALLBACK_QUOTE_REFRESH_TIME=s.MINUTE}}},{package:"$root$",file:"app/scripts/controllers/swaps/swaps.constants.ts"}],[107,{"./swaps.constants":106,"bignumber.js":3997},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateGasEstimateWithRefund=function(e=s.MAX_GAS_LIMIT,t="0",n="0"){const a=new r.BigNumber(e,10).minus(t,10),i=a.lt(0);return!i&&a.lt(n,16)?`0x${a.toString(16)}`:n},n.getMedianEthValueQuote=function(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array param.");const t=[...e];if(t.sort(((e,t)=>{const n=new r.BigNumber(e.overallValueOfQuote,10),s=new r.BigNumber(t.overallValueOfQuote,10);return n.equals(s)?0:n.lessThan(s)?-1:1})),t.length%2==1){const e=t[(t.length-1)/2].overallValueOfQuote;return a(t.filter((t=>e===t.overallValueOfQuote)))}const n=t.length/2,s=n-1,i=t[n].overallValueOfQuote,o=t[s].overallValueOfQuote,c=t.filter((e=>i===e.overallValueOfQuote)),l=t.filter((e=>o===e.overallValueOfQuote)),u=a(c),d=a(l);return{ethFee:new r.BigNumber(u.ethFee,10).plus(d.ethFee,10).dividedBy(2).toString(10),metaMaskFeeInEth:new r.BigNumber(u.metaMaskFeeInEth,10).plus(d.metaMaskFeeInEth,10).dividedBy(2).toString(10),ethValueOfTokens:new r.BigNumber(u.ethValueOfTokens,10).plus(d.ethValueOfTokens,10).dividedBy(2).toString(10)}},n.meansOfQuotesFeesAndValue=a;var r=e("bignumber.js"),s=e("./swaps.constants");function a(e){const t=e.reduce(((e,t)=>({ethFee:e.ethFee.plus(t.ethFee,10),metaMaskFeeInEth:e.metaMaskFeeInEth.plus(t.metaMaskFeeInEth,10),ethValueOfTokens:e.ethValueOfTokens.plus(t.ethValueOfTokens,10)})),{ethFee:new r.BigNumber(0,10),metaMaskFeeInEth:new r.BigNumber(0,10),ethValueOfTokens:new r.BigNumber(0,10)});return{ethFee:t.ethFee.div(e.length,10).toString(10),metaMaskFeeInEth:t.metaMaskFeeInEth.div(e.length,10).toString(10),ethValueOfTokens:t.ethValueOfTokens.div(e.length,10).toString(10)}}}}},{package:"$root$",file:"app/scripts/controllers/swaps/swaps.utils.ts"}],[108,{"../../shared/constants/app":5798,"./lib/util":226,"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.onMessageReceived=n.checkForMultipleVersionsRunning=void 0;var r,s=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r},a=e("../../shared/constants/app"),i=e("./lib/util");const o="isRunning";n.onMessageReceived=e=>{e===o&&console.warn("Warning! You have multiple instances of MetaMask running!")};n.checkForMultipleVersionsRunning=async()=>{if((0,i.getPlatform)()!==a.PLATFORM_CHROME&&(0,i.getPlatform)()!==a.PLATFORM_FIREFOX)return;const e=(0,i.getPlatform)()===a.PLATFORM_CHROME?a.CHROME_BUILD_IDS:a.FIREFOX_BUILD_IDS,t=s.default.runtime.id;for(const n of e)if(n!==t)try{await s.default.runtime.sendMessage(n,o)}catch(e){}}}}},{package:"$root$",file:"app/scripts/detect-multiple-instances.js"}],[109,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={config:{}}}}},{package:"$root$",file:"app/scripts/first-time-state.js"}],[11,{"@metamask/assets-controllers":1457},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetsContractControllerInit=void 0;var r=e("@metamask/assets-controllers");n.AssetsContractControllerInit=({controllerMessenger:e,getGlobalChainId:t})=>({controller:new r.AssetsContractController({messenger:e,chainId:t()}),memStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/assets/assets-contract-controller-init.ts"}],[110,{"../../../shared/notifications":5928,"../../../test/e2e/default-fixture":5933,"../../../test/e2e/fixture-builder":5934,"../lib/encryptor-factory":142,"./with-address-book":111,"./with-app-state":112,"./with-confirmed-transactions":113,"./with-erc20-tokens":114,"./with-networks":115,"./with-preferences":116,"./with-unread-notifications":117,"@metamask/base-controller":1476,"@metamask/keyring-controller":2084,"@metamask/scure-bip39/dist/wordlists/english":2528,buffer:4106},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.generateWalletState=async function(){const e=new l.default({inputChainId:"0xaa36a7"}),{vault:n,accounts:r}=await async function(e,n){const r=(new s.Messenger).getRestricted({name:"KeyringController"}),o=new a.KeyringController({encryptor:(0,u.encryptorFactory)(6e5),messenger:r}),c=t.from(e),l=e=>{const t=e.toString().split(" ").map((e=>i.wordlist.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)};await o.createNewVaultAndRestore(n,l(c));const d=[],p=o.state.keyrings[0].accounts[0];d.push(p);for(let e=1;e<b.withAccounts;e++){const t=await o.addNewAccount(e);d.push(t)}const{vault:m}=o.state;return{vault:m,accounts:d}}(c.E2E_SRP,null);return e.withAccountsController(function(e){console.log("Generating AccountsController state");const t={selectedAccount:"account-id",accounts:{}};return e.forEach(((e,n)=>{t.accounts[`acount-id-${n}`]={selectedAccount:"account-id",id:"account-id",address:e,metadata:{name:`Account ${n+1}`,lastSelected:16655076e5,keyring:{type:"HD Key Tree"}},options:{},methods:["personal_sign","eth_signTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4"],type:"eip155:eoa"}})),{internalAccounts:t}}(r)).withAddressBookController(function(){console.log("Generating AddressBookController state");const e=b.withContacts;if(e>0)return(0,f.withAddressBook)(e);return{}}()).withAnnouncementController(function(){console.log("Generating AnnouncementController state");return Object.keys(o.UI_NOTIFICATIONS).reduce(((e,t)=>(e[t]={...o.UI_NOTIFICATIONS[t],isShown:!0},e)),{})}()).withAppStateController(d.FIXTURES_APP_STATE).withKeyringController(function(e){return console.log("Generating KeyringController state"),{...(0,c.defaultFixture)().data.KeyringController,vault:e}}(n)).withNetworkController(function(){console.log("Generating NetworkController state");const e={...(0,c.defaultFixture)().data.NetworkController,networkConfigurations:{},networksMetadata:{sepolia:{EIPS:{1559:!0},status:"available"}},selectedNetworkClientId:"sepolia"};if(b.withNetworks)return{...e,...p.FIXTURES_NETWORKS};return e}()).withNotificationServicesController(function(e){console.log("Generating NotificationController state");let t={};b.withUnreadNotifications>0&&(t=(0,y.withUnreadNotifications)(e,b.withUnreadNotifications));return t}(r[0])).withPreferencesController(function(e){console.log("Generating PreferencesController state");let t={};b.withPreferences&&(t=m.FIXTURES_PREFERENCES);return t.identities=Object.assign(...e.map(((e,t)=>({[e]:{address:e,lastSelected:1725363500048,name:`Account ${t+1}`}})))),t.lostIdentities=Object.assign(...e.map(((e,t)=>({[e]:{address:e,lastSelected:1725363500048,name:`Account ${t+1}`}})))),t}(r)).withTokensController(function(e){console.log("Generating TokensController state");const t=h.FIXTURES_ERC20_TOKENS;if(b.withErc20Tokens){for(const n of Object.values(t.allTokens))n[e]=n.myAccount,delete n.myAccount;return t}return{}}(r[0])).withTransactionController(function(e){console.log("Generating TransactionController state");let t={};b.withConfirmedTransactions>0&&(t=(0,g.withConfirmedTransactions)(e,b.withConfirmedTransactions));return t}(r[0])),e.fixture.data};var r,s=e("@metamask/base-controller"),a=e("@metamask/keyring-controller"),i=e("@metamask/scure-bip39/dist/wordlists/english"),o=e("../../../shared/notifications"),c=e("../../../test/e2e/default-fixture"),l=(r=e("../../../test/e2e/fixture-builder"))&&r.__esModule?r:{default:r},u=e("../lib/encryptor-factory"),d=e("./with-app-state"),p=e("./with-networks"),m=e("./with-preferences"),h=e("./with-erc20-tokens"),f=e("./with-address-book"),g=e("./with-confirmed-transactions"),y=e("./with-unread-notifications");const b={}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/fixtures/generate-wallet-state.js"}],[111,{"../../../shared/constants/network":5813},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.withAddressBook=void 0;var r=e("../../../shared/constants/network");const s=()=>{let e="0x";for(let t=0;t<40;t++)e+="0123456789abcdef"[Math.floor(16*Math.random())];return e};n.withAddressBook=e=>{const t=[r.CHAIN_IDS.MAINNET,r.CHAIN_IDS.SEPOLIA],n={};return t.forEach((t=>{n[t]={};for(let r=1;r<=e;r++){const e=s();n[t][e]={address:e,chainId:t,isEns:!1,memo:"",name:`Contact ${r}`}}})),{addressBook:n}}}}},{package:"$root$",file:"app/scripts/fixtures/with-address-book.js"}],[112,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FIXTURES_APP_STATE=void 0;n.FIXTURES_APP_STATE={showProductTour:!1}}}},{package:"$root$",file:"app/scripts/fixtures/with-app-state.js"}],[113,{"../../../shared/constants/network":5813,uuid:5741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.withConfirmedTransactions=void 0;var r=e("uuid"),s=e("../../../shared/constants/network");n.withConfirmedTransactions=(e,t)=>{const n=[s.CHAIN_IDS.MAINNET,s.CHAIN_IDS.SEPOLIA],a={};return n.forEach((n=>{for(let s=0;s<t;s++){const t=(0,r.v4)(),s={chainId:n,dappSuggestedGasFees:{gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00"},history:[{chainId:n,dappSuggestedGasFees:{gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00"},id:t,loadingDefaults:!0,origin:"https://metamask.github.io",status:"confirmed",time:Date.now(),txParams:{from:e,gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318c334780961fb129d2a6c30d0763d9a5c970",value:"0x29a2241af62c0000"},type:"simpleSend"},[{note:"Added new confirmed transaction.",op:"replace",path:"/loadingDefaults",timestamp:Date.now(),value:!1},{op:"add",path:"/simulationData",value:{error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]},note:"TransactionController#updateSimulationData - Update simulation data",timestamp:Date.now()}]],simulationData:{error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]},id:t,loadingDefaults:!1,origin:"https://metamask.github.io",status:"confirmed",time:Date.now(),txParams:{from:e,gas:"0x5208",maxFeePerGas:"0x59682f0c",maxPriorityFeePerGas:"0x59682f00",to:"0x2f318c334780961fb129d2a6c30d0763d9a5c970",value:"0x29a2241af62c0000"},type:"simpleSend"};a[t]=s}})),{transactions:a}}}}},{package:"$root$",file:"app/scripts/fixtures/with-confirmed-transactions.js"}],[114,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FIXTURES_ERC20_TOKENS=void 0;const r=[{address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",symbol:"DAI",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x6b175474e89094c44da98b954eedeac495271d0f.png",isERC721:!1,aggregators:[]},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",symbol:"USDC",decimals:6,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48.png",isERC721:!1,aggregators:[]},{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",symbol:"USDT",decimals:6,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xdAC17F958D2ee523a2206206994597C13D831ec7.png",isERC721:!1,aggregators:[]},{address:"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F",symbol:"SNX",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F.png",isERC721:!1,aggregators:[]},{address:"0x111111111117dC0aa78b770fA6A738034120C302",symbol:"1INCH",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x111111111117dC0aa78b770fA6A738034120C302.png",isERC721:!1,aggregators:[]},{address:"0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0",symbol:"MATIC",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0.png",isERC721:!1,aggregators:[]},{address:"0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE",symbol:"SHIB",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE.png",isERC721:!1,aggregators:[]},{address:"0xFd09911130e6930Bf87F2B0554c44F400bD80D3e",symbol:"ETHIX",decimals:18,image:"https://static.metafi.codefi.network/api/v1/tokenIcons/1/0xFd09911130e6930Bf87F2B0554c44F400bD80D3e.png",isERC721:!1,aggregators:[]}];n.FIXTURES_ERC20_TOKENS={tokens:r,ignoredTokens:[],detectedTokens:[],allTokens:{"0x1":{myAccount:r}},allIgnoredTokens:{},allDetectedTokens:{}}}}},{package:"$root$",file:"app/scripts/fixtures/with-erc20-tokens.js"}],[115,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FIXTURES_NETWORKS=void 0;n.FIXTURES_NETWORKS={providerConfig:{chainId:"0xaa36a7",rpcPrefs:{blockExplorerUrl:"https://sepolia.etherscan.io"},ticker:"SepoliaETH",type:"sepolia"},networkConfigurations:{networkConfigurationId:{chainId:"0xaa36a7",nickname:"Sepolia",rpcPrefs:{},rpcUrl:"https://sepolia.infura.io/v3/",ticker:"SepoliaETH",networkConfigurationId:"networkConfigurationId"},optimism:{chainId:"0xa",id:"optimism",nickname:"OP Mainnet",rpcPrefs:{blockExplorerUrl:"https://optimistic.etherscan.io/",imageUrl:"./images/optimism.svg"},rpcUrl:"https://optimism-mainnet.infura.io/v3/",ticker:"ETH"},base:{chainId:"0x2105",id:"base",nickname:"Base Mainnet",rpcPrefs:{blockExplorerUrl:"https://basescan.org",imageUrl:"./images/base.svg"},rpcUrl:"https://mainnet.base.org",ticker:"ETH"},polygon:{chainId:"0x89",id:"polygon",nickname:"Polygon Mainnet",rpcPrefs:{blockExplorerUrl:"https://polygonscan.com/",imageUrl:"./images/matic-token.svg"},rpcUrl:"https://polygon-mainnet.infura.io/v3/",ticker:"MATIC"},binance:{chainId:"0x38",id:"binance",nickname:"BNB Chain",rpcPrefs:{blockExplorerUrl:"https://bscscan.com/",imageUrl:"./images/bnb.svg"},rpcUrl:"https://bsc-dataseed.binance.org/",ticker:"BNB"},gnosis:{id:"gnosis",rpcUrl:"https://rpc.gnosischain.com",chainId:"0x64",ticker:"XDAI",nickname:"Gnosis",rpcPrefs:{blockExplorerUrl:"https://gnosisscan.io",imageUrl:"./images/gnosis.svg"}},arbitrum:{id:"arbitrum",rpcUrl:"https://arbitrum-mainnet.infura.io/v3/",chainId:"0xa4b1",ticker:"ETH",nickname:"Arbitrum One",rpcPrefs:{blockExplorerUrl:"https://explorer.arbitrum.io",imageUrl:"./images/arbitrum.svg"}},avalanche:{id:"avalanche",rpcUrl:"https://avalanche-mainnet.infura.io/v3/",chainId:"0xa86a",ticker:"AVAX",nickname:"Avalanche Network C-Chain",rpcPrefs:{blockExplorerUrl:"https://snowtrace.io/",imageUrl:"./images/avax-token.svg"}},celo:{id:"celo",rpcUrl:"https://celo-mainnet.infura.io/v3/",chainId:"0xa4ec",ticker:"CELO",nickname:"Celo Mainnet",rpcPrefs:{blockExplorerUrl:"https://celoscan.io",imageUrl:"./images/celo.svg"}},zkSync:{id:"zkSync",rpcUrl:"https://mainnet.era.zksync.io",chainId:"0x144",ticker:"ETH",nickname:"zkSync Era Mainnet",rpcPrefs:{blockExplorerUrl:"https://explorer.zksync.io/",imageUrl:"./images/zk-sync.svg"}},localhost:{id:"localhost",rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{blockExplorerUrl:"",imageUrl:""}}}}}}},{package:"$root$",file:"app/scripts/fixtures/with-networks.js"}],[116,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FIXTURES_PREFERENCES=void 0;n.FIXTURES_PREFERENCES={preferences:{hideZeroBalanceTokens:!1,showExtensionInFullSizeView:!1,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0,featureNotificationsEnabled:!0,showTokenAutodetectModal:!1,showNftAutodetectModal:!1,showConfirmationAdvancedDetails:!1,privacyMode:!1},featureFlags:{sendHexData:!0},firstTimeFlowType:"import",completedOnboarding:!0,currentLocale:"en",knownMethodData:{},use4ByteResolution:!0,participateInMetaMetrics:!0,dataCollectionForMarketing:!0,useNftDetection:!0,usePhishDetect:!0,useTokenDetection:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,theme:"dark",useExternalNameSources:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0,useExternalServices:!0,isBackupAndSyncEnabled:!0,isAccountSyncingEnabled:!0}}}},{package:"$root$",file:"app/scripts/fixtures/with-preferences.js"}],[117,{uuid:5741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.withUnreadNotifications=void 0;var r=e("uuid");n.withUnreadNotifications=(e,t)=>{const n=[];for(let s=0;s<t;s++){const t=(0,r.v4)(),s=(0,r.v4)(),a=`0x${(0,r.v4)().replace(/-/gu,"").padEnd(64,"0")}`,i={address:e,block_number:59796924,block_timestamp:"1721922504",chain_id:1,created_at:(new Date).toISOString(),data:{to:e,from:e,kind:"eth_received",amount:{eth:"0.000100000000000000",usd:"0.27"},network_fee:{gas_price:"30000000078",native_token_price_in_usd:"0.497927"}},id:t,trigger_id:s,tx_hash:a,unread:!0,type:"eth_received",createdAt:(new Date).toISOString(),isRead:!1};n.push(i)}return{isFeatureAnnouncementsEnabled:!0,isMetamaskNotificationsFeatureSeen:!0,isNotificationServicesEnabled:!0,metamaskNotificationsReadList:[],metamaskNotificationsList:n}}}}},{package:"$root$",file:"app/scripts/fixtures/with-unread-notifications.js"}],[118,{"@metamask/name-controller":2309},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeType=n.AbstractPetnamesBridge=void 0;var r=e("@metamask/name-controller");function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){i(e,t),t.set(e,n)}function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return e.get(l(e,t))}function c(e,t,n){return e.set(l(e,t),n),n}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}let u=n.ChangeType=function(e){return e.ADDED="ADDED",e.UPDATED="UPDATED",e.DELETED="DELETED",e}({});var d=function(e){return e.SOURCE_TO_PETNAMES="Source->Petnames",e.PETNAMES_TO_SOURCE="Petnames->Source",e}(d||{});function p({type:e,variation:t,value:n}){return`${e}/${t}/${e===r.NameType.ETHEREUM_ADDRESS?n.toLowerCase():n}`}var m=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakSet;function y(e){if(o(f,this)===e)throw new Error(`Attempted to synchronize recursively in same direction: ${e}`);if(null!==o(f,this))return;c(f,this,e);const[t,n]="Source->Petnames"===e?[this.getSourceEntries(),l(g,this,b).call(this)]:[l(g,this,b).call(this),this.getSourceEntries()],r=l(g,this,S).call(this,n,t);l(g,this,v).call(this,r),c(f,this,null)}function b(){const{names:e}=o(h,this).state,t=[];for(const n of Object.values(r.NameType))for(const r of Object.keys(e[n]))for(const s of Object.keys(e[n][r])){const{name:a,sourceId:i,origin:o}=e[n][r][s];if(!a)continue;const c={value:r,type:n,name:a,variation:s,sourceId:i??undefined,origin:o??undefined};this.shouldSyncPetname(c)&&t.push(c)}return t}function w(e,t){e===u.DELETED?(delete t.sourceId,delete t.origin,o(h,this).setName({...t,name:null})):o(h,this).setName(t)}function S(e,t){const n=[],r=[],s=[],a=new Map(e.map((e=>[p(e),e]))),i=new Map(t.map((e=>[p(e),e])));return i.forEach(((e,t)=>{const s=a.get(t);s?e.name!==s.name&&r.push(e):n.push(e)})),a.forEach(((e,t)=>{i.has(t)||s.push(e)})),{[u.ADDED]:n,[u.UPDATED]:r,[u.DELETED]:s}}function v(e){const t=o(f,this)===d.SOURCE_TO_PETNAMES?l(g,this,w).bind(this):this.updateSourceEntry.bind(this);for(const n of Object.values(u))for(const r of e[n])t(n,r)}n.AbstractPetnamesBridge=class{constructor({isTwoWay:e,nameController:t,messenger:n}){var r,o;i(r=this,o=g),o.add(r),a(this,m,void 0),a(this,h,void 0),a(this,f,null),s(this,"messenger",void 0),c(m,this,e),c(h,this,t),this.messenger=n}init(){o(m,this)&&this.messenger.subscribe("NameController:stateChange",(()=>l(g,this,y).call(this,d.PETNAMES_TO_SOURCE))),this.onSourceChange((()=>l(g,this,y).call(this,d.SOURCE_TO_PETNAMES)))}updateSourceEntry(e,t){throw new Error("updateSourceEntry must be overridden for two-way bridges")}shouldSyncPetname(e){return!0}}}}},{package:"$root$",file:"app/scripts/lib/AbstractPetnamesBridge.ts"}],[119,{"./AbstractPetnamesBridge":118,"@metamask/name-controller":2309},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountIdentitiesPetnamesBridge=void 0;var r=e("@metamask/name-controller"),s=e("./AbstractPetnamesBridge");class a extends s.AbstractPetnamesBridge{constructor({nameController:e,messenger:t}){super({isTwoWay:!1,nameController:e,messenger:t})}getSourceEntries(){return this.messenger.call("AccountsController:listAccounts").map((e=>({value:e.address,type:r.NameType.ETHEREUM_ADDRESS,name:e.metadata.name,sourceId:undefined,variation:r.FALLBACK_VARIATION,origin:r.NameOrigin.ACCOUNT_IDENTITY})))}onSourceChange(e){this.messenger.subscribe("AccountsController:stateChange",e)}shouldSyncPetname(e){return e.origin===r.NameOrigin.ACCOUNT_IDENTITY}}n.AccountIdentitiesPetnamesBridge=a}}},{package:"$root$",file:"app/scripts/lib/AccountIdentitiesPetnamesBridge.ts"}],[12,{"./assets-contract-controller-init":11,"./nft-controller-init":13,"./nft-detection-controller-init":14,"./token-rates-controller-init":15},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AssetsContractControllerInit",{enumerable:!0,get:function(){return i.AssetsContractControllerInit}}),Object.defineProperty(n,"NftControllerInit",{enumerable:!0,get:function(){return s.NftControllerInit}}),Object.defineProperty(n,"NftDetectionControllerInit",{enumerable:!0,get:function(){return a.NftDetectionControllerInit}}),Object.defineProperty(n,"TokenRatesControllerInit",{enumerable:!0,get:function(){return r.TokenRatesControllerInit}});var r=e("./token-rates-controller-init"),s=e("./nft-controller-init"),a=e("./nft-detection-controller-init"),i=e("./assets-contract-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/assets/index.ts"}],[120,{"./AbstractPetnamesBridge":118,"@metamask/name-controller":2309,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookPetnamesBridge=void 0;var r=e("@metamask/name-controller"),s=e("@metamask/utils"),a=e("./AbstractPetnamesBridge");function i(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function o(e,t){return e.get(c(e,t))}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var l=new WeakMap;class u extends a.AbstractPetnamesBridge{constructor({addressBookController:e,nameController:t,messenger:n}){var r,s,a;super({isTwoWay:!0,nameController:t,messenger:n}),i(this,l,void 0),s=this,a=e,(r=l).set(c(r,s),a)}getSourceEntries(){const e=[],{state:t}=o(l,this);for(const n of Object.keys(t.addressBook)){if(!(0,s.isStrictHexString)(n))continue;const a=t.addressBook[n];for(const s of Object.keys(a)){const a=t.addressBook[n][s],i=n.toLowerCase(),{name:o,isEns:c}=a;null!=o&&o.length&&null!=s&&s.length&&e.push({value:s,name:o,variation:i,type:r.NameType.ETHEREUM_ADDRESS,sourceId:c?"ens":undefined,origin:r.NameOrigin.ADDRESS_BOOK})}}return e}updateSourceEntry(e,t){e===a.ChangeType.DELETED?o(l,this).delete(t.variation,t.value):o(l,this).set(t.value,t.name,t.variation)}onSourceChange(e){this.messenger.subscribe("AddressBookController:stateChange",e)}}n.AddressBookPetnamesBridge=u}}},{package:"$root$",file:"app/scripts/lib/AddressBookPetnamesBridge.ts"}],[121,{"@metamask/base-controller":1476,"@metamask/obs-store":2378},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/obs-store"),s=e("@metamask/base-controller");function a(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var c=new WeakSet;class l extends r.ObservableStore{constructor({config:e,controllerMessenger:t,state:n,persist:r}){super(n),a(this,c),i(this,"config",{}),this.persist=r,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();const t={};for(const r of Object.keys(e)){var n;if(!e[r])throw new Error(`Undefined '${r}'`);const a=e[r];a.subscribe?e[r].subscribe((e=>{o(c,this,u).call(this,r,e)})):this.persist?this.controllerMessenger.subscribe(`${a.name}:stateChange`,((t,n)=>{o(c,this,d).call(this,e[r].metadata,n)&&o(c,this,u).call(this,r,(0,s.getPersistentState)(t,e[r].metadata))})):this.controllerMessenger.subscribe(`${a.name}:stateChange`,(e=>o(c,this,u).call(this,r,e)));const i=a.state??(null===(n=a.getState)||void 0===n?void 0:n.call(a));t[r]=this.persist&&e[r].metadata?(0,s.getPersistentState)(i,e[r].metadata):i}this.updateState(t)}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const n=this.config[t],r=n.getState?n.getState():n.state;e={...e,...r}}return e}}function u(e,t){const n=this.getState()[e];this.updateState({[e]:t}),this.emit("stateChange",{oldState:n,newState:t,controllerKey:e})}function d(e,t){return t.some((t=>{if(0===t.path.length)return!0;const n=t.path[0];return!e[n]||e[n].persist}))}n.default=l}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[122,{"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CronjobControllerStorageManager=n.CronjobControllerStorageKey=void 0;var r,s=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r};function a(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function i(e,t){return e.get(c(e,t))}function o(e,t,n){return e.set(c(e,t),n),n}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const l=n.CronjobControllerStorageKey="temp-cronjob-storage";var u=new WeakMap,d=new WeakMap;n.CronjobControllerStorageManager=class{constructor(){a(this,u,null),a(this,d,!1)}async init(){o(u,this,(await s.default.storage.local.get(l))[l]),o(d,this,!0)}getInitialState(){if(!i(d,this))throw new Error("CronjobControllerStorageManager not yet initialized");return i(u,this)}set(e){if(!i(d,this))throw new Error("CronjobControllerStorageManager not yet initialized");s.default.storage.local.set({[l]:e}).catch(console.error)}}}}},{package:"$root$",file:"app/scripts/lib/CronjobControllerStorageManager.ts"}],[123,{"./state-utils":200,"@metamask/utils":2974,uuid:5741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PatchStore=void 0;var r=e("@metamask/utils"),s=e("uuid"),a=e("./state-utils");function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=(0,r.createProjectLogger)("patch-store");n.PatchStore=class{constructor(e){i(this,"id",void 0),i(this,"observableStore",void 0),i(this,"pendingPatches",new Map),i(this,"listener",void 0),this.id=(0,s.v4)(),this.observableStore=e,this.listener=this._onStateChange.bind(this),this.observableStore.on("stateChange",this.listener),o("Created",this.id)}flushPendingPatches(){const e=[...this.pendingPatches.values()];this.pendingPatches.clear();for(const t of e)o("Flushed",t.path.join("."),this.id,t);return e}destroy(){this.observableStore.removeListener("stateChange",this.listener),o("Destroyed",this.id)}_onStateChange({oldState:e,newState:t}){const n=(0,a.sanitizeUIState)(t),r=this._generatePatches(e,n),s=Boolean(t.vault);if(s&&r.push({op:"replace",path:["isInitialized"],value:s}),r.length)for(const e of r){const t=e.path.join(".");this.pendingPatches.set(t,e),o("Updated",t,this.id,e)}}_generatePatches(e,t){return Object.keys(t).map((n=>{const r=e[n],s=t[n];return r===s?null:{op:"replace",path:[n],value:s}})).filter(Boolean)}}}}},{package:"$root$",file:"app/scripts/lib/PatchStore.ts"}],[124,{"@metamask/name-controller":2309,"@metamask/snaps-utils":2853,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsNameProvider=void 0;var r,s=e("@metamask/name-controller"),a=e("@metamask/snaps-utils"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r};function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t){return e.get(l(e,t))}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var u=new WeakMap,d=new WeakSet;function p(){const e=c(u,this).call("PermissionController:getState").subjects;return c(u,this).call("SnapController:getAll").filter((({id:t})=>{var n;return null===(n=e[t])||void 0===n?void 0:n.permissions["endowment:name-lookup"]}))}async function m(e,t){const{variation:n,value:r}=t,s=e.id,o={chainId:`eip155:${parseInt(n,16)}`,address:r};let l,d;try{const t=await c(u,this).call("SnapController:handleRequest",{snapId:e.id,origin:"metamask",handler:a.HandlerType.OnNameLookup,request:{jsonrpc:"2.0",method:" ",params:o}}),n=null==t?void 0:t.resolvedDomains;l=n?[...new Set(n.map((e=>e.resolvedDomain)))]:[]}catch(t){i.default.error("Snap name provider request failed",{snapId:e.id,request:o,error:t}),d=t}return{sourceId:s,result:{proposedNames:l,error:d}}}n.SnapsNameProvider=class{constructor({messenger:e}){var t,n,r;!function(e,t){o(e,t),t.add(e)}(this,d),function(e,t,n){o(e,t),t.set(e,n)}(this,u,void 0),n=this,r=e,(t=u).set(l(t,n),r)}getMetadata(){const e=l(d,this,p).call(this);return{sourceIds:{[s.NameType.ETHEREUM_ADDRESS]:e.map((e=>e.id))},sourceLabels:e.reduce(((e,t)=>{const n=c(u,this).call("SnapController:get",t.id),r=null==n?void 0:n.manifest.proposedName;return{...e,[t.id]:r||t.id}}),{})}}async getProposedNames(e){const t=l(d,this,p).call(this);return{results:(await Promise.all(t.map((t=>l(d,this,m).call(this,t,e))))).reduce(((e,t)=>{const{sourceId:n,result:r}=t;return{...e,[n]:r}}),{})}}}}}},{package:"$root$",file:"app/scripts/lib/SnapsNameProvider.ts"}],[125,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.WeakRefObjectMap=void 0;class s{constructor(){r(this,"map",void 0),this.map=new Map}set(e,t){const n={};for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const r=t[e];if("object"!=typeof r||null===r)throw new Error(`Property ${String(e)} is not an object and cannot be weakly referenced.`);n[e]=new WeakRef(r)}return this.map.set(e,n),this}get(e){const t=this.map.get(e);if(!t)return undefined;const n={};for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const s=t[r].deref();if(s===undefined)return this.map.delete(e),undefined;n[r]=s}return n}has(e){return this.get(e)!==undefined}delete(e){return this.get(e)!==undefined&&this.map.delete(e)}clear(){this.map.clear()}get size(){return this.map.size}entries(){const e=[];return this.map.forEach(((t,n)=>{const r=this.get(n);r!==undefined&&e.push([n,r])})),e.values()}keys(){return this.map.keys()}values(){const e=[];return this.map.forEach(((t,n)=>{const r=this.get(n);r!==undefined&&e.push(r)})),e.values()}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return"WeakRefObjectMap"}forEach(e,t){this.map.forEach(((n,r)=>{const s=this.get(r);s!==undefined&&(t?e.call(t,s,r,this):e(s,r,this))}))}}n.WeakRefObjectMap=s}}},{package:"$root$",file:"app/scripts/lib/WeakRefObjectMap.ts"}],[126,{"../../../../shared/constants/app":5798,"@metamask/controller-utils":1559,"@metamask/rpc-errors":2524,"@metamask/snaps-rpc-methods":2683,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.rejectAllApprovals=function({approvalController:e,deleteInterface:t}){const n=e.state.pendingApprovals,r=Object.values(n);for(const n of r)l({approvalController:e,approvalRequest:n,deleteInterface:t})},n.rejectOriginApprovals=function({approvalController:e,deleteInterface:t,origin:n}){const r=e.state.pendingApprovals,s=Object.values(r).filter((e=>e.origin===n));for(const n of s)l({approvalController:e,approvalRequest:n,deleteInterface:t})};var r=e("@metamask/controller-utils"),s=e("@metamask/snaps-rpc-methods"),a=e("@metamask/rpc-errors"),i=e("@metamask/utils"),o=e("../../../../shared/constants/app");const c=(0,i.createProjectLogger)("approval-utils");function l({approvalController:e,approvalRequest:t,deleteInterface:n}){var i;const{id:l,type:u,origin:d}=t,p=null===(i=t.requestData)||void 0===i?void 0:i.id;switch(u){case r.ApprovalType.SnapDialogAlert:case r.ApprovalType.SnapDialogPrompt:case s.DIALOG_APPROVAL_TYPES.default:c("Rejecting snap dialog",{id:l,interfaceId:p,origin:d,type:u}),e.accept(l,null),null==n||n(p);break;case r.ApprovalType.SnapDialogConfirmation:c("Rejecting snap confirmation",{id:l,interfaceId:p,origin:d,type:u}),e.accept(l,!1),null==n||n(p);break;case o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation:case o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval:case o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect:c("Rejecting snap account confirmation",{id:l,origin:d,type:u}),e.accept(l,!1);break;default:c("Rejecting pending approval",{id:l,origin:d,type:u}),e.reject(l,a.providerErrors.userRejectedRequest({data:{cause:"rejectAllApprovals"}}))}}}}},{package:"$root$",file:"app/scripts/lib/approval/utils.ts"}],[127,{"../../../shared/modules/string-utils":5924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../shared/modules/string-utils");n.default=class{constructor(e={}){const{preferencesController:t,addressBookController:n,accountsController:r,networkController:s,trackMetaMetricsEvent:a}=e;this.preferencesController=t,this.accountsController=r,this.addressBookController=n,this.networkController=s,this._trackMetaMetricsEvent=a}async restoreUserData(e){const t=this.preferencesController.state,{preferences:n,addressBook:r,network:s,internalAccounts:a}=JSON.parse(e);n&&(n.identities=t.identities,n.lostIdentities=t.lostIdentities,n.selectedAddress=t.selectedAddress,this.preferencesController.update(n)),r&&this.addressBookController.update(r,!0),s&&this.networkController.loadBackup(s),a&&this.accountsController.loadBackup(a),(n||r||s||a)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.state},internalAccounts:{internalAccounts:this.accountsController.state.internalAccounts},addressBook:{...this.addressBookController.state},network:{networkConfigurationsByChainId:this.networkController.state.networkConfigurationsByChainId}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),n=new Date,s=e=>(0,r.prependZero)(e,2);return{fileName:`MetaMaskUserData.${n.getFullYear()}_${s(n.getMonth()+1)}_${s(n.getDay())}_${s(n.getHours())}_${s(n.getMinutes())}_${s(n.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/lib/backup.js"}],[128,{"../../../shared/constants/time":5827,loglevel:4920,"readable-stream":5277},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.THREE_MINUTES=void 0,n.default=function(){const e=c();return new s.Transform({transform(t,n,r){const s=t.id===undefined,i=e.add(t.id);s||i?r(null,t):(a.default.debug(`RPC request with id "${t.id}" already seen.`),r())},objectMode:!0})};var r,s=e("readable-stream"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/time");const o=n.THREE_MINUTES=3*i.MINUTE,c=()=>{const e=new Map;return setInterval((()=>{const t=Date.now()-o;for(const[n,r]of e.entries()){if(!(r<=t))break;e.delete(n)}}),o),{add:t=>!e.has(t)&&(e.set(t,Date.now()),!0)}}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterStream.ts"}],[129,{"../../../shared/constants/permissions":5817,"../controllers/permissions":98,"@metamask/keyring-api":2077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({messenger:e}){return function(t,n,s,a){const o=e.call("AccountsController:getSelectedAccount");if((0,r.isEvmAccountType)(o.type))return s();if(i.includes(t.method))return a(new Error(`Non-EVM account cannot request this method: ${t.method}`));if("wallet_requestPermissions"===t.method&&null!=t&&t.params&&Array.isArray(t.params)&&t.params.length>0&&t.params[0]){const e=Object.keys(t.params[0]);if(i.some((t=>e.includes(t))))return a(new Error(`Non-EVM account cannot request this method: ${e.toString()}`))}return s()}};var r=e("@metamask/keyring-api"),s=e("../../../shared/constants/permissions"),a=e("../controllers/permissions");const i=[...Object.values(s.RestrictedEthMethods),...a.unrestrictedEthSigningMethods]}}},{package:"$root$",file:"app/scripts/lib/createEvmMethodsToNonEvmAccountReqFilterMiddleware.ts"}],[13,{"../../../../shared/constants/metametrics":5810,"@metamask/assets-controllers":1457,"@metamask/bridge-controller":1483},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NftControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("@metamask/bridge-controller"),a=e("../../../../shared/constants/metametrics");n.NftControllerInit=({controllerMessenger:e,persistedState:t,trackEvent:n})=>({controller:new r.NftController({state:t.NftController,messenger:e,onNftAdded:({address:e,symbol:t,tokenId:r,standard:i,source:o})=>n({event:a.MetaMetricsEventName.NftAdded,category:a.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e,token_symbol:t??null,token_id:r,token_standard:i,asset_type:s.AssetType.NFT,source:o}})})})}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-controller-init.ts"}],[130,{loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){r((r=>{n.error&&s.default.debug("Error in RPC response:\n",n),t.isMetamaskInternal||(s.default.info(`RPC (${e.origin}): ${t.method} -> ${n.error?"error":"success"}`),r())}))}};var r,s=(r=e("loglevel"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({mainFrameOrigin:e}){return function(t,n,r){t.mainFrameOrigin=e,r()}}}}},{package:"$root$",file:"app/scripts/lib/createMainFrameOriginMiddleware.ts"}],[132,{"./stream-utils":205,"@metamask/rpc-errors":2524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/rpc-errors"),s=e("./stream-utils");n.default=(e,t)=>async n=>{if(!(0,s.isStreamWritable)(t))return;if(!e[n.method])return void t.write({jsonrpc:"2.0",error:r.rpcErrors.methodNotFound({message:`${n.method} not found`}),id:n.id});let a,i;try{a=await e[n.method](...n.params)}catch(e){i=e}(0,s.isStreamWritable)(t)?i?t.write({jsonrpc:"2.0",error:(0,r.serializeError)(i,{shouldIncludeStack:!0}),id:n.id}):t.write({jsonrpc:"2.0",result:a,id:n.id}):i&&console.error(i)}}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[133,{"./middleware/pending":151,"@metamask/eth-json-rpc-middleware":1662,"@metamask/json-rpc-engine":2027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({version:e,getAccounts:t,getCallsStatus:n,getCapabilities:i,processTransaction:o,processTypedMessage:c,processTypedMessageV3:l,processTypedMessageV4:u,processPersonalMessage:d,processDecryptMessage:p,processEncryptionPublicKey:m,processSendCalls:h,getPendingNonce:f,getPendingTransactionByHash:g}){return(0,r.mergeMiddleware)([(0,r.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,s.createWalletMiddleware)({getAccounts:t,getCallsStatus:n,getCapabilities:i,processTransaction:o,processTypedMessage:c,processTypedMessageV3:l,processTypedMessageV4:u,processPersonalMessage:d,processDecryptMessage:p,processEncryptionPublicKey:m,processSendCalls:h}),(0,a.createPendingNonceMiddleware)({getPendingNonce:f}),(0,a.createPendingTxMiddleware)({getPendingTransactionByHash:g})])};var r=e("@metamask/json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),a=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[134,{loglevel:4920,"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({location:e,registerOnboarding:t}){return async function(n,a,i,o){try{if("wallet_registerOnboarding"!==n.method)return void i();n.tabId&&n.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,n.tabId):r.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),a.result=!0,o()}catch(e){o(e)}}};var r=a(e("loglevel")),s=a(e("webextension-polyfill"));function a(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[135,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){t.origin=e.origin,r()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[136,{"../../../shared/constants/app":5798,"@metamask/rpc-errors":2524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SPAM_FILTER_ACTIVATED_ERROR=n.REJECTION_THRESHOLD_IN_MS=n.NUMBER_OF_REJECTIONS_THRESHOLD=n.BLOCKING_THRESHOLD_IN_MS=n.BLOCKABLE_METHODS=void 0,n.default=function({getThrottledOriginState:e,updateThrottledOriginState:t}){return function(n,r,s,p){const{method:m,origin:h}=n;if(!c.has(m)||l.includes(h))return void s();!function(e){if(!e)return!1;const t=Date.now(),{rejections:n,lastRejection:r}=e,s=t-r<=o;return n>=a&&s}(e(h))?s((n=>{if("error"in r&&r.error&&d(r.error)){var s;const a=null===(s=r.error)||void 0===s?void 0:s.data;if("rejectAllApprovals"===(null==a?void 0:a.cause))return void n();const o=e(h)||{rejections:0,lastRejection:0},c=Date.now(),l=c-o.lastRejection<i?o.rejections+1:1;t(h,{rejections:l,lastRejection:c})}else{const n=e(h);Boolean(n)&&t(h,{rejections:0,lastRejection:0})}n()})):p(u)}};var r=e("@metamask/rpc-errors"),s=e("../../../shared/constants/app");const a=n.NUMBER_OF_REJECTIONS_THRESHOLD=3,i=n.REJECTION_THRESHOLD_IN_MS=3e4,o=n.BLOCKING_THRESHOLD_IN_MS=6e4,c=n.BLOCKABLE_METHODS=new Set([s.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN,s.MESSAGE_TYPE.ETH_SEND_TRANSACTION,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3,s.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4,s.MESSAGE_TYPE.PERSONAL_SIGN,s.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,s.MESSAGE_TYPE.WALLET_SEND_CALLS,s.MESSAGE_TYPE.WATCH_ASSET]),l=["http://127.0.0.1:8080","http://127.0.0.1:8081","http://127.0.0.1:8082","http://localhost:8080","http://localhost:8081","http://localhost:8082"],u=n.SPAM_FILTER_ACTIVATED_ERROR=r.providerErrors.unauthorized("Request blocked due to spam filter."),d=e=>e.code===r.errorCodes.provider.userRejectedRequest}}},{package:"$root$",file:"app/scripts/lib/createOriginThrottlingMiddleware.ts"}],[1363,{"./names.cjs":1365,"@metamask/base-controller":1476,"@metamask/keyring-controller":2084,"@metamask/snaps-utils":1393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,l,u,d,p,m,h,f,g=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTreeController=n.toDefaultAccountGroupId=n.toAccountGroupId=n.toAccountWalletId=n.DEFAULT_ACCOUNT_GROUP_NAME=n.DEFAULT_ACCOUNT_GROUP_UNIQUE_ID=n.getDefaultAccountTreeControllerState=n.AccountWalletCategory=void 0;const b=e("@metamask/base-controller"),w=e("@metamask/keyring-controller"),S=e("@metamask/snaps-utils"),v=e("./names.cjs");var T;!function(e){e.Entropy="entropy",e.Keyring="keyring",e.Snap="snap"}(T||(n.AccountWalletCategory=T={}));const E={accountTree:{persist:!1,anonymous:!1}};function k(){return{accountTree:{wallets:{}}}}function _(e,t){return`${e}:${t}`}function A(e,t){return`${e}:${t}`}function P(e){return A(e,n.DEFAULT_ACCOUNT_GROUP_UNIQUE_ID)}n.getDefaultAccountTreeControllerState=k,n.DEFAULT_ACCOUNT_GROUP_UNIQUE_ID="default",n.DEFAULT_ACCOUNT_GROUP_NAME="Default",n.toAccountWalletId=_,n.toAccountGroupId=A,n.toDefaultAccountGroupId=P;class C extends b.BaseController{constructor({messenger:e,state:t}){super({messenger:e,name:"AccountTreeController",metadata:E,state:{accountTree:{wallets:{}},...t}}),r.add(this),s.set(this,void 0),a.set(this,void 0),g(this,s,new Map,"f"),g(this,a,[e=>y(this,r,"m",l).call(this,e),e=>y(this,r,"m",u).call(this,e),e=>y(this,r,"m",d).call(this,e)],"f"),this.messagingSystem.subscribe("AccountsController:accountAdded",(e=>{y(this,r,"m",i).call(this,e)})),this.messagingSystem.subscribe("AccountsController:accountRemoved",(e=>{y(this,r,"m",o).call(this,e)}))}init(){const e={};for(const t of y(this,r,"m",f).call(this))y(this,r,"m",h).call(this,e,t);this.update((t=>{t.accountTree.wallets=e}))}}n.AccountTreeController=C,s=new WeakMap,a=new WeakMap,r=new WeakSet,i=function(e){this.update((t=>{y(this,r,"m",h).call(this,t.accountTree.wallets,e)}))},o=function(e){const t=y(this,s,"f").get(e);if(t){const{walletId:n,groupId:r}=t;this.update((t=>{const{accounts:s}=t.accountTree.wallets[n].groups[r],a=s.indexOf(e);-1!==a&&s.splice(a,1)}))}},c=function(e,t){return e.metadata.keyring.type===t},l=function(e){let t;if(y(this,r,"m",c).call(this,e,w.KeyringTypes.hd)){if(!e.options.entropySource)return console.warn("! Found an HD account with no entropy source: account won't be associated to its wallet"),undefined;t=e.options.entropySource}if(y(this,r,"m",c).call(this,e,w.KeyringTypes.snap)&&e.metadata.snap?.enabled&&e.options.entropySource&&(t=e.options.entropySource),!t)return undefined;const n=y(this,r,"m",m).call(this,t);return n?{category:T.Entropy,id:_(T.Entropy,t),name:n}:(console.warn("! Tried to name a wallet using an unknown entropy, this should not be possible."),undefined)},u=function(e){if(y(this,r,"m",c).call(this,e,w.KeyringTypes.snap)&&e.metadata.snap&&e.metadata.snap.enabled){const{id:t}=e.metadata.snap;return{category:T.Snap,id:_(T.Snap,t),name:y(this,r,"m",p).call(this,t)}}return undefined},d=function(e){const{type:t}=e.metadata.keyring;return{category:T.Keyring,id:_(T.Keyring,t),name:(0,v.getAccountWalletNameFromKeyringType)(t)}},p=function(e){const t=this.messagingSystem.call("SnapController:get",e);return`Snap: ${t?t.manifest.proposedName:(0,S.stripSnapPrefix)(e)}`},m=function(e){const{keyrings:t}=this.messagingSystem.call("KeyringController:getState"),n=t.filter((e=>e.type===w.KeyringTypes.hd)).findIndex((t=>t.metadata.id===e));return-1===n?undefined:`Wallet ${n+1}`},h=function(e,t){for(const r of y(this,a,"f")){const a=r(t);if(!a)continue;const i=a.id,o=a.name,c=P(i),l=n.DEFAULT_ACCOUNT_GROUP_NAME;return e[i]||(e[i]={id:i,groups:{[c]:{id:c,accounts:[],metadata:{name:l}}},metadata:{name:o}}),e[i].groups[c].accounts.push(t.id),void y(this,s,"f").set(t.id,{walletId:i,groupId:c})}},f=function(){return this.messagingSystem.call("AccountsController:listMultichainAccounts")}}}},{package:"@metamask/account-tree-controller",file:"node_modules/@metamask/account-tree-controller/dist/AccountTreeController.cjs"}],[1364,{"./AccountTreeController.cjs":1363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAccountTreeControllerState=n.AccountTreeController=void 0;var r=e("./AccountTreeController.cjs");Object.defineProperty(n,"AccountTreeController",{enumerable:!0,get:function(){return r.AccountTreeController}}),Object.defineProperty(n,"getDefaultAccountTreeControllerState",{enumerable:!0,get:function(){return r.getDefaultAccountTreeControllerState}})}}},{package:"@metamask/account-tree-controller",file:"node_modules/@metamask/account-tree-controller/dist/index.cjs"}],[1365,{"@metamask/keyring-controller":2084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountWalletNameFromKeyringType=void 0;const r=e("@metamask/keyring-controller");n.getAccountWalletNameFromKeyringType=function(e){switch(e){case r.KeyringTypes.simple:return"Private Keys";case r.KeyringTypes.hd:return"HD Wallet";case r.KeyringTypes.trezor:return"Trezor";case r.KeyringTypes.oneKey:return"OneKey";case r.KeyringTypes.ledger:return"Ledger";case r.KeyringTypes.lattice:return"Lattice";case r.KeyringTypes.qr:return"QR";case r.KeyringTypes.snap:return"Snap Wallet";default:return"Unknown"}}}}},{package:"@metamask/account-tree-controller",file:"node_modules/@metamask/account-tree-controller/dist/names.cjs"}],[1366,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.snapOwnsAccount=n.createChainIdList=n.createAccountList=void 0;const r=e("@metamask/utils");n.createAccountList=function(e,t){return t.map((t=>`${t}:${e}`))},n.createChainIdList=function(e,t){return t&&0!==t.length?e.reduce(((e,n)=>{if("eip155:0"===n){const n=t.filter((e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155}));e.push(...n)}else t.includes(n)&&e.push(n);return e}),[]):e},n.snapOwnsAccount=function(e,t){var n;return(null===(n=t.metadata.snap)||void 0===n?void 0:n.id)===e}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/account.cjs"}],[1367,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEqual=void 0,n.isEqual=function(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/array.cjs"}],[1368,{"./base64.cjs":1369,"./constants.cjs":1373,"@metamask/snaps-sdk":2739,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateAuxiliaryFiles=n.encodeAuxiliaryFile=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/utils"),a=e("./base64.cjs"),i=e("./constants.cjs");n.encodeAuxiliaryFile=async function(e,t){if(t===r.AuxiliaryFileEncoding.Base64)return e;const n=await(0,a.decodeBase64)(e);return t===r.AuxiliaryFileEncoding.Utf8?(0,s.bytesToString)(n):(0,s.bytesToHex)(n)},n.validateAuxiliaryFiles=function(e){for(const t of e)(0,s.assert)(t.size<i.MAX_FILE_SIZE,"Static files required by the Snap must be smaller than 64 MB.")}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/auxiliary-files.cjs"}],[1369,{"./bytes.cjs":1370,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decodeBase64=n.encodeBase64=void 0;const r=e("@metamask/utils"),s=e("./bytes.cjs");n.encodeBase64=async function(e){const t=(0,s.getBytes)(e);return"FileReader"in globalThis?await new Promise(((e,n)=>{const r=Object.assign(new FileReader,{onload:()=>e(r.result.replace("data:application/octet-stream;base64,","")),onerror:()=>n(r.error)});r.readAsDataURL(new File([t],"",{type:"application/octet-stream"}))})):(0,r.bytesToBase64)(t)},n.decodeBase64=async function(e){const t=await fetch(`data:application/octet-stream;base64,${e}`);return new Uint8Array(await t.arrayBuffer())}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/base64.cjs"}],[137,{"../../../shared/constants/app":5798,"../../../shared/constants/metametrics":5810,"../../../shared/constants/security-provider":5820,"../../../shared/constants/signatures":5821,"../../../shared/constants/transaction":5829,"../../../shared/lib/confirmation.utils":5842,"../../../shared/lib/snaps/snaps":5887,"../../../shared/modules/error":5906,"../../../shared/modules/transaction.utils":5926,"../../../ui/helpers/utils/metrics":7020,"./snap-keyring/metrics":194,"@metamask/controller-utils":1559,"@metamask/rpc-errors":2524,"ethereumjs-util":4363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({rateLimitTimeout:e=3e5,rateLimitSamplePercent:t=.001,globalRateLimitTimeout:n=3e5,globalRateLimitMaxAmount:A=10,getAccountType:P,getDeviceModel:C,getHardwareTypeForMetric:M,snapAndHardwareMessenger:I,appStateController:O,metaMetricsController:j,getHDEntropyIndex:N}){return async function(R,x,D){const{origin:B,method:L,params:U}=R,F=function(e){return[i.MESSAGE_TYPE.WALLET_CREATE_SESSION,i.MESSAGE_TYPE.WALLET_INVOKE_METHOD].includes(e)}(L),$=F?o.MetaMetricsRequestedThrough.MultichainApi:o.MetaMetricsRequestedThrough.EthereumProvider,H=F?o.MetaMetricsEventCategory.MultichainApi:o.MetaMetricsEventCategory.InpageProvider;let G,W=L;var V;L===i.MESSAGE_TYPE.WALLET_INVOKE_METHOD&&(W=null==U||null===(V=U.request)||void 0===V?void 0:V.method,G=null==U?void 0:U.scope);const K=w[W];let q;switch(K){case y.TIMEOUT:q=void 0!==k[W];break;case y.NON_RATE_LIMITED:q=!1;break;case y.BLOCKED:q=!0;break;default:case y.RANDOM_SAMPLE:q=Math.random()>=t}const z=A>0&&_>=A,Y=!0===j.state.participateInMetaMetrics,Q=v[W],J={api_source:$};let X;G&&(J.chain_id_caip=G);const Z=(0,f.isSnapPreinstalled)(B),ee=B!==i.ORIGIN_METAMASK&&!Z&&!q&&!z&&!0===Y;if(ee){var te;const t=Q?Q.REQUESTED:o.MetaMetricsEventName.ProviderMethodCalled;if(t===o.MetaMetricsEventName.SignatureRequested){var ne,re,se,ae,ie;let e;var oe,ce;if(J.signature_type=W,J.hd_entropy_index=N(),(0,a.isValidAddress)(null==R||null===(ne=R.params)||void 0===ne?void 0:ne[1]))e=null==R||null===(oe=R.params)||void 0===oe?void 0:oe[0];else e=null==R||null===(ce=R.params)||void 0===ce?void 0:ce[1];null!==(re=R.securityAlertResponse)&&void 0!==re&&re.providerRequestsCount&&Object.keys(R.securityAlertResponse.providerRequestsCount).forEach((e=>{J[`ppom_${e}_count`]=R.securityAlertResponse.providerRequestsCount[e]})),J.security_alert_response=(null===(se=R.securityAlertResponse)||void 0===se?void 0:se.result_type)??l.BlockaidResultType.NotApplicable,J.security_alert_reason=(null===(ae=R.securityAlertResponse)||void 0===ae?void 0:ae.reason)??l.BlockaidReason.notApplicable,null!==(ie=R.securityAlertResponse)&&void 0!==ie&&ie.description&&(J.security_alert_description=R.securityAlertResponse.description),(0,h.shouldUseRedesignForSignatures)({approvalType:S[W]})&&(J.ui_customizations=[...J.ui_customizations||[],o.MetaMetricsEventUiCustomization.RedesignedConfirmation]);const t=await(0,g.getSnapAndHardwareInfoForMetrics)(P,C,M,I);Object.assign(J,t);try{if(W===i.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,r.detectSIWE)({data:e});t&&(J.ui_customizations=[...J.ui_customizations||[],o.MetaMetricsEventUiCustomization.Siwe])}else if(W===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4){const t=(0,c.parseTypedDataMessage)(e);X={},J.eip712_primary_type=t.primaryType,X.eip712_verifyingContract=t.domain.verifyingContract,X.eip712_domain_version=t.domain.version,X.eip712_domain_name=t.domain.name,u.PRIMARY_TYPES_PERMIT.includes(t.primaryType)?J.ui_customizations=[...J.ui_customizations||[],o.MetaMetricsEventUiCustomization.Permit]:u.PRIMARY_TYPES_ORDER.includes(t.primaryType)&&(J.ui_customizations=[...J.ui_customizations||[],o.MetaMetricsEventUiCustomization.Order])}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Errored - ${e}`)}}else J.method=W;const s=T[W];if(s&&(J.params=s(U)),null===(te=E[W])||void 0===te||te.call(E,R,undefined,b.REQUESTED,J),t===o.MetaMetricsEventName.SignatureRequested){!function(e,t,n,r){e.createEventFragment({category:r,initialEvent:o.MetaMetricsEventName.SignatureRequested,successEvent:o.MetaMetricsEventName.SignatureApproved,failureEvent:o.MetaMetricsEventName.SignatureRejected,uniqueIdentifier:(0,m.generateSignatureUniqueId)(t.id),persist:!0,referrer:{url:t.origin},...n})}(j,R,{properties:J,sensitiveProperties:X},H)}else j.trackEvent({event:t,category:H,referrer:{url:B},properties:J});K===y.TIMEOUT&&(k[W]=setTimeout((()=>{delete k[W]}),e)),_+=1,setTimeout((()=>{_-=1}),n)}D((async e=>{var t,n,r,a;if(!1===ee||void 0===Q)return e();const i=null===(t=x.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.location;let c,l;const u=(0,p.getErrorMessage)(x.error);if((null===(n=x.error)||void 0===n?void 0:n.code)===s.errorCodes.provider.userRejectedRequest?(c=Q.REJECTED,l=b.REJECTED):(null===(r=x.error)||void 0===r?void 0:r.code)===s.errorCodes.rpc.internal&&[u,x.error.message].includes("Request rejected by user or snap.")?(c=Q.REJECTED,l=b.REJECTED,J.status=u):(c=Q.APPROVED,l=b.APPROVED),!c)return e();null===(a=E[W])||void 0===a||a.call(E,R,x,l,J);let h={};if(d.SIGNING_METHODS.includes(W)){var f;const e=O.getSignatureSecurityAlertResponse(null===(f=R.securityAlertResponse)||void 0===f?void 0:f.securityAlertId);h=(0,m.getBlockaidMetricsProps)({securityAlertResponse:e})}const g={...J,...h,location:i};if(c===o.MetaMetricsEventName.SignatureRejected||c===o.MetaMetricsEventName.SignatureApproved){const e={abandoned:c===Q.REJECTED},t={properties:{...g,hd_entropy_index:N()},sensitiveProperties:X};!function(e,t,n,r){const s=(0,m.generateSignatureUniqueId)(t.id);e.updateEventFragment(s,r),e.finalizeEventFragment(s,n)}(j,R,e,t)}else j.trackEvent({event:c,category:H,referrer:{url:B},properties:g});return e()}))}};var r=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),a=e("ethereumjs-util"),i=e("../../../shared/constants/app"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/modules/transaction.utils"),l=e("../../../shared/constants/security-provider"),u=e("../../../shared/constants/signatures"),d=e("../../../shared/constants/transaction"),p=e("../../../shared/modules/error"),m=e("../../../ui/helpers/utils/metrics"),h=e("../../../shared/lib/confirmation.utils"),f=e("../../../shared/lib/snaps/snaps"),g=e("./snap-keyring/metrics");const y={TIMEOUT:"timeout",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited",RANDOM_SAMPLE:"random_sample"},b={REQUESTED:"REQUESTED",APPROVED:"APPROVED",REJECTED:"REJECTED"},w={[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.PERSONAL_SIGN]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_DECRYPT]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:y.TIMEOUT,[i.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:y.TIMEOUT,[i.MESSAGE_TYPE.WALLET_CREATE_SESSION]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.SEND_METADATA]:y.BLOCKED,[i.MESSAGE_TYPE.ETH_CHAIN_ID]:y.BLOCKED,[i.MESSAGE_TYPE.ETH_ACCOUNTS]:y.BLOCKED,[i.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE]:y.BLOCKED,[i.MESSAGE_TYPE.GET_PROVIDER_STATE]:y.BLOCKED,[i.MESSAGE_TYPE.WALLET_GET_CALLS_STATUS]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.WALLET_GET_CAPABILITIES]:y.NON_RATE_LIMITED,[i.MESSAGE_TYPE.WALLET_SEND_CALLS]:y.NON_RATE_LIMITED},S={[i.MESSAGE_TYPE.PERSONAL_SIGN]:r.ApprovalType.PersonalSign,[i.MESSAGE_TYPE.SIGN]:r.ApprovalType.SignTransaction,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:r.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:r.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:r.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:r.ApprovalType.EthSignTypedData},v={[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:o.MetaMetricsEventName.DecryptionApproved,REJECTED:o.MetaMetricsEventName.DecryptionRejected,REQUESTED:o.MetaMetricsEventName.DecryptionRequested},[i.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:o.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:o.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:o.MetaMetricsEventName.EncryptionPublicKeyRequested},[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[i.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[i.MESSAGE_TYPE.WALLET_CREATE_SESSION]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[i.MESSAGE_TYPE.WALLET_GET_CALLS_STATUS]:{REQUESTED:o.MetaMetricsEventName.Wallet5792Called},[i.MESSAGE_TYPE.WALLET_GET_CAPABILITIES]:{REQUESTED:o.MetaMetricsEventName.Wallet5792Called},[i.MESSAGE_TYPE.WALLET_SEND_CALLS]:{REQUESTED:o.MetaMetricsEventName.Wallet5792Called}},T={[i.MESSAGE_TYPE.WATCH_ASSET]:({type:e})=>({type:e}),[i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:([{chainId:e}])=>({chainId:e}),[i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:([{chainId:e}])=>({chainId:e})},E={[i.MESSAGE_TYPE.WALLET_SEND_CALLS]:function(e,t,n,r){var s;if(n!==b.REQUESTED)return;const{params:a}=e,i=null==a||null===(s=a[0])||void 0===s||null===(s=s.calls)||void 0===s?void 0:s.length;i&&(r.batch_transaction_count=i)},[i.MESSAGE_TYPE.WALLET_CREATE_SESSION]:function(e,t,n,r){if(n===b.REQUESTED){const{params:t}=e,n=(null==t?void 0:t.requiredScopes)||{},s=(null==t?void 0:t.optionalScopes)||{},a=new Set;for(const e of Object.keys(n))a.add(e);for(const e of Object.keys(s))a.add(e);r.chain_id_list=Array.from(a)}else if(n===b.APPROVED){const{result:e}=t,n=Object.keys((null==e?void 0:e.sessionScopes)||{});r.chain_id_list=n}}},k={};let _=0}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[1370,{"./virtual-file/VirtualFile.cjs":1412,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBytes=void 0;const r=e("@metamask/utils"),s=e("./virtual-file/VirtualFile.cjs");n.getBytes=function(e){const t=e instanceof s.VirtualFile?e.value:e;return"string"==typeof t?(0,r.stringToBytes)(t):t}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/bytes.cjs"}],[1371,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.SnapCaveatType=void 0,function(e){e.PermittedDerivationPaths="permittedDerivationPaths",e.PermittedCoinTypes="permittedCoinTypes",e.SnapCronjob="snapCronjob",e.TransactionOrigin="transactionOrigin",e.SignatureOrigin="signatureOrigin",e.RpcOrigin="rpcOrigin",e.KeyringOrigin="keyringOrigin",e.SnapIds="snapIds",e.ChainIds="chainIds",e.LookupMatchers="lookupMatchers",e.MaxRequestTime="maxRequestTime",e.ProtocolSnapScopes="protocolSnapScopes"}(r||(n.SnapCaveatType=r={}))}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/caveats.cjs"}],[1372,{"./bytes.cjs":1370,"@metamask/utils":2974,"@noble/hashes/sha256":3027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checksumFiles=n.checksum=void 0;const r=e("@metamask/utils"),s=e("@noble/hashes/sha256"),a=e("./bytes.cjs");async function i(e){var t;const n=(0,a.getBytes)(e);return"crypto"in globalThis&&"object"==typeof globalThis.crypto&&null!==(t=crypto.subtle)&&void 0!==t&&t.digest?new Uint8Array(await crypto.subtle.digest("SHA-256",n)):(0,s.sha256)(n)}n.checksum=i,n.checksumFiles=async function(e){const t=await Promise.all([...e].sort(((e,t)=>((0,r.assert)(e.path!==t.path,"Tried to sort files with non-unique paths."),e.path<t.path?-1:1))).map((async e=>i(e))));return i((0,r.concatBytes)(t))}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/checksum.cjs"}],[1373,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MAX_FILE_SIZE=void 0,n.MAX_FILE_SIZE=64e6}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/constants.cjs"}],[1374,{"@metamask/superstruct":2875,"@metamask/utils":2974,"cron-parser":4212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCronjobSpecificationArray=n.CronjobSpecificationArrayStruct=n.isCronjobSpecification=n.CronjobSpecificationStruct=n.parseCronExpression=n.CronExpressionStruct=n.CronjobRpcRequestStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),a=e("cron-parser");n.CronjobRpcRequestStruct=(0,r.object)({jsonrpc:(0,r.optional)(s.JsonRpcVersionStruct),id:(0,r.optional)(s.JsonRpcIdStruct),method:(0,r.string)(),params:(0,r.optional)(s.JsonRpcParamsStruct)}),n.CronExpressionStruct=(0,r.refine)((0,r.string)(),"CronExpression",(e=>{try{return(0,a.parseExpression)(e),!0}catch{return!1}})),n.parseCronExpression=function(e){const t=(0,r.create)(e,n.CronExpressionStruct);return(0,a.parseExpression)(t)},n.CronjobSpecificationStruct=(0,r.object)({expression:n.CronExpressionStruct,request:n.CronjobRpcRequestStruct}),n.isCronjobSpecification=function(e){try{return(0,r.create)(e,n.CronjobSpecificationStruct),!0}catch{return!1}},n.CronjobSpecificationArrayStruct=(0,r.array)(n.CronjobSpecificationStruct),n.isCronjobSpecificationArray=function(e){try{return(0,r.create)(e,n.CronjobSpecificationArrayStruct),!0}catch{return!1}}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/cronjob.cjs"}],[1375,{"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currency=void 0;const r=e("@metamask/superstruct");n.currency=function(e){const t=e.toLowerCase();return(0,r.coerce)((0,r.literal)(t),(0,r.literal)(e.toUpperCase()),(e=>(0,r.create)(e.toLowerCase(),(0,r.literal)(t))))}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/currency.cjs"}],[1376,{rfdc:5367},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.deepClone=void 0;const s=r(e("rfdc"));n.deepClone=(0,s.default)({proto:!1,circles:!1})}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/deep-clone.cjs"}],[1377,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_ENDOWMENTS=void 0,n.DEFAULT_ENDOWMENTS=Object.freeze(["atob","btoa","BigInt","console","crypto","Date","Math","setTimeout","clearTimeout","SubtleCrypto","TextDecoder","TextEncoder","URL","URLSearchParams","setInterval","clearInterval","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","isSecureContext","Intl","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","DataView","ArrayBuffer","AbortController","AbortSignal"])}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/default-endowments.cjs"}],[1378,{"./array.cjs":1367,"@metamask/slip44":2599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getSlip44ProtocolName=n.getSnapDerivationPathName=n.SNAPS_DERIVATION_PATHS=void 0;const s=r(e("@metamask/slip44")),a=e("./array.cjs");function i(e){var t;return"1"===String(e)?"Test Networks":(null===(t=s.default[e])||void 0===t?void 0:t.name)??null}n.SNAPS_DERIVATION_PATHS=[{path:["m","44'","0'"],curve:"ed25519",name:"Test BIP-32 Path (ed25519)"},{path:["m","44'","1'"],curve:"secp256k1",name:"Testnet"},{path:["m","44'","0'"],curve:"secp256k1",name:"Bitcoin Legacy"},{path:["m","49'","0'"],curve:"secp256k1",name:"Bitcoin Nested SegWit"},{path:["m","49'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Nested SegWit"},{path:["m","84'","0'"],curve:"secp256k1",name:"Bitcoin Native SegWit"},{path:["m","84'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Native SegWit"},{path:["m","86'","0'"],curve:"secp256k1",name:"Bitcoin Taproot"},{path:["m","86'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Taproot"},{path:["m","44'","501'"],curve:"ed25519",name:"Solana"},{path:["m","44'","501'","0'","0'"],curve:"ed25519",name:"Solana"},{path:["m","44'","2'"],curve:"secp256k1",name:"Litecoin"},{path:["m","44'","3'"],curve:"secp256k1",name:"Dogecoin"},{path:["m","44'","60'"],curve:"secp256k1",name:"Ethereum"},{path:["m","44'","118'"],curve:"secp256k1",name:"Atom"},{path:["m","44'","145'"],curve:"secp256k1",name:"Bitcoin Cash"},{path:["m","44'","637'"],curve:"ed25519",name:"Aptos"},{path:["m","44'","714'"],curve:"secp256k1",name:"Binance (BNB)"},{path:["m","44'","784'"],curve:"ed25519",name:"Sui"},{path:["m","44'","931'"],curve:"secp256k1",name:"THORChain (RUNE)"},{path:["m","44'","330'"],curve:"secp256k1",name:"Terra (LUNA)"},{path:["m","44'","459'"],curve:"secp256k1",name:"Kava"},{path:["m","44'","529'"],curve:"secp256k1",name:"Secret Network"},{path:["m","44'","397'","0'"],curve:"ed25519",name:"NEAR Protocol"},{path:["m","44'","1'","0'"],curve:"ed25519",name:"Testnet"},{path:["m","44'","472'"],curve:"ed25519",name:"Arweave"},{path:["m","44'","12586'"],curve:"secp256k1",name:"Mina"},{path:["m","44'","242'"],curve:"ed25519",name:"Nimiq"},{path:["m","44'","1729'","0'","0'"],curve:"ed25519",name:"Tezos"},{path:["m","1789'","0'"],curve:"ed25519",name:"Vega"},{path:["m","1852'","1815'"],curve:"ed25519Bip32",name:"Cardano"},{path:["m","44'","508'","0'","0'","0'"],curve:"ed25519",name:"MultiversX"},{path:["m","44'","709'"],curve:"secp256k1",name:"Avail"},{path:["m","44'","626'"],curve:"ed25519",name:"Kadena"},{path:["m","44'","632'"],curve:"ed25519",name:"Massa"}],n.getSnapDerivationPathName=function(e,t){const r=n.SNAPS_DERIVATION_PATHS.find((n=>n.curve===t&&(0,a.isEqual)(n.path,e)));if(r)return r.name;if("secp256k1"===t&&"m"===e[0]&&"44'"===e[1]&&e[2].endsWith("'")){return i(e[2].slice(0,-1))??null}return null},n.getSlip44ProtocolName=i}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/derivation-paths.cjs"}],[1379,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.STATE_ENCRYPTION_MAGIC_VALUE=n.SIP_6_MAGIC_VALUE=void 0,n.SIP_6_MAGIC_VALUE="1399742832'",n.STATE_ENCRYPTION_MAGIC_VALUE="572232532'"}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/entropy.cjs"}],[138,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){t.tabId=e.tabId,r()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[1380,{"@metamask/rpc-errors":2524,"@metamask/snaps-sdk":2739,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.unwrapError=n.isWrappedSnapError=n.isSerializedSnapError=n.isSnapError=n.WrappedSnapError=n.SNAP_ERROR_WRAPPER_MESSAGE=n.SNAP_ERROR_WRAPPER_CODE=void 0;const c=e("@metamask/rpc-errors"),l=e("@metamask/snaps-sdk"),u=e("@metamask/utils");n.SNAP_ERROR_WRAPPER_CODE=-31001,n.SNAP_ERROR_WRAPPER_MESSAGE="Wrapped Snap Error";class d extends Error{constructor(e){const t=(0,l.getErrorMessage)(e);super(t),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),i(this,r,e,"f"),i(this,s,t,"f"),i(this,a,(0,l.getErrorStack)(e),"f")}get name(){return"WrappedSnapError"}get message(){return o(this,s,"f")}get stack(){return o(this,a,"f")}toJSON(){const e=p(o(this,r,"f"))?o(this,r,"f").serialize():(0,c.serializeCause)(o(this,r,"f"));return{code:n.SNAP_ERROR_WRAPPER_CODE,message:n.SNAP_ERROR_WRAPPER_MESSAGE,data:{cause:e}}}serialize(){return this.toJSON()}}function p(e){if((0,u.isObject)(e)&&"serialize"in e&&"function"==typeof e.serialize){const t=e.serialize();return(0,u.isJsonRpcError)(t)&&m(t)}return!1}function m(e){return e.code===l.SNAP_ERROR_CODE&&e.message===l.SNAP_ERROR_MESSAGE}function h(e){return(0,u.isJsonRpcError)(e)&&e.code===n.SNAP_ERROR_WRAPPER_CODE&&e.message===n.SNAP_ERROR_WRAPPER_MESSAGE}function f(e,t,n,r){const s=new c.JsonRpcError(e,t,r);return s.stack=n,s}n.WrappedSnapError=d,r=new WeakMap,s=new WeakMap,a=new WeakMap,n.isSnapError=p,n.isSerializedSnapError=m,n.isWrappedSnapError=h,n.unwrapError=function(e){if(h(e)){if((0,u.isJsonRpcError)(e.data.cause)){if(m(e.data.cause)){const{code:t,message:n,stack:r,data:s}=e.data.cause.data.cause;return[f(t,n,r,s),!0]}const{code:t,message:n,stack:r,data:s}=e.data.cause;return[f(t,n,r,s),!1]}return[f(c.errorCodes.rpc.internal,(0,l.getErrorMessage)(e.data.cause),(0,l.getErrorStack)(e.data.cause)),!1]}if((0,u.isJsonRpcError)(e)){const{code:t,message:n,stack:r,data:s}=e;return[f(t,n,r,s),!1]}return[f(c.errorCodes.rpc.internal,(0,l.getErrorMessage)(e),(0,l.getErrorStack)(e)),!1]}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/errors.cjs"}],[1381,{"../time.cjs":1406,"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnAssetHistoricalPriceResponseStruct=n.AssetHistoricalPriceStruct=n.HistoricalPriceStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),a=e("../time.cjs");n.HistoricalPriceStruct=(0,r.nonEmptyRecord)((0,s.union)([(0,s.literal)("all"),a.ISO8601DurationStruct]),(0,s.array)((0,s.tuple)([(0,s.number)(),(0,s.string)()]))),n.AssetHistoricalPriceStruct=(0,s.nullable)((0,s.object)({intervals:n.HistoricalPriceStruct,updateTime:(0,s.number)(),expirationTime:(0,s.optional)((0,s.number)())})),n.OnAssetHistoricalPriceResponseStruct=(0,s.object)({historicalPrice:n.AssetHistoricalPriceStruct})}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/asset-historical-price.cjs"}],[1382,{"../time.cjs":1406,"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnAssetsConversionResponseStruct=n.AssetConversionStruct=n.MarketDataStruct=n.PricePercentChangeStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("../time.cjs");n.PricePercentChangeStruct=(0,r.nonEmptyRecord)((0,s.union)([(0,s.literal)("all"),i.ISO8601DurationStruct]),(0,s.number)()),n.MarketDataStruct=(0,s.object)({marketCap:(0,s.string)(),totalVolume:(0,s.string)(),circulatingSupply:(0,s.string)(),allTimeHigh:(0,s.string)(),allTimeLow:(0,s.string)(),pricePercentChange:(0,s.optional)(n.PricePercentChangeStruct)}),n.AssetConversionStruct=(0,s.object)({rate:(0,s.string)(),marketData:(0,s.optional)(n.MarketDataStruct),conversionTime:(0,s.number)(),expirationTime:(0,s.optional)((0,s.number)())}),n.OnAssetsConversionResponseStruct=(0,s.object)({conversionRates:(0,s.record)(a.CaipAssetTypeStruct,(0,s.record)(a.CaipAssetTypeStruct,(0,s.nullable)(n.AssetConversionStruct)))})}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/assets-conversion.cjs"}],[1383,{"./types.cjs":1390},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SNAP_EXPORT_NAMES=n.SNAP_EXPORTS=void 0;const r=e("./types.cjs");n.SNAP_EXPORTS={[r.HandlerType.OnRpcRequest]:{type:r.HandlerType.OnRpcRequest,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnTransaction]:{type:r.HandlerType.OnTransaction,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnCronjob]:{type:r.HandlerType.OnCronjob,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnNameLookup]:{type:r.HandlerType.OnNameLookup,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnInstall]:{type:r.HandlerType.OnInstall,required:!1,validator:e=>"function"==typeof e},[r.HandlerType.OnUpdate]:{type:r.HandlerType.OnUpdate,required:!1,validator:e=>"function"==typeof e},[r.HandlerType.OnKeyringRequest]:{type:r.HandlerType.OnKeyringRequest,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnHomePage]:{type:r.HandlerType.OnHomePage,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnSettingsPage]:{type:r.HandlerType.OnSettingsPage,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnSignature]:{type:r.HandlerType.OnSignature,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnUserInput]:{type:r.HandlerType.OnUserInput,required:!1,validator:e=>"function"==typeof e},[r.HandlerType.OnAssetHistoricalPrice]:{type:r.HandlerType.OnAssetHistoricalPrice,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnAssetsLookup]:{type:r.HandlerType.OnAssetsLookup,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnAssetsConversion]:{type:r.HandlerType.OnAssetsConversion,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnProtocolRequest]:{type:r.HandlerType.OnProtocolRequest,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnClientRequest]:{type:r.HandlerType.OnClientRequest,required:!0,validator:e=>"function"==typeof e}},n.SNAP_EXPORT_NAMES=Object.values(r.HandlerType)}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/exports.cjs"}],[1384,{"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnHomePageResponseStruct=n.OnHomePageResponseWithIdStruct=n.OnHomePageResponseWithContentStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct");n.OnHomePageResponseWithContentStruct=(0,s.object)({content:r.ComponentOrElementStruct}),n.OnHomePageResponseWithIdStruct=(0,s.object)({id:(0,s.string)()}),n.OnHomePageResponseStruct=(0,s.union)([n.OnHomePageResponseWithContentStruct,n.OnHomePageResponseWithIdStruct])}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/home-page.cjs"}],[1385,{"./asset-historical-price.cjs":1381,"./assets-conversion.cjs":1382,"./exports.cjs":1383,"./home-page.cjs":1384,"./name-lookup.cjs":1386,"./settings-page.cjs":1387,"./signature.cjs":1388,"./transaction.cjs":1389,"./types.cjs":1390},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},s=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./asset-historical-price.cjs"),n),s(e("./assets-conversion.cjs"),n),s(e("./exports.cjs"),n),s(e("./home-page.cjs"),n),s(e("./name-lookup.cjs"),n),s(e("./settings-page.cjs"),n),s(e("./signature.cjs"),n),s(e("./transaction.cjs"),n),s(e("./types.cjs"),n)}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/index.cjs"}],[1386,{"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnNameLookupResponseStruct=n.DomainResolutionResponseStruct=n.AddressResolutionResponseStruct=n.DomainResolutionStruct=n.AddressResolutionStruct=void 0;const r=e("@metamask/superstruct");n.AddressResolutionStruct=(0,r.object)({protocol:(0,r.string)(),resolvedDomain:(0,r.string)()}),n.DomainResolutionStruct=(0,r.object)({protocol:(0,r.string)(),resolvedAddress:(0,r.string)(),domainName:(0,r.string)()}),n.AddressResolutionResponseStruct=(0,r.object)({resolvedDomains:(0,r.size)((0,r.array)(n.AddressResolutionStruct),1,Infinity)}),n.DomainResolutionResponseStruct=(0,r.object)({resolvedAddresses:(0,r.size)((0,r.array)(n.DomainResolutionStruct),1,Infinity)}),n.OnNameLookupResponseStruct=(0,r.nullable)((0,r.union)([n.AddressResolutionResponseStruct,n.DomainResolutionResponseStruct]))}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/name-lookup.cjs"}],[1387,{"./home-page.cjs":1384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnSettingsPageResponseStruct=void 0;const r=e("./home-page.cjs");n.OnSettingsPageResponseStruct=r.OnHomePageResponseStruct}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/settings-page.cjs"}],[1388,{"./transaction.cjs":1389},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnSignatureResponseStruct=void 0;const r=e("./transaction.cjs");n.OnSignatureResponseStruct=r.OnTransactionResponseStruct}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/signature.cjs"}],[1389,{"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnTransactionResponseStruct=n.OnTransactionResponseWithContentStruct=n.OnTransactionResponseWithIdStruct=n.OnTransactionSeverityResponseStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct");n.OnTransactionSeverityResponseStruct=(0,s.object)({severity:(0,s.optional)((0,s.literal)(r.SeverityLevel.Critical))}),n.OnTransactionResponseWithIdStruct=(0,s.assign)(n.OnTransactionSeverityResponseStruct,(0,s.object)({id:(0,s.string)()})),n.OnTransactionResponseWithContentStruct=(0,s.assign)(n.OnTransactionSeverityResponseStruct,(0,s.object)({content:r.ComponentOrElementStruct})),n.OnTransactionResponseStruct=(0,s.nullable)((0,s.union)([n.OnTransactionResponseWithContentStruct,n.OnTransactionResponseWithIdStruct]))}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/transaction.cjs"}],[139,{"../../../shared/constants/app":5798,"../../../shared/lib/trace":5892},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return async function(e,t,n){const{id:r,method:o}=e,c=a[o];c&&(e.traceContext=await(0,s.trace)({name:c,id:r,tags:i[o]}),await(0,s.trace)({name:s.TraceName.Middleware,id:r,parentContext:e.traceContext})),n()}};var r=e("../../../shared/constants/app"),s=e("../../../shared/lib/trace");const a={[r.MESSAGE_TYPE.ETH_SEND_TRANSACTION]:s.TraceName.Transaction,[r.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:s.TraceName.Signature,[r.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:s.TraceName.Signature,[r.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:s.TraceName.Signature,[r.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:s.TraceName.Signature,[r.MESSAGE_TYPE.PERSONAL_SIGN]:s.TraceName.Signature},i={[r.MESSAGE_TYPE.ETH_SEND_TRANSACTION]:{source:"dapp"}}}}},{package:"$root$",file:"app/scripts/lib/createTracingMiddleware.ts"}],[1390,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.HandlerType=void 0,function(e){e.OnRpcRequest="onRpcRequest",e.OnSignature="onSignature",e.OnTransaction="onTransaction",e.OnCronjob="onCronjob",e.OnInstall="onInstall",e.OnUpdate="onUpdate",e.OnNameLookup="onNameLookup",e.OnKeyringRequest="onKeyringRequest",e.OnHomePage="onHomePage",e.OnSettingsPage="onSettingsPage",e.OnUserInput="onUserInput",e.OnAssetsLookup="onAssetsLookup",e.OnAssetsConversion="onAssetsConversion",e.OnAssetHistoricalPrice="onAssetHistoricalPrice",e.OnProtocolRequest="onProtocolRequest",e.OnClientRequest="onClientRequest"}(r||(n.HandlerType=r={}))}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/handlers/types.cjs"}],[1391,{"./svg.cjs":1405,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSvgDimensions=n.assertIsSnapIcon=n.SVG_MAX_BYTE_SIZE_TEXT=n.SVG_MAX_BYTE_SIZE=void 0;const r=e("@metamask/utils"),s=e("./svg.cjs");n.SVG_MAX_BYTE_SIZE=1e5,n.SVG_MAX_BYTE_SIZE_TEXT=`${Math.floor(n.SVG_MAX_BYTE_SIZE/1e3)}kb`,n.assertIsSnapIcon=function(e){(0,r.assert)(e.path.endsWith(".svg"),'Expected snap icon to end in ".svg".');const t="string"==typeof e.value?(0,r.stringToBytes)(e.value).byteLength:e.value.byteLength;(0,r.assert)(t<=n.SVG_MAX_BYTE_SIZE,`The specified SVG icon exceeds the maximum size of ${n.SVG_MAX_BYTE_SIZE_TEXT}.`),(0,r.assert)((0,s.isSvg)(e.toString()),"Snap icon must be a valid SVG.")},n.getSvgDimensions=function(e){try{const t=(0,s.parseSvg)(e),n=t["@_height"],a=t["@_width"];if(n&&a)return{height:n,width:a};const i=t["@_viewBox"];if(i){const[e,t,n,s]=i.split(" ");if(n&&s){const e=parseInt(n,10),t=parseInt(s,10);return(0,r.assert)(Number.isInteger(e)&&e>0),(0,r.assert)(Number.isInteger(t)&&t>0),{width:e,height:t}}}}catch{throw new Error("Snap icon must be a valid SVG.")}return null}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/icon.cjs"}],[1392,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createWindow=void 0,n.createWindow=async function({uri:e,id:t,sandbox:n=!0,testId:r="snaps-iframe"}){return await new Promise(((s,a)=>{const i=document.createElement("iframe");i.setAttribute("id",t),i.setAttribute("data-testid",r),n&&i.setAttribute("sandbox","allow-scripts"),i.setAttribute("src",e),document.body.appendChild(i),i.addEventListener("load",(()=>{i.contentWindow?s(i.contentWindow):a(new Error(`iframe.contentWindow not present on load for job "${t}".`))}))}))}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/iframe.cjs"}],[1393,{"./account.cjs":1366,"./array.cjs":1367,"./auxiliary-files.cjs":1368,"./base64.cjs":1369,"./bytes.cjs":1370,"./caveats.cjs":1371,"./checksum.cjs":1372,"./constants.cjs":1373,"./cronjob.cjs":1374,"./currency.cjs":1375,"./deep-clone.cjs":1376,"./default-endowments.cjs":1377,"./derivation-paths.cjs":1378,"./entropy.cjs":1379,"./errors.cjs":1380,"./handlers/index.cjs":1385,"./iframe.cjs":1392,"./json-rpc.cjs":1394,"./json.cjs":1395,"./localization.cjs":1396,"./logging.cjs":1397,"./manifest/index.cjs":1398,"./path.cjs":1400,"./platform-version.cjs":1401,"./snaps.cjs":1402,"./strings.cjs":1403,"./structs.cjs":1404,"./time.cjs":1406,"./types.cjs":1407,"./ui.cjs":1408,"./url.cjs":1409,"./validation.cjs":1410,"./versions.cjs":1411,"./virtual-file/index.cjs":1413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},s=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./account.cjs"),n),s(e("./array.cjs"),n),s(e("./auxiliary-files.cjs"),n),s(e("./base64.cjs"),n),s(e("./bytes.cjs"),n),s(e("./caveats.cjs"),n),s(e("./checksum.cjs"),n),s(e("./constants.cjs"),n),s(e("./cronjob.cjs"),n),s(e("./currency.cjs"),n),s(e("./deep-clone.cjs"),n),s(e("./default-endowments.cjs"),n),s(e("./derivation-paths.cjs"),n),s(e("./entropy.cjs"),n),s(e("./errors.cjs"),n),s(e("./handlers/index.cjs"),n),s(e("./iframe.cjs"),n),s(e("./json.cjs"),n),s(e("./json-rpc.cjs"),n),s(e("./localization.cjs"),n),s(e("./logging.cjs"),n),s(e("./manifest/index.cjs"),n),s(e("./path.cjs"),n),s(e("./platform-version.cjs"),n),s(e("./snaps.cjs"),n),s(e("./strings.cjs"),n),s(e("./structs.cjs"),n),s(e("./time.cjs"),n),s(e("./types.cjs"),n),s(e("./ui.cjs"),n),s(e("./url.cjs"),n),s(e("./validation.cjs"),n),s(e("./versions.cjs"),n),s(e("./virtual-file/index.cjs"),n)}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/index.cjs"}],[1394,{"@metamask/permission-controller":2385,"@metamask/superstruct":2875,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertIsJsonRpcSuccess=n.isOriginAllowed=n.assertIsKeyringOrigins=n.KeyringOriginsStruct=n.assertIsRpcOrigins=n.RpcOriginsStruct=void 0;const r=e("@metamask/permission-controller"),s=e("@metamask/superstruct"),a=e("@metamask/utils"),i=(0,s.array)((0,s.refine)((0,s.string)(),"Allowed origin",(e=>!(e.split("*").length-1>2)||'No more than two wildcards ("*") are allowed in an origin specifier.')));function o(e,t){if("*"===e||e===t)return!0;const n=function(e){const t=e.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*");return RegExp(`^${t}$`,"u")}(e);return n.test(t)}n.RpcOriginsStruct=(0,s.refine)((0,s.object)({dapps:(0,s.optional)((0,s.boolean)()),snaps:(0,s.optional)((0,s.boolean)()),allowedOrigins:(0,s.optional)(i)}),"RPC origins",(e=>!!Boolean(!0===e.snaps||!0===e.dapps||e.allowedOrigins&&e.allowedOrigins.length>0)||"Must specify at least one JSON-RPC origin.")),n.assertIsRpcOrigins=function(e,t){(0,a.assertStruct)(e,n.RpcOriginsStruct,"Invalid JSON-RPC origins",t)},n.KeyringOriginsStruct=(0,s.object)({allowedOrigins:(0,s.optional)(i)}),n.assertIsKeyringOrigins=function(e,t){(0,a.assertStruct)(e,n.KeyringOriginsStruct,"Invalid keyring origins",t)},n.isOriginAllowed=function(e,t,n){var s;return"metamask"===n||(!(null===(s=e.allowedOrigins)||void 0===s||!s.some((e=>o(e,n))))||(!(t!==r.SubjectType.Website||!e.dapps)||Boolean(t===r.SubjectType.Snap&&e.snaps)))},n.assertIsJsonRpcSuccess=function(e){if(!(0,a.isJsonRpcSuccess)(e)){if((0,a.isJsonRpcFailure)(e))throw new Error(`JSON-RPC request failed: ${e.error.message}`);throw new Error("Invalid JSON-RPC response.")}}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/json-rpc.cjs"}],[1395,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonSizeUnsafe=n.parseJson=void 0;const r=e("@metamask/utils");n.parseJson=function(e){return(0,r.getSafeJson)(JSON.parse(e))},n.getJsonSizeUnsafe=function(e){return JSON.stringify(e).length}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/json.cjs"}],[1396,{"./json.cjs":1395,"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSnapManifestLocalizations=n.getLocalizedSnapManifest=n.translate=n.TRANSLATION_REGEX=n.getLocalizationFile=n.getValidatedLocalizationFiles=n.LocalizationFileStruct=n.LOCALIZABLE_FIELDS=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),a=e("./json.cjs");function i(e,t){const n=t.find((t=>t.locale===e));return n||t.find((e=>"en"===e.locale))}function o(e,t){const r=e.matchAll(n.TRANSLATION_REGEX);return Array.from(r).reduce(((n,[r,s])=>{if(!t)throw new Error(`Failed to translate "${e}": No localization file found.`);const a=t.messages[s.trim()];if(!a)throw new Error(`Failed to translate "${e}": No translation found for "${s.trim()}" in "${t.locale}" file.`);return n.replace(r,a.message)}),e)}function c(e,t,r){const s=i(t,r);return n.LOCALIZABLE_FIELDS.reduce(((e,t)=>{const n=o(e[t],s);return{...e,[t]:n}}),e)}n.LOCALIZABLE_FIELDS=["description","proposedName"],n.LocalizationFileStruct=(0,s.object)({locale:(0,s.string)(),messages:(0,s.record)((0,s.string)(),(0,s.object)({message:(0,s.string)(),description:(0,s.optional)((0,s.string)())}))}),n.getValidatedLocalizationFiles=function(e){for(const t of e)try{t.result=(0,s.create)((0,a.parseJson)(t.toString()),n.LocalizationFileStruct)}catch(e){if(e instanceof s.StructError)throw new Error(`Failed to validate localization file "${t.path}": ${e.message}.`);if(e instanceof SyntaxError)throw new Error(`Failed to parse localization file "${t.path}" as JSON.`);throw e}return e},n.getLocalizationFile=i,n.TRANSLATION_REGEX=/\{\{\s?([a-zA-Z0-9-_\s]+)\s?\}\}/gu,n.translate=o,n.getLocalizedSnapManifest=c,n.validateSnapManifestLocalizations=function(e,t){try{t.filter((e=>"en"!==e.locale)).forEach((n=>{c(e,n.locale,t)})),c(e,"en",t)}catch(e){throw new Error(`Failed to localize Snap manifest: ${(0,r.getErrorMessage)(e)}`)}}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/localization.cjs"}],[1397,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.logWarning=n.logError=n.logInfo=n.snapsLogger=void 0;const r=e("@metamask/utils");n.snapsLogger=(0,r.createProjectLogger)("snaps"),n.logInfo=function(e,...t){console.log(e,...t)},n.logError=function(e,...t){console.error(e,...t)},n.logWarning=function(e,...t){console.warn(e,...t)}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/logging.cjs"}],[1398,{"./validation.cjs":1399},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},s=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./validation.cjs"),n)}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/manifest/index.cjs"}],[1399,{"../array.cjs":1367,"../cronjob.cjs":1374,"../entropy.cjs":1379,"../json-rpc.cjs":1394,"../snaps.cjs":1402,"../structs.cjs":1404,"../types.cjs":1407,"@metamask/key-tree":2051,"@metamask/superstruct":2875,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSnapManifest=n.assertIsSnapManifest=n.isSnapManifest=n.SnapManifestStruct=n.InitialConnectionsStruct=n.SnapAuxilaryFilesStruct=n.PermissionsStruct=n.EmptyObjectStruct=n.HandlerCaveatsStruct=n.ProtocolScopesStruct=n.MaxRequestTimeStruct=n.MAXIMUM_REQUEST_TIMEOUT=n.MINIMUM_REQUEST_TIMEOUT=n.LookupMatchersStruct=n.ChainIdsStruct=n.SnapIdsStruct=n.SemVerRangeStruct=n.SnapGetBip32EntropyPermissionsStruct=n.Bip32EntropyStruct=n.CurveStruct=n.bip32entropy=n.Bip32PathStruct=n.FORBIDDEN_COIN_TYPES=void 0;const r=e("@metamask/key-tree"),s=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("../array.cjs"),o=e("../cronjob.cjs"),c=e("../entropy.cjs"),l=e("../json-rpc.cjs"),u=e("../snaps.cjs"),d=e("../structs.cjs"),p=e("../types.cjs"),m=[c.SIP_6_MAGIC_VALUE,c.STATE_ENCRYPTION_MAGIC_VALUE];n.FORBIDDEN_COIN_TYPES=[60];const h=n.FORBIDDEN_COIN_TYPES.map((e=>["m","44'",`${e}'`]));n.Bip32PathStruct=(0,s.refine)((0,s.array)((0,s.string)()),"BIP-32 path",(e=>0===e.length?"Path must be a non-empty BIP-32 derivation path array":"m"!==e[0]?'Path must start with "m".':e.length<3?"Paths must have a length of at least three.":e.slice(1).some((e=>!(0,r.isValidBIP32PathSegment)(e)))?"Path must be a valid BIP-32 derivation path array.":m.includes(e[1])?`The purpose "${e[1]}" is not allowed for entropy derivation.`:!h.some((t=>(0,i.isEqual)(e.slice(0,t.length),t)))||`The path "${e.join("/")}" is not allowed for entropy derivation.`));n.bip32entropy=e=>(0,s.refine)(e,"BIP-32 entropy",(e=>"ed25519"!==e.curve||!e.path.slice(1).some((e=>!e.endsWith("'")))||"Ed25519 does not support unhardened paths.")),n.CurveStruct=(0,s.enums)(["ed25519","secp256k1","ed25519Bip32"]),n.Bip32EntropyStruct=(0,n.bip32entropy)((0,s.type)({path:n.Bip32PathStruct,curve:n.CurveStruct})),n.SnapGetBip32EntropyPermissionsStruct=(0,s.size)((0,s.array)(n.Bip32EntropyStruct),1,Infinity),n.SemVerRangeStruct=(0,s.refine)((0,s.string)(),"SemVer range",(e=>!!(0,a.isValidSemVerRange)(e)||"Expected a valid SemVer range.")),n.SnapIdsStruct=(0,s.refine)((0,s.record)(u.SnapIdStruct,(0,s.object)({version:(0,s.optional)(n.SemVerRangeStruct)})),"SnapIds",(e=>0!==Object.keys(e).length)),n.ChainIdsStruct=(0,s.size)((0,s.array)(a.CaipChainIdStruct),1,Infinity),n.LookupMatchersStruct=(0,s.union)([(0,s.object)({tlds:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity)}),(0,s.object)({schemes:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity)}),(0,s.object)({tlds:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity),schemes:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity)})]),n.MINIMUM_REQUEST_TIMEOUT=(0,a.inMilliseconds)(5,a.Duration.Second),n.MAXIMUM_REQUEST_TIMEOUT=(0,a.inMilliseconds)(3,a.Duration.Minute),n.MaxRequestTimeStruct=(0,s.size)((0,s.integer)(),n.MINIMUM_REQUEST_TIMEOUT,n.MAXIMUM_REQUEST_TIMEOUT),n.ProtocolScopesStruct=(0,s.record)(a.CaipChainIdStruct,(0,s.object)({methods:(0,s.array)((0,s.string)())})),n.HandlerCaveatsStruct=(0,s.object)({maxRequestTime:(0,s.optional)(n.MaxRequestTimeStruct)}),n.EmptyObjectStruct=(0,s.object)({}),n.PermissionsStruct=(0,s.type)({"endowment:assets":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({scopes:n.ChainIdsStruct}))),"endowment:cronjob":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({jobs:(0,s.optional)(o.CronjobSpecificationArrayStruct)}))),"endowment:ethereum-provider":(0,s.optional)(n.EmptyObjectStruct),"endowment:keyring":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,l.KeyringOriginsStruct)),"endowment:protocol":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({scopes:n.ProtocolScopesStruct}))),"endowment:lifecycle-hooks":(0,s.optional)(n.HandlerCaveatsStruct),"endowment:name-lookup":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({chains:(0,s.optional)(n.ChainIdsStruct),matchers:(0,s.optional)(n.LookupMatchersStruct)}))),"endowment:network-access":(0,s.optional)(n.EmptyObjectStruct),"endowment:page-home":(0,s.optional)(n.HandlerCaveatsStruct),"endowment:rpc":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,l.RpcOriginsStruct)),"endowment:signature-insight":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({allowSignatureOrigin:(0,s.optional)((0,s.boolean)())}))),"endowment:transaction-insight":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({allowTransactionOrigin:(0,s.optional)((0,s.boolean)())}))),"endowment:webassembly":(0,s.optional)(n.EmptyObjectStruct),snap_dialog:(0,s.optional)(n.EmptyObjectStruct),snap_manageState:(0,s.optional)(n.EmptyObjectStruct),snap_manageAccounts:(0,s.optional)(n.EmptyObjectStruct),snap_notify:(0,s.optional)(n.EmptyObjectStruct),snap_getBip32Entropy:(0,s.optional)(n.SnapGetBip32EntropyPermissionsStruct),snap_getBip32PublicKey:(0,s.optional)(n.SnapGetBip32EntropyPermissionsStruct),snap_getBip44Entropy:(0,s.optional)((0,s.size)((0,s.array)((0,s.object)({coinType:(0,s.size)((0,s.integer)(),0,2**32-1)})),1,Infinity)),snap_getEntropy:(0,s.optional)(n.EmptyObjectStruct),snap_getLocale:(0,s.optional)(n.EmptyObjectStruct),wallet_snap:(0,s.optional)(n.SnapIdsStruct)}),n.SnapAuxilaryFilesStruct=(0,s.array)((0,s.string)()),n.InitialConnectionsStruct=(0,s.record)((0,s.intersection)([(0,s.string)(),(0,p.uri)()]),(0,s.object)({})),n.SnapManifestStruct=(0,s.object)({version:a.VersionStruct,description:(0,s.size)((0,s.string)(),1,280),proposedName:(0,s.size)((0,s.string)(),1,214),repository:(0,s.optional)((0,s.type)({type:(0,s.size)((0,s.string)(),1,Infinity),url:(0,s.size)((0,s.string)(),1,Infinity)})),source:(0,s.object)({shasum:a.ChecksumStruct,location:(0,s.object)({npm:(0,s.object)({filePath:(0,s.size)((0,s.string)(),1,Infinity),iconPath:(0,s.optional)((0,s.size)((0,s.string)(),1,Infinity)),packageName:p.NameStruct,registry:(0,s.union)([(0,s.literal)("https://registry.npmjs.org"),(0,s.literal)("https://registry.npmjs.org/")])})}),files:(0,s.optional)(n.SnapAuxilaryFilesStruct),locales:(0,s.optional)(n.SnapAuxilaryFilesStruct)}),initialConnections:(0,s.optional)(n.InitialConnectionsStruct),initialPermissions:n.PermissionsStruct,manifestVersion:(0,s.literal)("0.1"),platformVersion:(0,s.optional)(a.VersionStruct),$schema:(0,s.optional)((0,s.string)())}),n.isSnapManifest=function(e){return(0,s.is)(e,n.SnapManifestStruct)},n.assertIsSnapManifest=function(e){(0,a.assertStruct)(e,n.SnapManifestStruct,`"${p.NpmSnapFileNames.Manifest}" is invalid`)},n.createSnapManifest=function(e){return(0,s.create)(e,n.SnapManifestStruct)}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/manifest/validation.cjs"}],[14,{"@metamask/assets-controllers":1457},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NftDetectionControllerInit=void 0;var r=e("@metamask/assets-controllers");n.NftDetectionControllerInit=e=>{const{controllerMessenger:t,getController:n}=e,s=()=>n("NftController");return{controller:new r.NftDetectionController({messenger:t,addNft:(...e)=>s().addNft(...e),getNftState:()=>s().state,disabled:!n("PreferencesController").state.useNftDetection})}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/nft-detection-controller-init.ts"}],[140,{"../../../../shared/lib/deep-links/constants":5844,"../../../../shared/lib/deep-links/parse":5846,"../../../../shared/lib/deep-links/routes/route":5852,"../../../../shared/lib/deep-links/verify":5854,"../../../../shared/modules/mv3.utils":5913,events:4454,loglevel:4920,"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DeepLinkRouter=void 0;var r=d(e("events")),s=d(e("webextension-polyfill")),a=d(e("loglevel")),i=e("../../../../shared/modules/mv3.utils"),o=e("../../../../shared/lib/deep-links/parse"),c=e("../../../../shared/lib/deep-links/constants"),l=e("../../../../shared/lib/deep-links/routes/route"),u=e("../../../../shared/lib/deep-links/verify");function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=l.DEEP_LINK_ROUTE.replace(/^\//u,"");class h extends r.default{constructor({getExtensionURL:e,getState:t}){super(),p(this,"getExtensionURL",void 0),p(this,"getState",void 0),p(this,"handleBeforeRequest",(({tabId:e,url:t})=>e===s.default.tabs.TAB_ID_NONE?{}:this.tryNavigateTo(e,t))),this.getExtensionURL=e,this.getState=t}get404ErrorURL(){return this.getExtensionURL(m,new URLSearchParams({errorCode:"404"}).toString())}async redirectTab(e,t){try{await s.default.tabs.update(e,{url:t})}catch(e){a.default.error("Error redirecting tab:",e),this.emit("error",e)}}install(){s.default.webRequest.onBeforeRequest.addListener(this.handleBeforeRequest,{urls:[`*://*.${c.DEEP_LINK_HOST}/*`],types:["main_frame"]},i.isManifestV3?[]:["blocking"])}uninstall(){s.default.webRequest.onBeforeRequest.removeListener(this.handleBeforeRequest)}async tryNavigateTo(e,t){if(t.length>c.DEEP_LINK_MAX_LENGTH)return a.default.debug("Url is too long, skipping deep link handling"),{};let n;try{const e=new URL(t),r=await(0,o.parse)(e);if(r)if(this.emit("navigate",{url:e,parsed:r}),"redirectTo"in r.destination)n=r.destination.redirectTo.toString();else if(this.canSkipInterstitial(r.signature))n=this.getExtensionURL(r.destination.path,r.destination.query.toString());else{const t=new URLSearchParams({u:e.pathname+e.search});n=this.getExtensionURL(m,t.toString())}else n=this.get404ErrorURL()}catch(e){a.default.error("Invalid URL:",t,e),this.emit("error",e),n=this.get404ErrorURL()}return this.redirectTab(e,n),i.isManifestV3?{}:{cancel:!0}}canSkipInterstitial(e){var t;return e===u.VALID&&Boolean(null===(t=this.getState().preferences)||void 0===t?void 0:t.skipDeepLinkInterstitial)}}n.DeepLinkRouter=h}}},{package:"$root$",file:"app/scripts/lib/deep-links/deep-link-router.ts"}],[1400,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeRelative=void 0;const r=e("@metamask/utils");n.normalizeRelative=function(e){return(0,r.assert)(!e.startsWith("/")),(0,r.assert)(-1===e.search(/:|\/\//u),`Path "${e}" potentially an URI instead of local relative`),e.startsWith("./")?e.slice(2):e}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/path.cjs"}],[1401,{"@metamask/snaps-sdk/package.json":2824},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getPlatformVersion=void 0;const s=r(e("@metamask/snaps-sdk/package.json"));n.getPlatformVersion=function(){return s.default.version}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/platform-version.cjs"}],[1402,{"./caveats.cjs":1371,"./checksum.cjs":1372,"./types.cjs":1407,"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875,"@metamask/utils":2974,"@scure/base":3051,"fast-json-stable-stringify":4490,"validate-npm-package-name":5757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.verifyRequestedSnapPermissions=n.isSnapPermitted=n.assertIsValidSnapId=n.isSnapId=n.stripSnapPrefix=n.getSnapPrefix=n.SnapIdStruct=n.SnapIdPrefixStruct=n.HttpSnapIdStruct=n.NpmSnapIdStruct=n.LocalSnapIdStruct=n.BaseSnapIdStruct=n.LOCALHOST_HOSTNAMES=n.validateSnapShasum=n.getSnapChecksum=n.SnapStatusEvents=n.SnapStatus=n.PROPOSED_NAME_REGEX=void 0;const s=e("@metamask/snaps-sdk"),a=e("@metamask/superstruct"),i=e("@metamask/utils"),o=e("@scure/base"),c=r(e("fast-json-stable-stringify")),l=r(e("validate-npm-package-name")),u=e("./caveats.cjs"),d=e("./checksum.cjs"),p=e("./types.cjs");var m,h;function f(e){const t=e.clone();return delete t.result.source.shasum,t.value=(0,c.default)(t.result),t}async function g(e){const{manifest:t,sourceCode:n,svgIcon:r,auxiliaryFiles:s,localizationFiles:a}=e,i=[f(t),n,r,...s,...a].filter((e=>e!==undefined));return o.base64.encode(await(0,d.checksumFiles)(i))}n.PROPOSED_NAME_REGEX=/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u,function(e){e.Installing="installing",e.Updating="updating",e.Running="running",e.Stopped="stopped",e.Crashed="crashed"}(m||(n.SnapStatus=m={})),function(e){e.Start="START",e.Stop="STOP",e.Crash="CRASH",e.Update="UPDATE"}(h||(n.SnapStatusEvents=h={})),n.getSnapChecksum=g,n.validateSnapShasum=async function(e,t="Invalid Snap manifest: manifest shasum does not match computed shasum."){if(e.manifest.result.source.shasum!==await g(e))throw new Error(t)},n.LOCALHOST_HOSTNAMES=["localhost","127.0.0.1","[::1]"],n.BaseSnapIdStruct=(0,i.definePattern)("Base Snap Id",/^[\x21-\x7E]*$/u);const y=(0,p.uri)({protocol:(0,a.enums)(["http:","https:"]),hostname:(0,a.enums)(n.LOCALHOST_HOSTNAMES),hash:(0,a.empty)((0,a.string)()),search:(0,a.empty)((0,a.string)())});function b(e){const t=Object.values(p.SnapIdPrefixes).find((t=>e.startsWith(t)));if(t!==undefined)return t;throw new Error(`Invalid or no prefix found for "${e}"`)}n.LocalSnapIdStruct=(0,a.refine)(n.BaseSnapIdStruct,"local Snap Id",(e=>{if(!e.startsWith(p.SnapIdPrefixes.local))return`Expected local snap ID, got "${e}".`;const[t]=(0,a.validate)(e.slice(p.SnapIdPrefixes.local.length),y);return t??!0})),n.NpmSnapIdStruct=(0,a.intersection)([n.BaseSnapIdStruct,(0,p.uri)({protocol:(0,a.literal)(p.SnapIdPrefixes.npm),pathname:(0,a.refine)((0,a.string)(),"package name",(function*(e){const t=e.startsWith("/")?e.slice(1):e,{errors:n,validForNewPackages:r,warnings:s}=(0,l.default)(t);return r||(n===undefined?((0,i.assert)(s!==undefined),yield*s):yield*n),!0})),search:(0,a.empty)((0,a.string)()),hash:(0,a.empty)((0,a.string)())})]),n.HttpSnapIdStruct=(0,a.intersection)([n.BaseSnapIdStruct,(0,p.uri)({protocol:(0,a.enums)(["http:","https:"]),search:(0,a.empty)((0,a.string)()),hash:(0,a.empty)((0,a.string)())})]),n.SnapIdPrefixStruct=(0,a.refine)((0,a.string)(),"Snap ID prefix",(e=>{if(Object.values(p.SnapIdPrefixes).some((t=>e.startsWith(t))))return!0;return`Invalid or no prefix found. Expected Snap ID to start with one of: ${Object.values(p.SnapIdPrefixes).map((e=>`"${e}"`)).join(", ")}, but received: "${e}"`})),n.SnapIdStruct=(0,s.selectiveUnion)((e=>"string"==typeof e&&e.startsWith(p.SnapIdPrefixes.npm)?n.NpmSnapIdStruct:"string"==typeof e&&e.startsWith(p.SnapIdPrefixes.local)?n.LocalSnapIdStruct:n.SnapIdPrefixStruct)),n.getSnapPrefix=b,n.stripSnapPrefix=function(e){return e.replace(b(e),"")},n.isSnapId=function(e){return(0,a.is)(e,n.SnapIdStruct)},n.assertIsValidSnapId=function(e){(0,i.assertStruct)(e,n.SnapIdStruct,"Invalid snap ID")},n.isSnapPermitted=function(e,t){var n,r;return Boolean(null===(n=((null==e||null===(r=e.wallet_snap)||void 0===r||null===(r=r.caveats)||void 0===r?void 0:r.find((e=>e.type===u.SnapCaveatType.SnapIds)))??{}).value)||void 0===n?void 0:n[t])},n.verifyRequestedSnapPermissions=function(e){(0,i.assert)((0,i.isObject)(e),"Requested permissions must be an object.");const{wallet_snap:t}=e;(0,i.assert)((0,i.isObject)(t),"wallet_snap is missing from the requested permissions.");const{caveats:n}=t;(0,i.assert)(Array.isArray(n)&&1===n.length,"wallet_snap must have a caveat property with a single-item array value.");const[r]=n;(0,i.assert)((0,i.isObject)(r)&&r.type===u.SnapCaveatType.SnapIds&&(0,i.isObject)(r.value),`The requested permissions do not have a valid ${u.SnapCaveatType.SnapIds} caveat.`)}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/snaps.cjs"}],[1403,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.indent=void 0,n.indent=function(e,t=2){return e.replace(/^/gmu," ".repeat(t))}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/strings.cjs"}],[1404,{"./strings.cjs":1403,"@metamask/snaps-sdk":2739,"@metamask/superstruct":2875,"@metamask/utils":2974,chalk:4128},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeStructs=n.createUnion=n.validateUnion=n.getStructErrorMessage=n.getStructFailureMessage=n.getStructErrorPrefix=n.getUnionStructNames=n.getStructFromPath=n.createFromStruct=n.getError=n.arrayToGenerator=n.SnapsStructError=n.named=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),a=e("@metamask/utils"),i=e("chalk"),o=e("./strings.cjs");function c(e,t,n){return n?t(e):e}n.named=function(e,t){return new s.Struct({...t,type:e})};class l extends s.StructError{constructor(e,t,n,r,s,a=!0){super(r,s),this.name="SnapsStructError",this.message=`${t}.\n\n${g(e,[...s()],a)}${n?`\n\n${n}`:""}`}}function*u(e){for(const t of e)yield t}function d({struct:e,prefix:t,suffix:n="",error:r,colorize:s}){return new l(e,t,n,r,(()=>u(r.failures())),s)}function p(e,t){return t.reduce(((t,n)=>(0,a.isObject)(e.schema)&&e.schema[n]?e.schema[n]:t),e)}function m(e,t=!0){return Array.isArray(e.schema)?e.schema.map((({type:e})=>c(e,i.green,t))):null}function h(e,t=!0){return"never"===e.type||0===e.path.length?"":`At path: ${c(e.path.join("."),i.bold,t)} — `}function f(e,t,n=!0){const r=c(JSON.stringify(t.value),i.red,n),s=h(t,n);if("union"===t.type){const a=m(p(e,t.path),n);return a?`${s}Expected the value to be one of: ${a.join(", ")}, but received: ${r}.`:`${s}${t.message}.`}if("literal"===t.type){return`${s}${t.message.replace(/the literal `(.+)`,/u,`the value to be \`${c("$1",i.green,n)}\`,`).replace(/, but received: (.+)/u,`, but received: ${c("$1",i.red,n)}`)}.`}if("never"===t.type)return`Unknown key: ${c(t.path.join("."),i.bold,n)}, received: ${r}.`;if("size"===t.refinement){return`${s}${t.message.replace(/length between `(\d+)` and `(\d+)`/u,`length between ${c("$1",i.green,n)} and ${c("$2",i.green,n)},`).replace(/length of `(\d+)`/u,`length of ${c("$1",i.red,n)}`).replace(/a array/u,"an array")}.`}return t.refinement!==undefined?`${s}${t.message}.`:`${s}Expected a value of type ${c(t.type,i.green,n)}, but received: ${r}.`}function g(e,t,n=!0){return t.map((t=>(0,o.indent)(`• ${f(e,t,n)}`))).join("\n")}function y(e,t,n,i=!1){(0,a.assert)(t.schema,"Expected a struct with a schema. Make sure to use `union` from `@metamask/snaps-sdk`."),(0,a.assert)(t.schema.length>0,"Expected a non-empty array of structs.");const o=t.schema.map((e=>e.schema[n])),c=(0,s.type)({[n]:(0,r.union)(o)}),[l]=(0,s.validate)(e,c,{coerce:i});if(l)throw new Error(f(c,l.failures()[0],!1));const u=e,d=t.schema.filter((e=>(0,s.is)(u[n],e.schema[n])));(0,a.assert)(d.length>0,"Expected a struct to match the value.");const p=d.map((e=>(0,s.validate)(u,e,{coerce:i}))),m=p.find((([e])=>!e));if(m)return m[1];(0,a.assert)(p[0][0],"Expected at least one error.");const h=p.reduce(((e,[t])=>((0,a.assert)(t,"Expected an error."),t.failures().length<e.failures().length?t:e)),p[0][0]);throw new Error(f(t,h.failures()[0],!1))}n.SnapsStructError=l,n.arrayToGenerator=u,n.getError=d,n.createFromStruct=function(e,t,n,r=""){try{return(0,s.create)(e,t)}catch(e){if(e instanceof s.StructError)throw d({struct:t,prefix:n,suffix:r,error:e});throw e}},n.getStructFromPath=p,n.getUnionStructNames=m,n.getStructErrorPrefix=h,n.getStructFailureMessage=f,n.getStructErrorMessage=g,n.validateUnion=y,n.createUnion=function(e,t,n){return y(e,t,n,!0)},n.mergeStructs=function(...e){const t=s.assign(...e);return new s.Struct({...t,*refiner(t,n){for(const r of e)yield*r.refiner(t,n)}})}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/structs.cjs"}],[1405,{"@metamask/utils":2974,"fast-xml-parser":4492},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSvg=n.parseSvg=void 0;const r=e("@metamask/utils"),s=e("fast-xml-parser");function a(e){try{const t=e.trim();(0,r.assert)(t.length>0);const n=new s.XMLParser({ignoreAttributes:!1,parseAttributeValue:!0}).parse(t,!0);return(0,r.assert)((0,r.hasProperty)(n,"svg")),(0,r.isObject)(n.svg)?n.svg:{}}catch{throw new Error("Snap icon must be a valid SVG.")}}n.parseSvg=a,n.isSvg=function(e){try{return a(e),!0}catch{return!1}}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/svg.cjs"}],[1406,{"@metamask/superstruct":2875,luxon:4922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toCensoredISO8601String=n.ISO8601DateStruct=n.ISO8601DurationStruct=void 0;const r=e("@metamask/superstruct"),s=e("luxon");n.ISO8601DurationStruct=(0,r.refine)((0,r.string)(),"ISO 8601 duration",(e=>!!s.Duration.fromISO(e).isValid||"Not a valid ISO 8601 duration"));const a=/Z|([+-]\d{2}:?\d{2})$/u;n.ISO8601DateStruct=(0,r.refine)((0,r.string)(),"ISO 8601 date",(e=>s.DateTime.fromISO(e).isValid?!!a.test(e)||"ISO 8601 date must have timezone information":"Not a valid ISO 8601 date")),n.toCensoredISO8601String=function(e){return s.DateTime.fromISO(e,{setZone:!0}).startOf("second").toISO({suppressMilliseconds:!0})}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/time.cjs"}],[1407,{"@metamask/superstruct":2875,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WALLET_SNAP_PERMISSION_KEY=n.isValidUrl=n.uri=n.SNAP_STREAM_NAMES=n.SnapIdPrefixes=n.NpmSnapPackageJsonStruct=n.NameStruct=n.NpmSnapFileNames=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");var a,i,o;!function(e){e.PackageJson="package.json",e.Manifest="snap.manifest.json"}(a||(n.NpmSnapFileNames=a={})),n.NameStruct=(0,r.size)((0,s.definePattern)("Snap Name",/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/u),1,214),n.NpmSnapPackageJsonStruct=(0,r.type)({version:s.VersionStruct,name:n.NameStruct,main:(0,r.optional)((0,r.size)((0,r.string)(),1,Infinity)),repository:(0,r.optional)((0,r.type)({type:(0,r.size)((0,r.string)(),1,Infinity),url:(0,r.size)((0,r.string)(),1,Infinity)}))}),function(e){e.npm="npm:",e.local="local:"}(i||(n.SnapIdPrefixes=i={})),function(e){e.JSON_RPC="jsonRpc",e.COMMAND="command"}(o||(n.SNAP_STREAM_NAMES=o={}));n.uri=(e={})=>(0,r.refine)((0,r.union)([(0,r.string)(),(0,r.instance)(URL)]),"uri",(t=>{try{const n=new URL(t),s=(0,r.type)(e);return(0,r.assert)(n,s),!0}catch{return`Expected URL, got "${t.toString()}".`}})),n.isValidUrl=function(e,t={}){return(0,r.is)(e,(0,n.uri)(t))},n.WALLET_SNAP_PERMISSION_KEY="wallet_snap"}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/types.cjs"}],[1408,{"./url.cjs":1409,"@metamask/snaps-sdk":2739,"@metamask/snaps-sdk/jsx":2823,"@metamask/snaps-sdk/jsx-runtime":2822,"@metamask/utils":2974,marked:4923},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.serialiseJsx=n.walkJsx=n.getJsxChildren=n.hasChildren=n.getTotalTextLength=n.validateJsxElements=n.validateAssetSelector=n.validateTextLinks=n.validateLink=n.getJsxElementFromComponent=n.getTextChildren=void 0;const r=e("@metamask/snaps-sdk/jsx-runtime"),s=e("@metamask/snaps-sdk"),a=e("@metamask/snaps-sdk/jsx"),i=e("@metamask/utils"),o=e("marked"),c=e("./url.cjs"),l=5e4,u=["https:","mailto:","metamask:"];function d(e){switch(e){case"primary":return"primary";case"secondary":return"destructive";default:return undefined}}function p(e){return 1===e.length?e[0]:e}function m(e){return e.tokens&&e.tokens.length>0?p(e.tokens.flatMap(f)):e.href}function h(e){return p(e.flatMap(f))}function f(e){switch(e.type){case"link":return(0,r.jsx)(a.Link,{href:e.href,children:m(e)});case"text":return e.text;case"strong":return(0,r.jsx)(a.Bold,{children:h(e.tokens)});case"em":return(0,r.jsx)(a.Italic,{children:h(e.tokens)});default:return null}}function g(e){const t=(0,o.lexer)(e,{gfm:!1}),n=[];return(0,o.walkTokens)(t,(e=>{if("paragraph"===e.type){n.length>0&&n.push("\n\n");const{tokens:t}=e;n.push(...t.flatMap(f))}})),n.filter((e=>null!==e))}function y(e,t,n){try{const r=new URL(e);if((0,i.assert)(u.includes(r.protocol),`Protocol must be one of: ${u.join(", ")}.`),"metamask:"===r.protocol){const t=(0,c.parseMetaMaskUrl)(e);t.snapId&&(0,i.assert)(n(t.snapId),"The Snap being navigated to is not installed.")}else if("mailto:"===r.protocol){const e=r.pathname.split(",");for(const n of e){const e=n.split("@")[1];(0,i.assert)(!e.includes(":"));const r=`https://${e}`;(0,i.assert)(!t(r),"The specified URL is not allowed.")}return}(0,i.assert)(!t(r.href),"The specified URL is not allowed.")}catch(e){throw new Error(`Invalid URL: ${"ERR_ASSERTION"===(null==e?void 0:e.code)?e.message:"Unable to parse URL."}`)}}function b(e,t){const n=t(e);(0,i.assert)(n,`Could not find account for address: ${e}`)}function w(e){const{type:t}=e;switch(t){case s.NodeType.Panel:return e.children.reduce(((e,t)=>e+w(t)),0);case s.NodeType.Row:return w(e.value);case s.NodeType.Text:return e.value.length;default:return 0}}function S(e){return(0,i.hasProperty)(e.props,"children")}function v(e){return Boolean(e)&&!0!==e}function T(e){if(S(e)){if(Array.isArray(e.props.children))return e.props.children.filter(v).flat(Infinity);if(e.props.children)return[e.props.children]}return[]}function E(e,t,n=0){if(Array.isArray(e)){for(const r of e){const e=E(r,t,n);if(e!==undefined)return e}return undefined}const r=t(e,n);if(r!==undefined)return r;if((0,i.hasProperty)(e,"props")&&(0,i.isPlainObject)(e.props)&&(0,i.hasProperty)(e.props,"children")){const r=T(e);for(const e of r)if((0,i.isPlainObject)(e)){const r=E(e,t,n+1);if(r!==undefined)return r}}return undefined}function k(e){return Object.entries(e).filter((([e])=>"children"!==e)).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>{return` ${e}=${n=t,"string"==typeof n?`"${n}"`:`{${JSON.stringify(n)}}`}`;var n})).join("")}n.getTextChildren=g,n.getJsxElementFromComponent=function(e){return function(e){const t=w(e);(0,i.assert)(t<=l,`The text in a Snap UI may not be larger than ${l/1e3} kB.`)}(e),function e(t){switch(t.type){case s.NodeType.Address:return(0,r.jsx)(a.Address,{address:t.value});case s.NodeType.Button:return(0,r.jsx)(a.Button,{name:t.name,variant:d(t.variant),type:t.buttonType,children:t.value});case s.NodeType.Copyable:return(0,r.jsx)(a.Copyable,{value:t.value,sensitive:t.sensitive});case s.NodeType.Divider:return(0,r.jsx)(a.Divider,{});case s.NodeType.Form:return(0,r.jsx)(a.Form,{name:t.name,children:p(t.children.map(e))});case s.NodeType.Heading:return(0,r.jsx)(a.Heading,{children:t.value});case s.NodeType.Image:return(0,r.jsx)(a.Image,{src:t.value});case s.NodeType.Input:return(0,r.jsx)(a.Field,{label:t.label,error:t.error,children:(0,r.jsx)(a.Input,{name:t.name,type:t.inputType,value:t.value,placeholder:t.placeholder})});case s.NodeType.Panel:return(0,r.jsx)(a.Box,{children:p(t.children.map(e))});case s.NodeType.Row:return(0,r.jsx)(a.Row,{label:t.label,variant:t.variant,children:e(t.value)});case s.NodeType.Spinner:return(0,r.jsx)(a.Spinner,{});case s.NodeType.Text:return(0,r.jsx)(a.Text,{children:p(g(t.value))});default:return(0,i.assertExhaustive)(t)}}(e)},n.validateLink=y,n.validateTextLinks=function(e,t,n){const r=function(e){const t=(0,o.lexer)(e,{gfm:!1}),n=[];return(0,o.walkTokens)(t,(e=>{"link"===e.type&&n.push(e)})),n}(e);for(const e of r)y(e.href,t,n)},n.validateAssetSelector=b,n.validateJsxElements=function(e,{isOnPhishingList:t,getSnap:n,getAccountByAddress:r}){E(e,(e=>{switch(e.type){case"Link":y(e.props.href,t,n);break;case"AssetSelector":b(e.props.addresses[0],r)}}))},n.getTotalTextLength=w,n.hasChildren=S,n.getJsxChildren=T,n.walkJsx=E,n.serialiseJsx=function e(t,n=0){if(Array.isArray(t))return t.map((t=>e(t,n))).join("");const r="  ".repeat(n);if("string"==typeof t)return`${r}${t}\n`;if(!t)return"";const{type:s,props:a}=t,o=n>0?"\n":"";if((0,i.hasProperty)(a,"children")){const t=e(a.children,n+1);return`${r}<${s}${k(a)}>\n${t}${r}</${s}>${o}`}return`${r}<${s}${k(a)} />${o}`}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/ui.cjs"}],[1409,{"./snaps.cjs":1402,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseMetaMaskUrl=n.SNAP_PATHS=n.CLIENT_PATHS=void 0;const r=e("@metamask/utils"),s=e("./snaps.cjs");n.CLIENT_PATHS=["/"],n.SNAP_PATHS=["/home"],n.parseMetaMaskUrl=function(e){const t=new URL(e),{protocol:a}=t;if("metamask:"!==a)throw new Error(`Unable to parse URL. Expected the protocol to be "metamask:", but received "${a}".`);const[i,...o]=t.href.replace("metamask://","").split("/"),c=`/${o.join("/")}`;switch(i){case"client":return(0,r.assert)(n.CLIENT_PATHS.includes(c),`Unable to navigate to "${c}". The provided path is not allowed.`),{authority:i,path:c};case"snap":return function(e){const t="Invalid MetaMask url:",a=(0,s.stripSnapPrefix)(e.slice(1)),i=e.slice(1).startsWith("npm:")?"npm:":"local:",o=a.startsWith("@"),c=a.split("/"),l=`/${c[c.length-1]}`;let u;if("local:"===i){const[e,,...s]=c.slice(0,-1);u=`${e}//${s.join("/")}`,(0,r.assert)(n.SNAP_PATHS.includes(l),`${t} invalid snap path.`)}else u=o?`${c[0]}/${c[1]}`:c[0],(0,r.assert)(o?3===c.length&&n.SNAP_PATHS.includes(l):2===c.length&&n.SNAP_PATHS.includes(l),`${t} invalid snap path.`);const d=`${i}${u}`;return(0,s.assertIsValidSnapId)(d),{authority:"snap",snapId:d,path:l}}(c);default:throw new Error(`Expected "metamask:" URL to start with "client" or "snap", but received "${i}".`)}}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/url.cjs"}],[141,{"../../../../shared/constants/metametrics":5810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createEvent=function({signature:e,url:t}){const n={route:t.pathname,signature:e},a={};for(const[e,r]of t.searchParams.entries())"sig"!==e&&("attributionId"===e?n.attribution_id=r:s.has(e)?n[e]=r:a[e]=r);return{category:r.MetaMetricsEventCategory.DeepLink,event:r.MetaMetricsEventName.DeepLinkUsed,properties:n,sensitiveProperties:a}};var r=e("../../../../shared/constants/metametrics");const s=new Set(["utm_campaign","utm_content","utm_medium","utm_source","utm_term"])}}},{package:"$root$",file:"app/scripts/lib/deep-links/metrics.ts"}],[1410,{"./icon.cjs":1391,"./localization.cjs":1396,"./manifest/validation.cjs":1399,"./snaps.cjs":1402},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateFetchedSnap=void 0;const r=e("./icon.cjs"),s=e("./localization.cjs"),a=e("./manifest/validation.cjs"),i=e("./snaps.cjs");n.validateFetchedSnap=async function(e){(0,a.assertIsSnapManifest)(e.manifest.result),await(0,i.validateSnapShasum)(e),(0,s.validateSnapManifestLocalizations)(e.manifest.result,e.localizationFiles.map((e=>e.result))),e.svgIcon&&(0,r.assertIsSnapIcon)(e.svgIcon)}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/validation.cjs"}],[1411,{"@metamask/superstruct":2875,"@metamask/utils":2974,semver:5627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resolveVersionRange=n.getTargetVersion=n.DEFAULT_REQUESTED_SNAP_VERSION=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),a=e("semver");n.DEFAULT_REQUESTED_SNAP_VERSION="*",n.getTargetVersion=function(e,t){const n=(0,a.maxSatisfying)(e,t);return n||(0,a.maxSatisfying)(e,t,{includePrerelease:!0})},n.resolveVersionRange=function(e){return e===undefined||"latest"===e?[undefined,n.DEFAULT_REQUESTED_SNAP_VERSION]:(0,r.validate)(e,s.VersionRangeStruct)}}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/versions.cjs"}],[1412,{"../deep-clone.cjs":1376,"@metamask/utils":2974,"@scure/base":3051},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.VirtualFile=void 0;const r=e("@metamask/utils"),s=e("@scure/base"),a=e("../deep-clone.cjs");class i{constructor(e){var t,n,r,s;let a;a="string"==typeof e||e instanceof Uint8Array?{value:e}:e,this.value=(null===(t=a)||void 0===t?void 0:t.value)??"",this.result=(null===(n=a)||void 0===n?void 0:n.result)??undefined,this.data=(null===(r=a)||void 0===r?void 0:r.data)??{},this.path=(null===(s=a)||void 0===s?void 0:s.path)??"/"}get size(){return"string"==typeof this.value?this.value.length:this.value.byteLength}toString(e){if("string"==typeof this.value)return(0,r.assert)(e===undefined,"Tried to encode string."),this.value;if(this.value instanceof Uint8Array&&"hex"===e)return(0,r.bytesToHex)(this.value);if(this.value instanceof Uint8Array&&"base64"===e)return s.base64.encode(this.value);return new TextDecoder(e).decode(this.value)}clone(){const e=new i;return"string"==typeof this.value?e.value=this.value:e.value=this.value.slice(0),e.result=(0,a.deepClone)(this.result),e.data=(0,a.deepClone)(this.data),e.path=this.path,e}}n.VirtualFile=i}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/virtual-file/VirtualFile.cjs"}],[1413,{"./VirtualFile.cjs":1412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},s=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./VirtualFile.cjs"),n)}}},{package:"@metamask/account-tree-controller>@metamask/snaps-utils",file:"node_modules/@metamask/account-tree-controller/node_modules/@metamask/snaps-utils/dist/virtual-file/index.cjs"}],[1414,{"./utils.cjs":1416,"@metamask/base-controller":1476,"@metamask/eth-snap-keyring":1869,"@metamask/keyring-api":2077,"@metamask/keyring-controller":2084,"@metamask/keyring-utils":2157,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,l,u,d,p,m,h,f,g,y,b,w,S,v=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsController=n.EMPTY_ACCOUNT=void 0;const T=e("@metamask/base-controller"),E=e("@metamask/eth-snap-keyring"),k=e("@metamask/keyring-api"),_=e("@metamask/keyring-controller"),A=e("@metamask/keyring-utils"),P=e("@metamask/utils"),C=e("./utils.cjs"),M="AccountsController",I={internalAccounts:{persist:!0,anonymous:!1}},O={internalAccounts:{accounts:{},selectedAccount:""}};n.EMPTY_ACCOUNT={id:"",address:"",options:{},methods:[],type:k.EthAccountType.Eoa,scopes:[k.EthScope.Eoa],metadata:{name:"",keyring:{type:""},importTime:0}};class j extends T.BaseController{constructor({messenger:e,state:t}){super({messenger:e,name:M,metadata:I,state:{...O,...t}}),r.add(this),v(this,r,"m",w).call(this),v(this,r,"m",S).call(this)}getAccount(e){return this.state.internalAccounts.accounts[e]}listAccounts(){return Object.values(this.state.internalAccounts.accounts).filter((e=>(0,k.isEvmAccountType)(e.type)))}listMultichainAccounts(e){const t=Object.values(this.state.internalAccounts.accounts);if(!e)return t;if(!(0,P.isCaipChainId)(e))throw new Error(`Invalid CAIP-2 chain ID: ${String(e)}`);return t.filter((t=>(0,A.isScopeEqualToAny)(e,t.scopes)))}getAccountExpect(e){const t=this.getAccount(e);if(t===undefined)throw new Error(`Account Id "${e}" not found`);return t}getSelectedAccount(){const{internalAccounts:{selectedAccount:e}}=this.state;if(""===e)return n.EMPTY_ACCOUNT;const t=this.getAccountExpect(e);if((0,k.isEvmAccountType)(t.type))return t;const s=this.listAccounts();if(!s.length)throw new Error("No EVM accounts");return v(this,r,"m",h).call(this,s)}getSelectedMultichainAccount(e){const{internalAccounts:{selectedAccount:t}}=this.state;if(""===t)return n.EMPTY_ACCOUNT;if(!e)return this.getAccountExpect(t);const s=this.listMultichainAccounts(e);return v(this,r,"m",h).call(this,s)}getAccountByAddress(e){return this.listMultichainAccounts().find((t=>t.address.toLowerCase()===e.toLowerCase()))}setSelectedAccount(e){const t=this.getAccountExpect(e);v(this,r,"m",d).call(this,(e=>{const{internalAccounts:n}=e;n.accounts[t.id].metadata.lastSelected=Date.now(),n.selectedAccount=t.id}))}setAccountName(e,t){this.updateAccountMetadata(e,{name:t,nameLastUpdatedAt:Date.now()})}setAccountNameAndSelectAccount(e,t){const n=this.getAccountExpect(e);v(this,r,"m",s).call(this,n,t);const a={...n,metadata:{...n.metadata,name:t,nameLastUpdatedAt:Date.now(),lastSelected:v(this,r,"m",f).call(this)}};v(this,r,"m",d).call(this,(e=>{e.internalAccounts.accounts[n.id]=a,e.internalAccounts.selectedAccount=n.id})),this.messagingSystem.publish("AccountsController:accountRenamed",a)}updateAccountMetadata(e,t){const n=this.getAccountExpect(e);t.name&&v(this,r,"m",s).call(this,n,t.name);const a={...n,metadata:{...n.metadata,...t}};v(this,r,"m",d).call(this,(t=>{t.internalAccounts.accounts[e]=a})),t.name&&this.messagingSystem.publish("AccountsController:accountRenamed",a)}async updateAccounts(){const e=await v(this,r,"m",o).call(this),t=await v(this,r,"m",c).call(this),n=new Map,s=this.state.internalAccounts.accounts,a=[...t,...e].reduce(((e,t)=>{const a=(0,C.keyringTypeToName)(t.metadata.keyring.type),i=n.get(a)??0;i?n.set(a,i+1):n.set(a,1);const o=s[t.id];return e[t.id]={...t,metadata:{...t.metadata,name:v(this,r,"m",b).call(this,o?.id,"name")??`${a} ${i+1}`,importTime:v(this,r,"m",b).call(this,o?.id,"importTime")??Date.now(),lastSelected:v(this,r,"m",b).call(this,o?.id,"lastSelected")??0}},e}),{});v(this,r,"m",d).call(this,(e=>{e.internalAccounts.accounts=a}))}loadBackup(e){e.internalAccounts&&this.update((t=>{t.internalAccounts=e.internalAccounts}))}getNextAvailableAccountName(e=_.KeyringTypes.hd,t){const n=(0,C.keyringTypeToName)(e),s=v(this,r,"m",m).call(this,e,t),a=s.reduce(((e,t)=>{const r=new RegExp(`${n} ([0-9]+)$`,"u").exec(t.metadata.name);if(r){const t=parseInt(r[1],10);return Math.max(e,t)}return e}),0),i=Math.max(s.length+1,a+1);return`${n} ${i}`}}n.AccountsController=j,r=new WeakSet,s=function(e,t){if(this.listMultichainAccounts().find((n=>n.metadata.name===t&&n.id!==e.id)))throw new Error("Account name already exists")},a=function(e,t){return{id:(0,C.getUUIDFromAddressOfNormalAccount)(e),address:e,options:{},methods:[k.EthMethod.PersonalSign,k.EthMethod.Sign,k.EthMethod.SignTransaction,k.EthMethod.SignTypedDataV1,k.EthMethod.SignTypedDataV3,k.EthMethod.SignTypedDataV4],scopes:[k.EthScope.Eoa],type:k.EthAccountType.Eoa,metadata:{name:"",importTime:Date.now(),keyring:{type:t}}}},i=function(){const[e]=this.messagingSystem.call("KeyringController:getKeyringsByType",E.SnapKeyring.type);return e},o=async function(){const e=v(this,r,"m",i).call(this);return e?e.listAccounts():[]},c=async function(){const e=[],{keyrings:t}=this.messagingSystem.call("KeyringController:getState");for(const n of t){const t=n.type;if((0,C.isNormalKeyringType)(t))for(const[s,a]of n.accounts.entries()){const i=(0,C.getUUIDFromAddressOfNormalAccount)(a);let o={};(0,C.isHdKeyringType)(n.type)&&(o={entropySource:n.metadata.id,derivationPath:(0,C.getDerivationPathForIndex)(s)});const c=v(this,r,"m",b).call(this,i,"nameLastUpdatedAt");e.push({id:i,address:a,options:o,methods:[k.EthMethod.PersonalSign,k.EthMethod.Sign,k.EthMethod.SignTransaction,k.EthMethod.SignTypedDataV1,k.EthMethod.SignTypedDataV3,k.EthMethod.SignTypedDataV4],scopes:[k.EthScope.Eoa],type:k.EthAccountType.Eoa,metadata:{name:v(this,r,"m",b).call(this,i,"name")??"",...c&&{nameLastUpdatedAt:c},importTime:v(this,r,"m",b).call(this,i,"importTime")??Date.now(),lastSelected:v(this,r,"m",b).call(this,i,"lastSelected")??0,keyring:{type:t}}})}}return e},l=function(e,...t){this.messagingSystem.publish(e,...t)},u=function({isUnlocked:e,keyrings:t}){if(!e||0===t.length)return;const n={snap:{previous:{},added:[],updated:[],removed:[]},normal:{previous:{},added:[],updated:[],removed:[]}},s=e=>e===_.KeyringTypes.snap?n.snap:n.normal;for(const e of this.listMultichainAccounts()){const t=e.address.toLowerCase();s(e.metadata.keyring.type).previous[t]=e}const a=new Set;for(const e of t){const t=s(e.type);for(const n of e.accounts){const r=n.toLowerCase(),s=t.previous[r];s?t.updated.push(s):t.added.push({address:r,type:e.type,options:e.type===_.KeyringTypes.hd?{entropySource:e.metadata.id}:{}}),a.add(r)}}for(const e of[n.snap,n.normal])for(const[t,n]of Object.entries(e.previous))a.has(t)||e.removed.push(n);const i={removed:[],added:[]};v(this,r,"m",d).call(this,(e=>{const{internalAccounts:t}=e;for(const e of[n.snap,n.normal]){for(const n of e.removed)delete t.accounts[n.id],i.removed.push(n.id);for(const n of e.added){const e=v(this,r,"m",g).call(this,n.address,n.type);if(e){const s=Object.values(t.accounts),a=this.getNextAvailableAccountName(e.metadata.keyring.type,s),o=0===s.length?v(this,r,"m",f).call(this):0;t.accounts[e.id]={...e,metadata:{...e.metadata,name:a,importTime:Date.now(),lastSelected:o},options:{...e.options,...n.options}},i.added.push(t.accounts[e.id])}}}}));for(const e of i.removed)this.messagingSystem.publish("AccountsController:accountRemoved",e);for(const e of i.added)this.messagingSystem.publish("AccountsController:accountAdded",e)},d=function(e){const t=this.state.internalAccounts.selectedAccount;this.update((n=>{e(n);const{internalAccounts:s}=n;if(!s.accounts[t]){const e=Object.values(s.accounts),t=v(this,r,"m",h).call(this,e);t?(s.selectedAccount=t.id,s.accounts[t.id].metadata.lastSelected=v(this,r,"m",f).call(this)):s.selectedAccount=""}}));const{selectedAccount:n}=this.state.internalAccounts;if(n&&n!==t){const e=this.getSelectedMultichainAccount();e&&((0,k.isEvmAccountType)(e.type)&&this.messagingSystem.publish("AccountsController:selectedEvmAccountChange",e),this.messagingSystem.publish("AccountsController:selectedAccountChange",e))}},p=function(e){const{snaps:t}=e,n=[];for(const e of this.listMultichainAccounts())if(e.metadata.snap){const r=t[e.metadata.snap.id];if(r){const t=r.enabled&&!r.blocked;e.metadata.snap.enabled!==t&&n.push({id:e.id,enabled:t})}else n.push({id:e.id,enabled:!1})}n.length>0&&this.update((e=>{for(const{id:t,enabled:r}of n){const n=e.internalAccounts.accounts[t];n.metadata.snap&&(n.metadata.snap.enabled=r)}}))},m=function(e,t){return(t??this.listMultichainAccounts()).filter((t=>e===_.KeyringTypes.hd||e===_.KeyringTypes.simple?t.metadata.keyring.type===_.KeyringTypes.hd||t.metadata.keyring.type===_.KeyringTypes.simple:t.metadata.keyring.type===e))},h=function(e){const[t]=e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)));return t},f=function(){return Date.now()},g=function(e,t){if(t===_.KeyringTypes.snap){const t=v(this,r,"m",i).call(this);return t?t.getAccountByAddress(e):undefined}return v(this,r,"m",a).call(this,e,t)},y=function(e){let t;if((0,P.isCaipChainId)(e)){const n=this.getSelectedMultichainAccount(e);t=n.id}else{const e=this.getSelectedAccount();t=e.id}this.update((e=>{e.internalAccounts.accounts[t].metadata.lastSelected=Date.now(),e.internalAccounts.selectedAccount=t}))},b=function(e,t,n){const r=n??this.getAccount(e);return r?r.metadata[t]:undefined},w=function(){this.messagingSystem.subscribe("SnapController:stateChange",(e=>v(this,r,"m",p).call(this,e))),this.messagingSystem.subscribe("KeyringController:stateChange",(e=>v(this,r,"m",u).call(this,e))),this.messagingSystem.subscribe("SnapKeyring:accountAssetListUpdated",(e=>v(this,r,"m",l).call(this,"AccountsController:accountAssetListUpdated",e))),this.messagingSystem.subscribe("SnapKeyring:accountBalancesUpdated",(e=>v(this,r,"m",l).call(this,"AccountsController:accountBalancesUpdated",e))),this.messagingSystem.subscribe("SnapKeyring:accountTransactionsUpdated",(e=>v(this,r,"m",l).call(this,"AccountsController:accountTransactionsUpdated",e))),this.messagingSystem.subscribe("MultichainNetworkController:networkDidChange",(e=>v(this,r,"m",y).call(this,e)))},S=function(){this.messagingSystem.registerActionHandler(`${M}:setSelectedAccount`,this.setSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${M}:listAccounts`,this.listAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${M}:listMultichainAccounts`,this.listMultichainAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${M}:setAccountName`,this.setAccountName.bind(this)),this.messagingSystem.registerActionHandler(`${M}:setAccountNameAndSelectAccount`,this.setAccountNameAndSelectAccount.bind(this)),this.messagingSystem.registerActionHandler(`${M}:updateAccounts`,this.updateAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${M}:getSelectedAccount`,this.getSelectedAccount.bind(this)),this.messagingSystem.registerActionHandler(`${M}:getSelectedMultichainAccount`,this.getSelectedMultichainAccount.bind(this)),this.messagingSystem.registerActionHandler(`${M}:getAccountByAddress`,this.getAccountByAddress.bind(this)),this.messagingSystem.registerActionHandler(`${M}:getNextAvailableAccountName`,this.getNextAvailableAccountName.bind(this)),this.messagingSystem.registerActionHandler("AccountsController:getAccount",this.getAccount.bind(this)),this.messagingSystem.registerActionHandler("AccountsController:updateAccountMetadata",this.updateAccountMetadata.bind(this))}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/AccountsController.cjs"}],[1415,{"./AccountsController.cjs":1414,"./utils.cjs":1416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNormalKeyringType=n.getUUIDFromAddressOfNormalAccount=n.getUUIDOptionsFromAddressOfNormalAccount=n.keyringTypeToName=n.AccountsController=n.EMPTY_ACCOUNT=void 0;var r=e("./AccountsController.cjs");Object.defineProperty(n,"EMPTY_ACCOUNT",{enumerable:!0,get:function(){return r.EMPTY_ACCOUNT}}),Object.defineProperty(n,"AccountsController",{enumerable:!0,get:function(){return r.AccountsController}});var s=e("./utils.cjs");Object.defineProperty(n,"keyringTypeToName",{enumerable:!0,get:function(){return s.keyringTypeToName}}),Object.defineProperty(n,"getUUIDOptionsFromAddressOfNormalAccount",{enumerable:!0,get:function(){return s.getUUIDOptionsFromAddressOfNormalAccount}}),Object.defineProperty(n,"getUUIDFromAddressOfNormalAccount",{enumerable:!0,get:function(){return s.getUUIDFromAddressOfNormalAccount}}),Object.defineProperty(n,"isNormalKeyringType",{enumerable:!0,get:function(){return s.isNormalKeyringType}})}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/index.cjs"}],[1416,{"@metamask/keyring-controller":2084,"@metamask/utils":2974,"ethereum-cryptography/sha256":4354,uuid:5741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDerivationPathForIndex=n.isHdKeyringType=n.isNormalKeyringType=n.getUUIDFromAddressOfNormalAccount=n.getUUIDOptionsFromAddressOfNormalAccount=n.keyringTypeToName=void 0;const r=e("@metamask/keyring-controller"),s=e("@metamask/utils"),a=e("ethereum-cryptography/sha256"),i=e("uuid");function o(e){return{random:(0,a.sha256)((0,s.hexToBytes)(e)).slice(0,16)}}n.keyringTypeToName=function(e){switch(e){case r.KeyringTypes.simple:case r.KeyringTypes.hd:return"Account";case r.KeyringTypes.trezor:return"Trezor";case r.KeyringTypes.oneKey:return"OneKey";case r.KeyringTypes.ledger:return"Ledger";case r.KeyringTypes.lattice:return"Lattice";case r.KeyringTypes.qr:return"QR";case r.KeyringTypes.snap:return"Snap Account";default:throw new Error(`Unknown keyring ${e}`)}},n.getUUIDOptionsFromAddressOfNormalAccount=o,n.getUUIDFromAddressOfNormalAccount=function(e){return(0,i.v4)(o(e))},n.isNormalKeyringType=function(e){return e!==r.KeyringTypes.snap},n.isHdKeyringType=function(e){return e===r.KeyringTypes.hd},n.getDerivationPathForIndex=function(e){return`m/44'/60'/0'/0/${e}`}}}},{package:"@metamask/accounts-controller",file:"node_modules/@metamask/accounts-controller/dist/utils.cjs"}],[1417,{"@metamask/base-controller":1476,"@metamask/controller-utils":1559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=n.controllerName=n.AddressType=void 0;const i=e("@metamask/base-controller"),o=e("@metamask/controller-utils");var c;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(c||(n.AddressType=c={})),n.controllerName="AddressBookController";const l={addressBook:{persist:!0,anonymous:!1}};n.getDefaultAddressBookControllerState=()=>({addressBook:{}});class u extends i.BaseController{constructor({messenger:e,state:t}){const i={...(0,n.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:l,name:n.controllerName,state:i}),r.add(this),a(this,r,"m",s).call(this)}list(){const{addressBook:e}=this.state;return Object.keys(e).reduce(((t,n)=>{const r=n;return[...t,...Object.values(e[r])]}),[])}clear(){this.update((e=>{e.addressBook={}}))}delete(e,t){if(t=(0,o.toChecksumHexAddress)(t),!([e,t].every((e=>(0,o.isSafeDynamicKey)(e)))&&(0,o.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t]))return!1;const n={...this.state.addressBook[e][t]};return this.update((n=>{const r=n.addressBook[e];r?.[t]&&(delete r[t],0===Object.keys(r).length&&delete n.addressBook[e])})),"*"!==String(e)&&this.messagingSystem.publish("AddressBookController:contactDeleted",n),!0}set(e,t,n=(0,o.toHex)(1),r="",s){if(e=(0,o.toChecksumHexAddress)(e),!(0,o.isValidHexAddress)(e))return!1;const a={address:e,chainId:n,isEns:!1,memo:r,name:t,addressType:s,lastUpdatedAt:Date.now()},i=(0,o.normalizeEnsName)(t);return i&&(a.name=i,a.isEns=!0),this.update((t=>{t.addressBook={...this.state.addressBook,[n]:{...this.state.addressBook[n],[e]:a}}})),"*"!==String(n)&&this.messagingSystem.publish("AddressBookController:contactUpdated",a),!0}}n.AddressBookController=u,r=new WeakSet,s=function(){this.messagingSystem.registerActionHandler(`${n.controllerName}:list`,this.list.bind(this)),this.messagingSystem.registerActionHandler(`${n.controllerName}:set`,this.set.bind(this)),this.messagingSystem.registerActionHandler(`${n.controllerName}:delete`,this.delete.bind(this))},n.default=u}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[1418,{"./AddressBookController.cjs":1417},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=void 0;var r=e("./AddressBookController.cjs");Object.defineProperty(n,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return r.getDefaultAddressBookControllerState}}),Object.defineProperty(n,"AddressBookController",{enumerable:!0,get:function(){return r.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1419,{"@metamask/base-controller":1476},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;const i=e("@metamask/base-controller"),o={announcements:{}},c={announcements:{persist:!0,anonymous:!0}};class l extends i.BaseController{constructor({messenger:e,state:t,allAnnouncements:n}){const i={...o,...t};super({messenger:e,metadata:c,name:"AnnouncementController",state:i}),r.add(this),a(this,r,"m",s).call(this,n)}resetViewed(){this.update((({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1}))}updateViewed(e){this.update((({announcements:t})=>{for(const n of Object.keys(e).map(Number))t[n].isShown=e[n]}))}}n.AnnouncementController=l,r=new WeakSet,s=function(e){this.update((t=>{Object.values(e).forEach((e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}}))}))}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[142,{"@metamask/browser-passworder":1516},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encryptorFactory=void 0;var r=e("@metamask/browser-passworder");const s=e=>async(t,n,s,a)=>(0,r.encrypt)(t,n,s,a,{algorithm:"PBKDF2",params:{iterations:e}}),a=e=>async(t,n,s)=>(0,r.encryptWithDetail)(t,n,s,{algorithm:"PBKDF2",params:{iterations:e}}),i=e=>async(t,n,s,a)=>(0,r.keyFromPassword)(t,n,s,a??{algorithm:"PBKDF2",params:{iterations:e}}),o=e=>t=>(0,r.isVaultUpdated)(t,{algorithm:"PBKDF2",params:{iterations:e}});n.encryptorFactory=e=>({encrypt:s(e),encryptWithKey:r.encryptWithKey,encryptWithDetail:a(e),decrypt:r.decrypt,decryptWithKey:r.decryptWithKey,decryptWithDetail:r.decryptWithDetail,keyFromPassword:i(e),isVaultUpdated:o(e),importKey:r.importKey,exportKey:r.exportKey,generateSalt:r.generateSalt})}}},{package:"$root$",file:"app/scripts/lib/encryptor-factory.ts"}],[1420,{"./AnnouncementController.cjs":1419},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;var r=e("./AnnouncementController.cjs");Object.defineProperty(n,"AnnouncementController",{enumerable:!0,get:function(){return r.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[143,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[144,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[145,{"./contracts/registry":143,"./contracts/resolver":144,"@ensdomains/content-hash":491,"@ethersproject/contracts":581,"@ethersproject/providers":619,"eth-ens-namehash":4311},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function({provider:e,name:t}){const n=r.default.hash(t),l=Number.parseInt(await e.request({method:"net_version"}),10),d=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(l);if(!d)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${l}"`);const p=new a.Web3Provider(e),m=new i.Contract(d,o.default,p),h=await m.resolver(n);if(u(h))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const f=new i.Contract(h,c.default,p),g=await f.supportsInterface("0xbc1c58d1"),y=await f.supportsInterface("0xd8389dc5");if(g){const e=(await f.contenthash(n))[0];let t=s.default.decode(e);const r=s.default.getCodec(e);return"ipfs-ns"!==r&&"ipns-ns"!==r||(t=s.default.helpers.cidV0ToV1Base32(t)),{type:r,hash:t}}if(y){const e=(await f.content(n))[0];if(u(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var r=l(e("eth-ens-namehash")),s=l(e("@ensdomains/content-hash")),a=e("@ethersproject/providers"),i=e("@ethersproject/contracts"),o=l(e("./contracts/registry")),c=l(e("./contracts/resolver"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[146,{"../../../../shared/modules/fetch-with-timeout":5908,"./resolver":145,"base32-encode":3994,"base64-js":3995,"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:n,getUseAddressBarEnsResolution:i}){const c=u.map((e=>`*://*.${e}/*`));return a.default.webRequest.onErrorOccurred.addListener(d,{urls:c,types:["main_frame"]}),{remove(){a.default.webRequest.onErrorOccurred.removeListener(d)}};async function d(c){const{tabId:d,url:p}=c;if(-1===d||"0x1"!==t())return;const{hostname:m,pathname:h,search:f,hash:g}=new URL(p),y=m.split("."),b=y[y.length-1];u.includes(b)&&async function({tabId:t,name:c,pathname:u,search:d,fragment:p}){const m=n(),h=i(),f=`https://app.ens.domains/name/${c}`;h&&m&&await a.default.tabs.update(t,{url:"loading.html"});let g=f;0;try{const{type:t,hash:n}=await(0,o.default)({provider:e,name:c});if("ipfs-ns"===t||"ipns-ns"===t){if(""===m)return void(g=null);const e=`https://${n}.${t.slice(0,4)}.${m}${u}${d||""}${p||""}`;try{200===(await l(e,{method:"HEAD"})).status&&(g=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)g=`https://swarm-gateways.net/bzz:/${n}${u}${d||""}${p||""}`;else if("onion"===t||"onion3"===t)g=`http://${n}.onion${u}${d||""}${p||""}`;else if("zeronet"===t)g=`http://127.0.0.1:43110/${n}${u}${d||""}${p||""}`;else if("skynet-ns"===t){const e=n.padEnd(n.length+4-n.length%4,"="),t=s.default.toByteArray(e),a={padding:!1};g=`https://${(0,r.default)(t,"RFC4648-HEX",a).toLowerCase()}.siasky.net${u}${d||""}${p||""}`}}catch(e){console.warn(e)}finally{g&&(h||!h&&g!==f)&&await a.default.tabs.update(t,{url:g})}}({tabId:d,name:m,pathname:h,search:f,fragment:g})}};var r=c(e("base32-encode")),s=c(e("base64-js")),a=c(e("webextension-polyfill")),i=c(e("../../../../shared/modules/fetch-with-timeout")),o=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const l=(0,i.default)(),u=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[148,{lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return s((0,r.cloneDeep)(e),(e=>null===e?"null":typeof e))};var r=e("lodash");function s(e={},t){return Object.entries(e).forEach((([n,r])=>{e[n]="object"==typeof r&&null!==r?s(r,t):t(r)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[149,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hardwareKeyringBuilderFactory=function(e,t){const n=()=>new e({bridge:new t});return n.type=e.type,n}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[15,{"@metamask/assets-controllers":1457},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenRatesControllerInit=e=>{var t;const{controllerMessenger:n,getController:s,persistedState:a}=e;return{controller:new r.TokenRatesController({messenger:n,state:a.TokenRatesController,tokenPricesService:new r.CodefiTokenPricesServiceV2,disabled:!(null!==(t=s("PreferencesController").state)&&void 0!==t&&t.useCurrencyRateCheck)})}}}}},{package:"$root$",file:"app/scripts/controller-init/assets/token-rates-controller-init.ts"}],[151,{"../util":226,"@metamask/json-rpc-engine":2027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,r.createAsyncMiddleware)((async(t,n,r)=>{const{method:s,params:a}=t;if("eth_getTransactionCount"!==s)return void r();const[i,o]=a;"pending"===o?n.result=await e(i,t.networkClientId):r()}))},n.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,r.createAsyncMiddleware)((async(t,n,r)=>{const{method:a,params:i}=t;if("eth_getTransactionByHash"!==a)return void r();const[o]=i,c=e(o);c?n.result=(0,s.formatTxMetaForRpcResult)(c):r()}))};var r=e("@metamask/json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[152,{events:4454,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("events")),s=a(e("loglevel"));function a(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const n=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||n&&n.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const n of t)try{s.default.info(`Running migration ${n.version}...`);const t=await n.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==n.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,s.default.info(`Migration ${n.version} complete`)}catch(t){const r=t.message;return t.message=`MetaMask Migration Error #${n.version}: ${r}`,this.emit("error",t),e}return e}generateInitialState(e){return{data:e,meta:{version:this.defaultVersion}}}}n.default=i}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[154,{"../../../../shared/constants/metametrics":5810,"../../../../shared/lib/only-keep-host":5883,"./utils":155,"@metamask/network-controller":2321,"@metamask/utils":2974,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.onRpcEndpointDegraded=function({chainId:e,endpointUrl:t,infuraProjectId:n,trackEvent:r,metaMetricsId:s}){const u=(0,l.getIsOurInfuraEndpointUrl)(t,n),d=(0,l.getIsQuicknodeEndpointUrl)(t);(0,l.shouldCreateRpcServiceEvents)(s)&&(u||d)&&(a.default.debug(`Creating Segment event "${o.MetaMetricsEventName.RpcServiceDegraded}" with chain_id_caip: "eip155:${(0,i.hexToNumber)(e)}", rpc_endpoint_url: ${(0,c.onlyKeepHost)(t)}`),r({category:o.MetaMetricsEventCategory.Network,event:o.MetaMetricsEventName.RpcServiceDegraded,properties:{chain_id_caip:`eip155:${(0,i.hexToNumber)(e)}`,rpc_endpoint_url:(0,c.onlyKeepHost)(t)}}))},n.onRpcEndpointUnavailable=function({chainId:e,endpointUrl:t,error:n,infuraProjectId:r,trackEvent:u,metaMetricsId:d}){const p=(0,l.getIsOurInfuraEndpointUrl)(t,r),m=(0,l.getIsQuicknodeEndpointUrl)(t);(0,l.shouldCreateRpcServiceEvents)(d)&&!(0,s.isConnectionError)(n)&&(p||m)&&(a.default.debug(`Creating Segment event "${o.MetaMetricsEventName.RpcServiceUnavailable}" with chain_id_caip: "eip155:${(0,i.hexToNumber)(e)}", rpc_endpoint_url: ${(0,c.onlyKeepHost)(t)}`),u({category:o.MetaMetricsEventCategory.Network,event:o.MetaMetricsEventName.RpcServiceUnavailable,properties:{chain_id_caip:`eip155:${(0,i.hexToNumber)(e)}`,rpc_endpoint_url:(0,c.onlyKeepHost)(t)}}))};var r,s=e("@metamask/network-controller"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/utils"),o=e("../../../../shared/constants/metametrics"),c=e("../../../../shared/lib/only-keep-host"),l=e("./utils")}}},{package:"$root$",file:"app/scripts/lib/network-controller/messenger-action-handlers.ts"}],[155,{"../../../../development/build/constants":443,"../../../../shared/constants/network":5813,"@metamask/remote-feature-flag-controller":2517,lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsOurInfuraEndpointUrl=function(e,t){return new RegExp(`^https://[^.]+\\.infura\\.io/v3/${(0,r.escapeRegExp)(t)}$`,"u").test(e)},n.getIsQuicknodeEndpointUrl=function(e){return Object.values(a.QUICKNODE_ENDPOINT_URLS_BY_INFURA_NETWORK_NAME).map((e=>e())).includes(e)},n.shouldCreateRpcServiceEvents=function(e){if(null===e||"production"===undefined)return!1;if([i.ENVIRONMENT.PRODUCTION,i.ENVIRONMENT.RELEASE_CANDIDATE].includes("production"))return(0,s.generateDeterministicRandomNumber)(e)<o;return!0};var r=e("lodash"),s=e("@metamask/remote-feature-flag-controller"),a=e("../../../../shared/constants/network"),i=e("../../../../development/build/constants");const o=.1}}},{package:"$root$",file:"app/scripts/lib/network-controller/utils.ts"}],[156,{"../../../shared/constants/notifications":5814,"../platforms/extension":431,"@metamask/safe-event-emitter":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.NOTIFICATION_MANAGER_EVENTS=void 0;var r=i(e("@metamask/safe-event-emitter")),s=i(e("../platforms/extension")),a=e("../../../shared/constants/notifications");function i(e){return e&&e.__esModule?e:{default:e}}const o=n.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class c extends r.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const n=await this._getPopup(t);if(n)await this.platform.focusWindow(n.id);else{let e=0,t=0;try{const n=await this.platform.getLastFocusedWindow();t=n.top,e=Math.max(n.left+(n.width-a.NOTIFICATION_WIDTH),0)}catch(n){const{screenX:r,screenY:s,outerWidth:i}=window;t=Math.max(s,0),e=Math.max(r+(i-a.NOTIFICATION_WIDTH),0)}const n=await this.platform.openWindow({url:"notification.html",type:"popup",width:a.NOTIFICATION_WIDTH,height:a.NOTIFICATION_HEIGHT,left:e,top:t});n.left!==e&&"fullscreen"!==n.state&&await this.platform.updateWindowPosition(n.id,e,t),this._setCurrentPopupId(n.id),this._popupId=n.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}n.default=c}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[1564,{"./constants.cjs":1565,"./utils.cjs":1567,"@metamask/base-controller":1476,"@metamask/keyring-controller":2084,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=n.controllerName=void 0;const o=e("@metamask/base-controller"),c=e("@metamask/keyring-controller"),l=e("@metamask/utils"),u=e("./constants.cjs"),d=e("./utils.cjs");n.controllerName="DelegationController";const p={delegations:{persist:!0,anonymous:!1}};class m extends o.BaseController{constructor({messenger:e,state:t,hashDelegation:i,getDelegationEnvironment:o}){super({messenger:e,metadata:p,name:n.controllerName,state:{delegations:{},...t}}),r.set(this,void 0),s.set(this,void 0),a(this,r,i,"f"),a(this,s,o,"f")}async signDelegation(e){const{delegation:t,chainId:n}=e,{DelegationManager:r}=i(this,s,"f").call(this,n),a=(0,d.createTypedMessageParams)({chainId:(0,l.hexToNumber)(n),from:t.delegator,delegation:{...t,signature:"0x"},verifyingContract:r});return await this.messagingSystem.call("KeyringController:signTypedMessage",a,c.SignTypedDataVersion.V4)}store(e){const{entry:t}=e,n=i(this,r,"f").call(this,t.delegation);if(!(0,d.isHexEqual)(t.delegation.authority,u.ROOT_AUTHORITY)&&!this.state.delegations[t.delegation.authority])throw new Error("Invalid authority");this.update((e=>{e.delegations[n]=t}))}list(e){const t=this.messagingSystem.call("AccountsController:getSelectedAccount").address;let n=Object.values(this.state.delegations);e?.from&&(n=n.filter((t=>(0,d.isHexEqual)(t.delegation.delegator,e.from)))),(!e?.from||e?.from&&!(0,d.isHexEqual)(e.from,t))&&(n=n.filter((e=>(0,d.isHexEqual)(e.delegation.delegate,t))));const r=e?.chainId;r&&(n=n.filter((e=>(0,d.isHexEqual)(e.chainId,r))));const s=e?.tags;return s&&s.length>0&&(n=n.filter((e=>s.every((t=>e.tags.includes(t)))))),n}retrieve(e){return this.state.delegations[e]??null}chain(e){const t=[],n=this.retrieve(e);if(!n)return null;t.push(n);for(let e=n.delegation.authority;e!==u.ROOT_AUTHORITY;){const n=this.retrieve(e);if(!n)throw new Error("Invalid delegation chain");t.push(n),e=n.delegation.authority}return t}delete(e){if(!this.retrieve(e))return 0;const t=Object.entries(this.state.delegations),n=[e],r=[];for(;n.length>0;){const e=n.pop();t.filter((([t,n])=>n.delegation.authority===e)).forEach((([e])=>{n.push(e)})),r.push(e)}return this.update((e=>{r.forEach((t=>{delete e.delegations[t]}))})),r.length}}n.DelegationController=m,r=new WeakMap,s=new WeakMap}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/DelegationController.cjs"}],[1565,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SIGNABLE_DELEGATION_TYPED_DATA=n.ROOT_AUTHORITY=void 0,n.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";n.SIGNABLE_DELEGATION_TYPED_DATA={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/constants.cjs"}],[1566,{"./DelegationController.cjs":1564},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=void 0;var r=e("./DelegationController.cjs");Object.defineProperty(n,"DelegationController",{enumerable:!0,get:function(){return r.DelegationController}})}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/index.cjs"}],[1567,{"./constants.cjs":1565,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createTypedMessageParams=n.toDelegationStruct=n.isHexEqual=void 0;const r=e("@metamask/utils"),s=e("./constants.cjs");n.isHexEqual=function(e,t){return e.toLowerCase()===t.toLowerCase()};n.toDelegationStruct=e=>{const t=e.caveats.map((e=>({enforcer:(0,r.getChecksumAddress)(e.enforcer),terms:e.terms,args:e.args}))),n="0x"===e.salt?0n:BigInt(e.salt);return{delegate:(0,r.getChecksumAddress)(e.delegate),delegator:(0,r.getChecksumAddress)(e.delegator),authority:e.authority,caveats:t,salt:n,signature:e.signature}},n.createTypedMessageParams=function(e){const{chainId:t,from:r,delegation:a,verifyingContract:i}=e;return{data:{types:s.SIGNABLE_DELEGATION_TYPED_DATA,primaryType:"Delegation",domain:{chainId:t,name:"DelegationManager",version:"1",verifyingContract:i},message:(0,n.toDelegationStruct)(a)},from:r}}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/utils.cjs"}],[157,{"../../../../shared/constants/offscreen-communication":5815,"eth-lattice-keyring":4312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LatticeKeyringOffscreen=void 0;var r,s=(r=e("eth-lattice-keyring"))&&r.__esModule?r:{default:r},a=e("../../../../shared/constants/offscreen-communication");class i extends s.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${a.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,n)=>{chrome.runtime.sendMessage({target:a.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&n(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}n.LatticeKeyringOffscreen=i,function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,"type",void 0),i.type=s.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[158,{"../../../../shared/constants/offscreen-communication":5815,"@ledgerhq/errors":881},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerOffscreenBridge=void 0;var r=e("@ledgerhq/errors"),s=e("../../../../shared/constants/offscreen-communication");function a(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var c=new WeakSet;async function l(e,{timeout:t}={}){return new Promise(((n,a)=>{let i;t&&(i=setTimeout((()=>{a(new Error("Ledger iframe timeout"))}),t)),chrome.runtime.sendMessage({...e,target:s.OffscreenCommunicationTarget.ledgerOffscreen},(e=>{if(clearTimeout(i),null!=e&&e.success)n(e.payload||e.success);else{var t;const n=null==e||null===(t=e.payload)||void 0===t?void 0:t.error;if(n&&"number"==typeof n.statusCode&&n.statusCode>0){const e=new r.TransportStatusError(n.statusCode);a(e)}else if(null!=n&&n.message){const e=new Error(n.message,{cause:n});a(e)}else a(new Error("Unknown Ledger error occurred"))}}))}))}n.LedgerOffscreenBridge=class{constructor(){a(this,c),i(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===s.OffscreenCommunicationTarget.extension&&e.event===s.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}getOptions(){return Promise.resolve({})}setOptions(){return Promise.resolve()}attemptMakeApp(){return o(c,this,l).call(this,{action:s.LedgerAction.makeApp},{timeout:4e3})}updateTransportMethod(e){return o(c,this,l).call(this,{action:s.LedgerAction.updateTransport,params:{transportType:e}},{timeout:4e3})}getPublicKey(e){return o(c,this,l).call(this,{action:s.LedgerAction.getPublicKey,params:e})}deviceSignTransaction(e){return o(c,this,l).call(this,{action:s.LedgerAction.signTransaction,params:e})}deviceSignMessage(e){return o(c,this,l).call(this,{action:s.LedgerAction.signPersonalMessage,params:e})}deviceSignTypedData(e){return o(c,this,l).call(this,{action:s.LedgerAction.signTypedData,params:e})}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[159,{"../../../../shared/constants/offscreen-communication":5815},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorOffscreenBridge=void 0;var r=e("../../../../shared/constants/offscreen-communication");function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.TrezorOffscreenBridge=class{constructor(){s(this,"model",void 0),s(this,"minorVersion",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===r.OffscreenCommunicationTarget.extension&&e.event===r.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload.model,this.minorVersion=e.payload.minorVersion)})),new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[1591,{"@ethersproject/providers":619,"@metamask/base-controller":1476,"@metamask/controller-utils":1559,"@metamask/utils":2974,"punycode/punycode.js":5141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.EnsController=n.DEFAULT_ENS_NETWORK_MAP=void 0;const u=e("@ethersproject/providers"),d=e("@metamask/base-controller"),p=e("@metamask/controller-utils"),m=e("@metamask/utils"),h=e("punycode/punycode.js"),f=(0,m.createProjectLogger)("ens-controller");n.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const g={ensEntries:{persist:!0,anonymous:!1},ensResolutionsByAddress:{persist:!0,anonymous:!1}},y={ensEntries:{},ensResolutionsByAddress:{}};class b extends d.BaseController{constructor({registriesByChainId:e=n.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:o={},onNetworkDidChange:l}){super({name:"EnsController",metadata:g,messenger:t,state:{...y,ensEntries:Object.fromEntries(Object.entries(e).map((([e,t])=>[(0,p.toHex)(e),{".":{address:t,chainId:(0,p.toHex)(e),ensName:"."}}]))),...o}}),r.add(this),s.set(this,null),c(this,r,"m",a).call(this,e),l&&l((({selectedNetworkClientId:t})=>{this.resetState(),c(this,r,"m",i).call(this,t,e)}))}resetState(){this.update((e=>{e.ensResolutionsByAddress={}}))}clear(){this.update((e=>{e.ensEntries={}}))}delete(e,t){const n=(0,p.normalizeEnsName)(t);return!!((0,p.isSafeDynamicKey)(e)&&n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n])&&(this.update((t=>{delete t.ensEntries[e][n],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]})),!0)}get(e,t){const n=(0,p.normalizeEnsName)(t);return n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n]||null}set(e,t,n){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||n&&!(0,p.isValidHexAddress)(n))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${n}}`);const r=(0,p.normalizeEnsName)(t);if(!r)throw new Error(`Invalid ENS name: ${t}`);const s=n?(0,p.toChecksumHexAddress)(n):null,a=this.state.ensEntries[e];return(!a?.[r]||a[r].address!==s)&&(this.update((t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[r]:{address:s,chainId:e,ensName:r}}}})),!0)}async reverseResolveAddress(e){if(!c(this,s,"f"))return undefined;const t=(0,p.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let n,r;try{n=await c(this,s,"f").lookupAddress(t)}catch(e){return f(e),undefined}if(!n)return undefined;try{r=await c(this,s,"f").resolveName(n)}catch(e){return f(e),undefined}return r?"0x0000000000000000000000000000000000000000"===r||"0x"===r||(0,p.toChecksumHexAddress)(r)!==t?undefined:(this.update((e=>{e.ensResolutionsByAddress[t]=(0,h.toASCII)(n)})),n):undefined}}n.EnsController=b,s=new WeakMap,r=new WeakSet,a=function(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");c(this,r,"m",i).call(this,t,e)},i=function(e,t){const{configuration:{chainId:n},provider:a}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(n,16)]&&c(this,r,"m",o).call(this,n)?l(this,s,new u.Web3Provider(a,{chainId:(0,p.convertHexToDecimal)(n),name:p.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[n],ensAddress:t[parseInt(n,16)]}),"f"):l(this,s,null,"f")},o=function(e){return Boolean(this.state.ensEntries[e])},n.default=b}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[1592,{"./EnsController.cjs":1591},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./EnsController.cjs"),n)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[1593,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;n.ErrorReportingService=class{constructor({messenger:e,captureException:t}){r.set(this,void 0),s.set(this,void 0),a(this,s,e,"f"),a(this,r,t,"f"),i(this,s,"f").registerActionHandler("ErrorReportingService:captureException",i(this,r,"f").bind(this))}captureException(e){i(this,r,"f").call(this,e)}},r=new WeakMap,s=new WeakMap}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/error-reporting-service.cjs"}],[1594,{"./error-reporting-service.cjs":1593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;var r=e("./error-reporting-service.cjs");Object.defineProperty(n,"ErrorReportingService",{enumerable:!0,get:function(){return r.ErrorReportingService}})}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/index.cjs"}],[16,{"../../lib/ppom/indexed-db-backend":162,"../../lib/ppom/ppom":165,"@metamask/ppom-validator":2412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PPOMControllerInit=void 0;var r=e("@metamask/ppom-validator"),s=e("../../lib/ppom/indexed-db-backend"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=s?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("../../lib/ppom/ppom"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.PPOMControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,getController:i,getGlobalChainId:o,getProvider:c,persistedState:l}=e;return{controller:new r.PPOMController({messenger:t,storageBackend:new s.IndexedDBPPOMStorage("PPOMDB",1),provider:c(),ppomProvider:{PPOM:a.PPOM,ppomInit:()=>a.default("./ppom_bg.wasm")},state:l.PPOMController,chainId:o(),securityAlertsEnabled:i("PreferencesController").state.securityAlertsEnabled,onPreferencesChange:n.subscribe.bind(n,"PreferencesController:stateChange"),cdnBaseUrl:"static.cx.metamask.io/api/v1/confirmations/ppom",blockaidPublicKey:"066ad3e8af5583385e312c156d238055215d5f25247c1e91055afa756cb98a88"})}}}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/ppom-controller-init.ts"}],[160,{"webextension-polyfill":5774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.openUpdateTabAndReload=async function(e){try{await s.default.tabs.create({url:"https://metamask.io/updating",active:!0})}catch(e){console.error(e)}await e()};var r,s=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"app/scripts/lib/open-update-tab-and-reload.ts"}],[161,{"../../../shared/lib/promise-with-resolvers":5884,lodash:4912,loglevel:4920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OperationSafener=void 0;var r,s=e("lodash"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("../../../shared/lib/promise-with-resolvers");function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function l(e,t){return e.get(d(e,t))}function u(e,t,n){return e.set(d(e,t),n),n}function d(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var p=new WeakMap,m=new WeakMap;n.OperationSafener=class{constructor({op:e,wait:t,options:n}){c(this,p,void 0),c(this,m,null),o(this,"evacuate",(()=>{if(l(m,this))return a.default.warn("already evacuating"),l(m,this);const e=l(p,this).flush();if(e){const{promise:t,resolve:n}=(0,i.withResolvers)();e.finally(n),u(m,this,t)}else u(m,this,Promise.resolve());return l(m,this)})),o(this,"execute",((...e)=>l(m,this)?(a.default.warn("evacuating, ignoring call to `execute`"),!1):(l(p,this).call(this,...e),!0)));const r={mode:"exclusive"};u(p,this,(0,s.debounce)(((...t)=>navigator.locks.request("operation-safener-lock",r,(()=>e(...t)))),t,n))}}}}},{package:"$root$",file:"app/scripts/lib/operation-safener.ts"}],[162,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.IndexedDBPPOMStorage=void 0;const a=async(e,t,n)=>{const r=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==n)throw new Error(`Checksum mismatch for key ${e}`)};var i=new WeakSet;function o(e){return new Promise(((t,n)=>{const r=indexedDB.open(this.storeName,this.dbVersion);r.onerror=e=>{var t;n(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},r.onsuccess=n=>{const r=n.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(r)}}))}n.IndexedDBPPOMStorage=class{constructor(e,t){r(this,i),s(this,"storeName",void 0),s(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,n="readonly"){return new Promise(((r,s)=>{(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")})(i,this,o).call(this,n).then((n=>{const a=n[e](t);a.onsuccess=async e=>{r(e)},a.onerror=t=>{var n;s(new Error(`Error in indexDB operation ${e}: ${null===(n=t.target)||void 0===n?void 0:n.error}`))}})).catch((e=>{s(e)}))}))}async read(e,t){var n;const r=null===(n=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===n||null===(n=n.result)||void 0===n?void 0:n.data;return await a(e,r,t),r}async write(e,t,n){await a(e,t,n),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[163,{"../../../../shared/constants/app":5798,"../../../../shared/constants/security-provider":5820,"../../../../shared/constants/transaction":5829,"../../../../shared/lib/trace":5892,"./ppom-util":164,"@metamask/controller-utils":1559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createPPOMMiddleware=function(e,t,n,u,d,p){return async(m,h,f)=>{try{const{securityAlertsEnabled:h}=t.state,{chainId:f}=n.getNetworkConfigurationByNetworkClientId(m.networkClientId)??{};if(!f)throw Error("ChainID not found for networkClientId");if(!h||!l.includes(m.method))return;const g=m.params[0];if("string"==typeof g){const{isSIWEMessage:e}=(0,r.detectSIWE)({data:g});if(e)return}else if(m.method===s.MESSAGE_TYPE.ETH_SEND_TRANSACTION){const{to:e}=g??{},t=d.listAccounts();if(t.some((({address:t})=>(null==t?void 0:t.toLowerCase())===(null==e?void 0:e.toLowerCase()))))return}const y=(0,c.generateSecurityAlertId)();(0,i.trace)({name:i.TraceName.PPOMValidation,parentContext:m.traceContext},(()=>(0,c.validateRequestWithPPOM)({ppomController:e,request:m,securityAlertId:y,chainId:f,updateSecurityAlertResponse:p})));const b={...o.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:y};a.SIGNING_METHODS.includes(m.method)&&u.addSignatureSecurityAlertResponse(b),m.securityAlertResponse=b}catch(e){m.securityAlertResponse=(0,c.handlePPOMError)(e,"Error createPPOMMiddleware: ")}finally{f()}}};var r=e("@metamask/controller-utils"),s=e("../../../../shared/constants/app"),a=e("../../../../shared/constants/transaction"),i=e("../../../../shared/lib/trace"),o=e("../../../../shared/constants/security-provider"),c=e("./ppom-util");const l=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...a.SIGNING_METHODS])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[164,{"../../../../shared/constants/app":5798,"../../../../shared/constants/security-provider":5820,"../../../../shared/constants/transaction":5829,"../../../../shared/modules/transaction.utils":5926,"../../../../shared/modules/typed-signature":5927,"./security-alerts-api":166,"@metamask/transaction-controller":2925,"@metamask/utils":2974,lodash:4912,uuid:5741},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateSecurityAlertId=function(){return(0,a.v4)()},n.handlePPOMError=g,n.updateSecurityAlertResponse=async function({appStateController:e,messenger:t,method:n,securityAlertId:r,securityAlertResponse:s,signatureController:a,transactionController:i}){if(c.SIGNING_METHODS.includes(n)){const n=await async function(e,t,n){const r=e=>Object.values(e.signatureRequests).find((e=>{var n;return(null===(n=e.securityAlertResponse)||void 0===n?void 0:n.securityAlertId)===t}));return new Promise((s=>{const a=r(e.state);if(a)return void s(a);const i=e=>{const t=r(e);t&&(m("Found signature request",t),n.unsubscribe("SignatureController:stateChange",i),s(t))};m("Waiting for signature request",t),n.subscribe("SignatureController:stateChange",i)}))}(a,r,t);return e.addSignatureSecurityAlertResponse({...s,securityAlertId:r}),n}const o=await async function(e,t,n){const r=e=>{var n;return(null===(n=e.securityAlertResponse)||void 0===n?void 0:n.securityAlertId)===t};return new Promise((s=>{const a=e.state.transactions.find(r);if(a)return void s(a);const i=e=>{r(e)&&(m("Found transaction metadata",e),n.unsubscribe("TransactionController:unapprovedTransactionAdded",i),s(e))};m("Waiting for transaction metadata",t),n.subscribe("TransactionController:unapprovedTransactionAdded",i)}))}(i,r,t);return i.updateSecurityAlertResponse(o.id,{...s,securityAlertId:r}),o},n.validateRequestWithPPOM=async function({ppomController:e,request:t,securityAlertId:n,chainId:s,updateSecurityAlertResponse:a}){try{const c=function(e,t){let n=(0,i.cloneDeep)(e);n=function(e){if(e.method!==d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3&&e.method!==d.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4)return e;if(!Array.isArray(e.params)||!e.params[1])return e;const t=(0,u.parseTypedDataMessage)(e.params[1].toString()),n=(0,l.sanitizeMessageRecursively)(t.message,t.types,t.primaryType);return{...e,params:[e.params[0],JSON.stringify({...t,message:n})]}}(n),n=function(e,t){if(e.method!==d.MESSAGE_TYPE.ETH_SEND_TRANSACTION)return e;if(!Array.isArray(e.params)||!e.params[0])return e;const n=e.params[0];n.gas=t.txParams.gas,n.gasPrice=t.txParams.maxFeePerGas??t.txParams.gasPrice,delete n.gasLimit,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.type;const s=(0,r.normalizeTransactionParams)(n);return m("Normalized transaction params",s),{...e,params:[s]}}(n,t);const{delegationMock:s,id:a,jsonrpc:o,method:c,origin:p,params:h}=n;return{delegationMock:s,id:a,jsonrpc:o,method:c,origin:p,params:h}}(t,await a(t.method,n,o.LOADING_SECURITY_ALERT_RESPONSE));m("Normalized request",c);const h=(0,p.isSecurityAlertsAPIEnabled)()?await async function(e,t,n){try{return{...await(0,p.validateWithSecurityAlertsAPI)(t,n),source:o.SecurityAlertSource.API}}catch(r){return g(r,"Error validating request with security alerts API"),await y(e,n,t)}}(e,s,c):await y(e,c,s);await a(t.method,n,h)}catch(e){m("Error",e),await a(t.method,n,g(e,"Error validating JSON RPC using PPOM: "))}};var r=e("@metamask/transaction-controller"),s=e("@metamask/utils"),a=e("uuid"),i=e("lodash"),o=e("../../../../shared/constants/security-provider"),c=e("../../../../shared/constants/transaction"),l=e("../../../../shared/modules/typed-signature"),u=e("../../../../shared/modules/transaction.utils"),d=e("../../../../shared/constants/app"),p=e("./security-alerts-api");const m=(0,s.createProjectLogger)("ppom-util"),{sentry:h}=global,f={result_type:o.BlockaidResultType.Errored,reason:o.BlockaidReason.errored};function g(e,t,n=o.SecurityAlertSource.API){const r=function(e){if("object"==typeof e||"string"==typeof e)return e;return JSON.stringify(e)}(e),s=function(e){if(e instanceof Error)return`${e.name}: ${e.message}`;return JSON.stringify(e)}(e);return n===o.SecurityAlertSource.Local&&(null==h||h.captureException(e)),console.error(t,r),{...f,description:s,source:n}}async function y(e,t,n){try{return{...await e.usePPOM((e=>e.validateJsonRpc(t)),n),source:o.SecurityAlertSource.Local}}catch(e){return g(e,"Error validating request with PPOM controller",o.SecurityAlertSource.Local)}}}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[1643,{"./base-filter":1644},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter");t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[1644,{"@metamask/safe-event-emitter":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default;t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[1645,{"./base-filter":1644,"./getBlocksForRange":1646,"./hexUtils":1647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:a}=e("./hexUtils");t.exports=class extends r{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const n=t,r=a(e),i=(await s({provider:this.provider,fromBlock:r,toBlock:n})).map((e=>e.hash));this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[1646,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:n}){t||(t=n);const a=r(t),i=r(n),o=Array(i-a+1).fill().map(((e,t)=>a+t)).map(s);let c=await Promise.all(o.map((t=>async function(e,t,n){for(let r=0;r<3;r++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:n})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1]))));return c=c.filter((e=>null!==e)),c}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[1647,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e.sort(((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:s(e)-s(t)))}function s(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function a(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function i(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return r(e)[0]},maxBlockRef:function(...e){const t=r(e);return t[t.length-1]},sortBlockRefs:r,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:s,incrementHexInt:function(e){if(e===undefined||null===e)return e;return a(s(e)+1)},intToHex:a,unsafeRandomBytes:function(e){let t="0x";for(let n=0;n<e;n++)t+=i(),t+=i();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[1648,{"./block-filter.js":1645,"./hexUtils":1647,"./log-filter.js":1649,"./tx-filter.js":1651,"@metamask/json-rpc-engine":2027,"async-mutex":3932},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("async-mutex").Mutex,{createAsyncMiddleware:s,createScaffoldMiddleware:a}=e("@metamask/json-rpc-engine"),i=e("./log-filter.js"),o=e("./block-filter.js"),c=e("./tx-filter.js"),{intToHex:l,hexToInt:u}=e("./hexUtils");function d(e){return p((async(...t)=>{const n=await e(...t);return l(n.id)}))}function p(e){return s((async(t,n)=>{const r=await e.apply(null,t.params);n.result=r}))}function m(e,t){const n=[];for(let t in e)n.push(e[t]);return n}t.exports=function({blockTracker:e,provider:t}){let n=0,s={};const h=new r,f=function({mutex:e}){return t=>async(n,r,s,a)=>{(await e.acquire())(),t(n,r,s,a)}}({mutex:h}),g=a({eth_newFilter:f(d(b)),eth_newBlockFilter:f(d(w)),eth_newPendingTransactionFilter:f(d(S)),eth_uninstallFilter:f(p(E)),eth_getFilterChanges:f(p(v)),eth_getFilterLogs:f(p(T))}),y=async({oldBlock:e,newBlock:t})=>{if(0===s.length)return;const n=await h.acquire();try{await Promise.all(m(s).map((async n=>{try{await n.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}})))}catch(e){console.error(e)}n()};return g.newLogFilter=b,g.newBlockFilter=w,g.newPendingTransactionFilter=S,g.uninstallFilter=E,g.getFilterChanges=v,g.getFilterLogs=T,g.destroy=()=>{!async function(){const e=m(s).length;s={},_({prevFilterCount:e,newFilterCount:0})}()},g;async function b(e){const n=new i({provider:t,params:e});await k(n);return n}async function w(){const e=new o({provider:t});await k(e);return e}async function S(){const e=new c({provider:t});await k(e);return e}async function v(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);return n.getChangesAndClear()}async function T(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);let r=[];return"log"===n.type&&(r=n.getAllResults()),r}async function E(e){const t=u(e),n=s[t],r=Boolean(n);return r&&await async function(e){const t=m(s).length;delete s[e];const n=m(s).length;_({prevFilterCount:t,newFilterCount:n})}(t),r}async function k(t){const r=m(s).length,a=await e.getLatestBlock();await t.initialize({currentBlock:a}),n++,s[n]=t,t.id=n,t.idHex=l(n);return _({prevFilterCount:r,newFilterCount:m(s).length}),n}function _({prevFilterCount:t,newFilterCount:n}){0===t&&n>0?e.on("sync",y):t>0&&0===n&&e.removeListener("sync",y)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[1649,{"./base-filter-history":1643,"./hexUtils":1647,"@metamask/eth-query":1775,pify:5068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/eth-query"),s=e("pify"),a=e("./base-filter-history"),{bnToHex:i,hexToInt:o,incrementHexInt:c,minBlockRef:l,blockRefIsNumber:u}=e("./hexUtils");t.exports=class extends a{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new r(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((e=>e.toLowerCase())))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const n=l(this.params.toBlock,e),r=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(r);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const n=t;let r;r=e?c(e):t;const s=Object.assign({},this.params,{fromBlock:r,toBlock:n}),a=(await this._fetchLogs(s)).filter((e=>this.matchLog(e)));this.addResults(a)}async _fetchLogs(e){return await s((t=>this.ethQuery.getLogs(e,t)))()}matchLog(e){if(o(this.params.fromBlock)>=o(e.blockNumber))return!1;if(u(this.params.toBlock)&&o(this.params.toBlock)<=o(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every(((t,n)=>{let r=e.topics[n];if(!r)return!1;r=r.toLowerCase();let s=Array.isArray(t)?t:[t];if(s.includes(null))return!0;s=s.map((e=>e.toLowerCase()));return s.includes(r)}))}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[165,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PPOM=void 0,n.initSync=function(e){if(r!==undefined)return r;const t=A();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const n=new WebAssembly.Instance(e,t);return P(n,e)},n.main=function(){r.main()};const s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&s.decode();let a=null;function i(){return null!==a&&0!==a.byteLength||(a=new Uint8Array(r.memory.buffer)),a}function o(e,t){return e>>>=0,s.decode(i().subarray(e,e+t))}const c=new Array(128).fill(undefined);c.push(undefined,null,!0,!1);let l=c.length;function u(e){l===c.length&&c.push(c.length+1);const t=l;return l=c[t],c[t]=e,t}function d(e){return c[e]}function p(e){const t=d(e);return function(e){e<132||(c[e]=l,l=e)}(e),t}let m=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},f="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const n=h.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(n===undefined){const n=h.encode(e),r=t(n.length,1)>>>0;return i().subarray(r,r+n.length).set(n),m=n.length,r}let r=e.length,s=t(r,1)>>>0;const a=i();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;a[s+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),s=n(s,r,r=o+3*e.length,1)>>>0;const t=i().subarray(s+o,s+r);o+=f(e,t).written}return m=o,s}let y=null;function b(){return null!==y&&0!==y.byteLength||(y=new Int32Array(r.memory.buffer)),y}function w(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=w(e[0]));for(let r=1;r<t;r++)n+=", "+w(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function S(e,t,n){r.wasm_bindgen__convert__closures__invoke1_mut(e,t,u(n))}function v(e,t){r._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let T=null;function E(e,t){const n=t(4*e.length,4)>>>0,s=(null!==T&&0!==T.byteLength||(T=new Uint32Array(r.memory.buffer)),T);for(let t=0;t<e.length;t++)s[n/4+t]=u(e[t]);return m=e.length,n}function k(e,t){try{return e.apply(this,t)}catch(e){r.__wbindgen_exn_store(u(e))}}class _{static __wrap(e){e>>>=0;const t=Object.create(_.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_ppom_free(e)}static new(e,t){const n=E(t,r.__wbindgen_malloc),s=m;return p(r.ppom_new(u(e),n,s))}validateJsonRpc(e){return p(r.ppom_validateJsonRpc(this.__wbg_ptr,u(e)))}static version(){return p(r.ppom_version())}}function A(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return u(d(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return k((function(e,t,n){return u(d(e).call(d(t),d(n)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return k((function(e,t,n,r){return u(d(e).call(d(t),d(n),d(r)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return u(Array.from(d(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return u(d(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return d(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var n={a:e,b:t};const s=new Promise(((e,t)=>{const s=n.a;n.a=0;try{return function(e,t,n,s){r.wasm_bindgen__convert__closures__invoke2_mut(e,t,u(n),u(s))}(s,n.b,e,t)}finally{n.a=s}}));return u(s)}finally{n.a=n.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return u(new Uint8Array(d(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return k((function(e,t){return u(JSON.parse(o(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return u(_.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return u(Promise.resolve(d(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,n){d(e).set(d(t),n>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return k((function(e){return u(JSON.stringify(d(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,n){return u(d(e).then(d(t),d(n)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return u(d(e).then(d(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=p(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,n){const r=function(e,t,n,r){const s={a:e,b:t,cnt:1},a=(...e)=>{s.cnt++;const t=s.a;s.a=0;try{return r(t,s.b,...e)}finally{0==--s.cnt?n(t,s.b):s.a=t}};return a.original=s,a}(e,t,v,S);return u(r)},e.wbg.__wbindgen_debug_string=function(e,t){const n=g(w(d(t)),r.__wbindgen_malloc,r.__wbindgen_realloc),s=m;b()[e/4+1]=s,b()[e/4+0]=n},e.wbg.__wbindgen_error_new=function(e,t){return u(new Error(o(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return d(e)===undefined},e.wbg.__wbindgen_memory=function(){return u(r.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){p(e)},e.wbg.__wbindgen_string_get=function(e,t){const n=d(t),s="string"==typeof n?n:undefined;var a,i=(a=s)===undefined||null===a?0:g(s,r.__wbindgen_malloc,r.__wbindgen_realloc),o=m;b()[e/4+1]=o,b()[e/4+0]=i},e.wbg.__wbindgen_string_new=function(e,t){return u(o(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(o(e,t))},e}function P(e,t){return r=e.exports,C.__wbindgen_wasm_module=t,y=null,T=null,a=null,r.__wbindgen_start(),r}async function C(e){if(r!==undefined)return r;const t=A();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return P(n,s)}n.PPOM=_;n.default=C}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[1650,{"./getBlocksForRange.js":1646,"./hexUtils.js":1647,"./index.js":1648,"@metamask/json-rpc-engine":2027,"@metamask/safe-event-emitter":2526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:a}=e("@metamask/json-rpc-engine"),i=e("./index.js"),{unsafeRandomBytes:o,incrementHexInt:c}=e("./hexUtils.js"),l=e("./getBlocksForRange.js");function u(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const n={},d=i({blockTracker:e,provider:t});let p=!1;const m=new r,h=a({eth_subscribe:s((async function(r,s){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const a=r.params[0],i=o(16);let m;switch(a){case"newHeads":m=h({subId:i});break;case"logs":const e=r.params[1];m=g({subId:i,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${a}"`)}return n[i]=m,void(s.result=i);function h({subId:n}){const r={type:a,destroy:async()=>{e.removeListener("sync",r.update)},update:async({oldBlock:e,newBlock:r})=>{const s=r,a=c(e);(await l({provider:t,fromBlock:a,toBlock:s})).map(u).filter((e=>null!==e)).forEach((e=>{f(n,e)}))}};return e.on("sync",r.update),r}function g({subId:e,filter:t}){t.on("update",(t=>f(e,t)));return{type:a,destroy:async()=>await d.uninstallFilter(t.idHex)}}})),eth_unsubscribe:s((async function(e,t){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const r=e.params[0],s=n[r];if(!s)return void(t.result=!1);delete n[r],await s.destroy(),t.result=!0}))});return h.destroy=function(){m.removeAllListeners();for(const e in n)n[e].destroy(),delete n[e];p=!0},{events:m,middleware:h};function f(e,t){m.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1651,{"./base-filter":1644,"./getBlocksForRange":1646,"./hexUtils":1647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:a}=e("./hexUtils");t.exports=class extends r{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,n=a(e),r=await s({provider:this.provider,fromBlock:n,toBlock:t}),i=[];for(const e of r)i.push(...e.transactions);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[167,{"../../../shared/lib/delegation":5871,"../../../shared/lib/delegation/delegation":5868,"../../../shared/lib/delegation/environment":5869,"../../../shared/lib/delegation/utils":5872,"../../../shared/lib/manifestFlags":5878,"../../../shared/lib/remote-mode":5885,"@metamask/bridge-controller":1483,"@metamask/transaction-controller":2925,"@metamask/utils":2974,"ethers/lib/utils":4403,lodash:4912},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.updateRemoteModeTransaction=n.isExistingAccount=n.getRemoteModeEnabled=n.getDailyAllowance=void 0;var r=e("@metamask/bridge-controller"),s=e("@metamask/transaction-controller"),a=e("@metamask/utils"),i=e("ethers/lib/utils"),o=e("lodash"),c=e("../../../shared/lib/delegation"),l=e("../../../shared/lib/delegation/environment"),u=e("../../../shared/lib/delegation/utils"),d=e("../../../shared/lib/delegation/delegation"),p=e("../../../shared/lib/remote-mode"),m=e("../../../shared/lib/manifestFlags");const h=e=>{const t=(0,m.getManifestFlags)().remoteFeatureFlags,n=e.remoteFeatureFlags,r=(0,o.merge)({},n,t);return Boolean(r.vaultRemoteMode)};n.getRemoteModeEnabled=h;const f=({state:e,address:t})=>{const{accounts:n}=e.internalAccounts;return Object.values(n).some((e=>e.address===t))};n.isExistingAccount=f;const g=({state:e,address:t,chainId:n})=>Object.values(e.delegations).find((e=>(0,u.isHexEqual)(t,e.delegation.delegator)&&(0,u.isHexEqual)(n,e.chainId)&&e.tags.includes(p.REMOTE_MODES.DAILY_ALLOWANCE)));n.getDailyAllowance=g;const y=({updatedFrom:e,updatedTo:t,updatedData:n})=>r=>{r.txParams.maxFeePerGas=undefined,r.txParams.maxPriorityFeePerGas=undefined,r.txParams.gas=undefined,r.txParams.data=n,r.txParams.from=e,r.txParams.to=t,r.txParams.value=undefined};n.updateRemoteModeTransaction=async({transactionMeta:e,state:t})=>{if(!h(t))return{updateTransaction:undefined};switch(e.type){case s.TransactionType.simpleSend:case s.TransactionType.tokenMethodTransfer:try{const n=(({transactionMeta:e,state:t})=>{const n=g({address:e.txParams.from,chainId:e.chainId,state:t});if(!n)return undefined;const{delegation:o,meta:m}=n;if(!f({state:t,address:o.delegate}))return undefined;if(!m)return undefined;const h=JSON.parse(m);let y;if(y=e.type===s.TransactionType.tokenMethodTransfer?h.allowances.find((t=>(0,u.isHexEqual)(t.address,e.txParams.to))):h.allowances.find((e=>e.type===r.AssetType.native)),!y)return undefined;const b=(0,i.parseEther)(y.amount.toString()).toBigInt(),w=e.txParams.value?(0,a.hexToBigInt)(e.txParams.value):BigInt(0);if(w>b)return undefined;const S={value:w,target:e.txParams.to,callData:e.txParams.data??"0x"},v=h.allowances.findIndex((t=>e.type===s.TransactionType.simpleSend?(0,u.isHexEqual)(t.address,p.NATIVE_ADDRESS):(0,u.isHexEqual)(t.address,e.txParams.to)));if(-1===v)return undefined;const T={...o.caveats[0],args:(0,u.toHex)(v,{size:32})},E={...o,caveats:[T]},k=(0,d.encodeRedeemDelegations)({delegations:[[E]],modes:[c.SINGLE_DEFAULT_MODE],executions:[[S]]});return{updatedFrom:o.delegate,updatedTo:(0,l.getDeleGatorEnvironment)((0,a.hexToNumber)(e.chainId)).DelegationManager,updatedData:k}})({transactionMeta:e,state:t});if(!n)return{updateTransaction:undefined};const{updatedFrom:o,updatedTo:m,updatedData:h}=n;return{updateTransaction:y({updatedFrom:o,updatedTo:m,updatedData:h})}}catch(e){return console.error("Error preparing daily allowance transaction",e),{updateTransaction:undefined}}default:return{updateTransaction:undefined}}}}}},{package:"$root$",file:"app/scripts/lib/remote-mode.ts"}],[168,{"./handlers":174,"./handlers/wallet-getPermissions":179,"./handlers/wallet-requestPermissions":180,"./handlers/wallet-revokePermissions":181,"@metamask/rpc-errors":2524,"@metamask/snaps-rpc-methods":2683,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createMultichainMethodMiddleware=n.createEthAccountsMethodMiddleware=n.createEip1193MethodMiddleware=void 0,n.makeMethodMiddlewareMaker=u;var r=e("@metamask/rpc-errors"),s=e("@metamask/snaps-rpc-methods"),a=e("@metamask/utils"),i=e("./handlers"),o=e("./handlers/wallet-getPermissions"),c=e("./handlers/wallet-requestPermissions"),l=e("./handlers/wallet-revokePermissions");n.createEip1193MethodMiddleware=u([...i.handlers,...i.eip1193OnlyHandlers,o.getPermissionsHandler,c.requestPermissionsHandler,l.revokePermissionsHandler]),n.createEthAccountsMethodMiddleware=u([i.ethAccountsHandler]),n.createMultichainMethodMiddleware=u(i.handlers);function u(e){const t=e.reduce(((e,t)=>{for(const n of t.methodNames)e[n]=t;return e}),{}),n=new Set(e.flatMap((({hookNames:e})=>Object.getOwnPropertyNames(e))));return e=>{!function(e,t){const n=[];if(t.forEach((t=>{(0,a.hasProperty)(e,t)||n.push(t)})),n.length>0)throw new Error(`Missing expected hooks:\n\n${n.join("\n")}\n`);const r=Object.getOwnPropertyNames(e).filter((e=>!t.has(e)));if(r.length>0)throw new Error(`Received unexpected hooks:\n\n${r.join("\n")}\n`)}(e,n);return async(n,a,i,o)=>{const c=t[n.method];if(c){const{implementation:t,hookNames:l}=c;try{return await t(n,a,i,o,(0,s.selectHooks)(e,l))}catch(e){return o(e instanceof Error?e:r.rpcErrors.internal({data:e}))}}return i()}}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[169,{"../../../../shared/constants/network":5813,"@metamask/rpc-errors":2524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createUnsupportedMethodMiddleware=function(e=s.UNSUPPORTED_RPC_METHODS){return async function(t,n,s,a){return e.has(t.method)?a(r.rpcErrors.methodNotSupported()):s()}};var r=e("@metamask/rpc-errors"),s=e("../../../../shared/constants/network")}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createUnsupportedMethodMiddleware.ts"}],[17,{"../../../../shared/lib/trace":5892,"../../../../shared/modules/selectors":5920,"../../lib/remote-mode":167,"../../lib/smart-transaction/smart-transactions":191,"../../lib/transaction/hooks/enforce-simulation-hook":217,"../../lib/transaction/metrics":218,"@metamask/smart-transactions-controller/dist/types":2603,"@metamask/transaction-controller":2925,_process:5075},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionControllerInit=void 0;var r=e("@metamask/transaction-controller"),s=e("@metamask/smart-transactions-controller/dist/types"),a=e("../../../../shared/modules/selectors"),i=e("../../lib/smart-transaction/smart-transactions"),o=e("../../../../shared/lib/trace"),c=e("../../lib/transaction/metrics"),l=e("../../lib/remote-mode"),u=e("../../lib/transaction/hooks/enforce-simulation-hook");function d(e){return{metamask:e}}n.TransactionControllerInit=e=>{var n;const{controllerMessenger:p,initMessenger:m,getFlatState:h,getGlobalChainId:f,getPermittedAccounts:g,getTransactionMetricsRequest:y,updateAccountBalanceForTransactionNetwork:b,persistedState:w}=e,{gasFeeController:S,keyringController:v,networkController:T,onboardingController:E,preferencesController:k,smartTransactionsController:_}=function(e){return{gasFeeController:()=>e.getController("GasFeeController"),keyringController:()=>e.getController("KeyringController"),networkController:()=>e.getController("NetworkController"),onboardingController:()=>e.getController("OnboardingController"),preferencesController:()=>e.getController("PreferencesController"),smartTransactionsController:()=>e.getController("SmartTransactionsController"),institutionalSnapController:()=>e.getController("InstitutionalSnapController")}}(e),A=new r.TransactionController({getCurrentNetworkEIP1559Compatibility:()=>m.call("NetworkController:getEIP1559Compatibility"),getCurrentAccountEIP1559Compatibility:async()=>!0,getExternalPendingTransactions:e=>function(e,t){return e.getTransactions({addressFrom:t,status:s.SmartTransactionStatuses.PENDING})}(_(),e),getGasFeeEstimates:(...e)=>S().fetchGasFeeEstimates(...e),getNetworkClientRegistry:(...e)=>T().getNetworkClientRegistry(...e),getNetworkState:()=>T().state,getPermittedAccounts:g,getSavedGasFees:()=>{const e=f();return k().state.advancedGasFee[e]},incomingTransactions:{client:`extension-${null===(n=t.env.METAMASK_VERSION)||void 0===n?void 0:n.replace(/\./gu,"-")}`,includeTokenTransfers:!1,isEnabled:()=>k().state.useExternalServices&&E().state.completedOnboarding,updateTransactions:!0},isAutomaticGasFeeUpdateEnabled:()=>!0,isEIP7702GasFeeTokensEnabled:async e=>{const{chainId:t}=e,n=d(h());return!(0,a.getIsSmartTransaction)(n,t)},isFirstTimeInteractionEnabled:()=>k().state.securityAlertsEnabled,isSimulationEnabled:()=>k().state.useTransactionSimulations,messenger:p,pendingTransactions:{isResubmitEnabled:()=>{const e=d(h());return!((0,a.getSmartTransactionsPreferenceEnabled)(e)&&(0,a.getChainSupportsSmartTransactions)(e))}},publicKeyEIP7702:"0x3c7a1cCCe462e96D186B8ca9a1BCB2010C3dABa3",testGasFeeFlows:Boolean(!1),trace:o.trace,hooks:{afterAdd:async({transactionMeta:e})=>(0,l.updateRemoteModeTransaction)({transactionMeta:e,state:h()}),afterSimulate:new u.EnforceSimulationHook({messenger:m}).getAfterSimulateHook(),beforePublish:e=>m.call("InstitutionalSnapController:publishHook",e),beforeSign:new u.EnforceSimulationHook({messenger:m}).getBeforeSignHook(),beforeCheckPendingTransactions:e=>m.call("InstitutionalSnapController:beforeCheckPendingTransactionHook",e),publish:(e,t)=>(0,i.publishSmartTransactionHook)({flatState:h(),initMessenger:m,signedTx:t,smartTransactionsController:_(),transactionController:A,transactionMeta:e}),publishBatch:async e=>await(0,i.publishBatchSmartTransactionHook)({transactionController:A,smartTransactionsController:_(),hookControllerMessenger:m,flatState:h(),transactions:e.transactions})},sign:(...e)=>v().signTransaction(...e),state:w.TransactionController});!function(e,t,n){const r=t();e.subscribe("TransactionController:unapprovedTransactionAdded",n),e.subscribe("TransactionController:transactionConfirmed",n),e.subscribe("TransactionController:postTransactionBalanceUpdated",c.handlePostTransactionBalanceUpdate.bind(null,r)),e.subscribe("TransactionController:unapprovedTransactionAdded",(e=>(0,c.handleTransactionAdded)(r,{transactionMeta:e}))),e.subscribe("TransactionController:transactionApproved",c.handleTransactionApproved.bind(null,r)),e.subscribe("TransactionController:transactionDropped",c.handleTransactionDropped.bind(null,r)),e.subscribe("TransactionController:transactionConfirmed",c.handleTransactionConfirmed.bind(null,r)),e.subscribe("TransactionController:transactionFailed",c.handleTransactionFailed.bind(null,r)),e.subscribe("TransactionController:transactionNewSwap",(({transactionMeta:t})=>e.call("SwapsController:setTradeTxId",t.id))),e.subscribe("TransactionController:transactionNewSwapApproval",(({transactionMeta:t})=>e.call("SwapsController:setApproveTxId",t.id))),e.subscribe("TransactionController:transactionRejected",c.handleTransactionRejected.bind(null,r)),e.subscribe("TransactionController:transactionSubmitted",c.handleTransactionSubmitted.bind(null,r))}(m,y,b);const P=function(e){return{abortTransactionSigning:e.abortTransactionSigning.bind(e),getLayer1GasFee:e.getLayer1GasFee.bind(e),getTransactions:e.getTransactions.bind(e),isAtomicBatchSupported:e.isAtomicBatchSupported.bind(e),startIncomingTransactionPolling:e.startIncomingTransactionPolling.bind(e),stopIncomingTransactionPolling:e.stopIncomingTransactionPolling.bind(e),updateAtomicBatchData:e.updateAtomicBatchData.bind(e),updateBatchTransactions:e.updateBatchTransactions.bind(e),updateEditableParams:e.updateEditableParams.bind(e),updatePreviousGasParams:e.updatePreviousGasParams.bind(e),updateSelectedGasFeeToken:e.updateSelectedGasFeeToken.bind(e),updateTransactionGasFees:e.updateTransactionGasFees.bind(e),updateTransactionSendFlowHistory:e.updateTransactionSendFlowHistory.bind(e)}}(A);return{controller:A,api:P,memStateKey:"TxController"}}}).call(this)}).call(this,e("_process"))}}},{package:"$root$",file:"app/scripts/controller-init/confirmations/transaction-controller-init.ts"}],[170,{"../../../../../shared/constants/app":5798,"./ethereum-chain-utils":172,"@metamask/controller-utils":1559,"@metamask/network-controller":2321,"@metamask/rpc-errors":2524,lodash:4912,"uri-js":5715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("uri-js")),s=e("@metamask/controller-utils"),a=e("@metamask/network-controller"),i=e("@metamask/rpc-errors"),o=e("lodash"),c=e("../../../../../shared/constants/app"),l=e("./ethereum-chain-utils");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d={methodNames:[c.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,n,c,{addNetwork:u,updateNetwork:d,getNetworkConfigurationByChainId:p,setActiveNetwork:m,requestUserApproval:h,getCurrentChainIdForDomain:f,getCaveat:g,requestPermittedChainsPermissionIncrementalForOrigin:y,rejectApprovalRequestsForOrigin:b,setTokenNetworkFilter:w,setEnabledNetworks:S,getEnabledNetworks:v}){let T;try{T=(0,l.validateAddEthereumChainParams)(e.params[0])}catch(e){return c(e)}const{chainId:E,chainName:k,firstValidBlockExplorerUrl:_,firstValidRPCUrl:A,ticker:P}=T,{origin:C}=e,M=f(C),I=p(E);if(I&&I.chainId===E&&I.nativeCurrency!==P)return c(i.rpcErrors.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${P}`}));let O=I,j=null==I?void 0:I.rpcEndpoints.findIndex((({url:e})=>r.equal(e,A))),N=_?null==I?void 0:I.blockExplorerUrls.findIndex((e=>r.equal(e,_))):undefined;const R=!I||j!==I.defaultRpcEndpointIndex||_&&N!==I.defaultBlockExplorerUrlIndex;if(R)try{if(await h({origin:C,type:s.ApprovalType.AddEthereumChain,requestData:{chainId:E,rpcPrefs:{blockExplorerUrl:_},chainName:k,rpcUrl:A,ticker:P}}),I){const e=(0,o.cloneDeep)(I);-1===j&&(e.rpcEndpoints=[...e.rpcEndpoints,{url:A,type:a.RpcEndpointType.Custom,name:k}],j=e.rpcEndpoints.length-1),e.defaultRpcEndpointIndex=j,_&&(-1===N&&(e.blockExplorerUrls=[...e.blockExplorerUrls,_],N=e.blockExplorerUrls.length-1),e.defaultBlockExplorerUrlIndex=N),O=await d(e.chainId,e,M===E?{replacementSelectedRpcEndpointIndex:e.defaultRpcEndpointIndex}:undefined)}else O=await u({blockExplorerUrls:_?[_]:[],defaultBlockExplorerUrlIndex:_?0:undefined,chainId:E,defaultRpcEndpointIndex:0,name:k,nativeCurrency:P,rpcEndpoints:[{url:A,name:k,type:a.RpcEndpointType.Custom}]})}catch(e){return c(e)}const{networkClientId:x}=O.rpcEndpoints[O.defaultRpcEndpointIndex];return(0,l.switchChain)(t,c,E,x,{isAddFlow:!0,autoApprove:R,setActiveNetwork:m,getCaveat:g,requestPermittedChainsPermissionIncrementalForOrigin:y,rejectApprovalRequestsForOrigin:b,setTokenNetworkFilter:w,setEnabledNetworks:S,getEnabledNetworks:v})},hookNames:{addNetwork:!0,updateNetwork:!0,getNetworkConfigurationByChainId:!0,setActiveNetwork:!0,requestUserApproval:!0,getCurrentChainIdForDomain:!0,getCaveat:!0,requestPermittedChainsPermissionIncrementalForOrigin:!0,rejectApprovalRequestsForOrigin:!0,setTokenNetworkFilter:!0,setEnabledNetworks:!0,getEnabledNetworks:!0}};n.default=d}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[171,{"../../../../../shared/constants/app":5798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,n,r,{getAccounts:s}){return t.result=s(),r()},hookNames:{getAccounts:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.ts"}],[172,{"../../../../../shared/constants/app":5798,"../../../../../shared/constants/network":5813,"../../../../../shared/modules/network.utils":5914,"../../util":226,"@metamask/chain-agnostic-permission":1542,"@metamask/controller-utils":1559,"@metamask/rpc-errors":2524,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.switchChain=async function(e,t,n,s,{origin:c,isAddFlow:u,isSwitchFlow:d,autoApprove:p,setActiveNetwork:m,getCaveat:h,requestPermittedChainsPermissionIncrementalForOrigin:f,setTokenNetworkFilter:g,setEnabledNetworks:y,getEnabledNetworks:b,rejectApprovalRequestsForOrigin:w,requestUserApproval:S,hasApprovalRequestsForOrigin:v,toNetworkConfiguration:T,fromNetworkConfiguration:E}){try{const k=h({target:a.Caip25EndowmentPermissionName,caveatType:a.Caip25CaveatType});if(k){if((0,a.getPermittedEthChainIds)(k.value).includes(n))null!=v&&v()&&!u&&await S({origin:c,type:r.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:T,fromNetworkConfiguration:E}});else{let e;d&&(e={isSwitchEthereumChain:!0}),await f({chainId:n,autoApprove:p,metadata:e})}}else await f({chainId:n,autoApprove:p});if(null==w||w(),await m(s),g(n),(0,o.isPrefixedFormattedHexString)(n)){const e=b(i.KnownCaipNamespace.Eip155),t=Object.keys(e);if(!t.includes(n)){if(l.FEATURED_NETWORK_CHAIN_IDS.includes(n)){y([...t.filter((e=>l.FEATURED_NETWORK_CHAIN_IDS.includes(e))),n],i.KnownCaipNamespace.Eip155)}else y([n],i.KnownCaipNamespace.Eip155)}}else{const{namespace:e}=(0,i.parseCaipChainId)(n),t=b(e),r=Object.keys(t);r.includes(n)||y([...r,n],e)}return e.result=null,t()}catch(e){return t(e)}},n.validateAddEthereumChainParams=function(e){if(!e||"object"!=typeof e)throw s.rpcErrors.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e)}`});const{chainId:t,chainName:n,blockExplorerUrls:r,nativeCurrency:a,rpcUrls:i,...o}=e,l=Object.keys(o).filter((e=>!["iconUrls"].includes(e)));if(l.length>0)throw s.rpcErrors.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${l}`});const p=d(t);if(!i||!Array.isArray(i)||0===i.length)throw s.rpcErrors.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${i}`});const m=e=>{const t=(0,u.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)},h=i.find((e=>m(e))),f=Array.isArray(r)?r.find((e=>m(e))):null;if(!h)throw s.rpcErrors.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${i}`});if("string"!=typeof n||!n)throw s.rpcErrors.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${n}`});const g=n.length>100?n.substring(0,100):n;if(null!==a){if("object"!=typeof a||Array.isArray(a))throw s.rpcErrors.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${a}`});if(18!==a.decimals)throw s.rpcErrors.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${a.decimals}`});if(!a.symbol||"string"!=typeof a.symbol)throw s.rpcErrors.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${a.symbol}`})}const y=(null==a?void 0:a.symbol)||c.UNKNOWN_TICKER_SYMBOL;if(y!==c.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof y||y.length<1||y.length>6))throw s.rpcErrors.invalidParams({message:`Expected 1-6 character string 'nativeCurrency.symbol'. Received:\n${y}`});return{chainId:p,chainName:g,firstValidBlockExplorerUrl:f,firstValidRPCUrl:h,ticker:y}},n.validateChainId=d,n.validateSwitchEthereumChainParams=function(e){var t;if(null===(t=e.params)||void 0===t||!t[0]||"object"!=typeof e.params[0])throw s.rpcErrors.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`});const{chainId:n,...r}=e.params[0];if(Object.keys(r).length>0)throw s.rpcErrors.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${Object.keys(r)}`});return d(n)};var r=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),a=e("@metamask/chain-agnostic-permission"),i=e("@metamask/utils"),o=e("../../../../../shared/modules/network.utils"),c=e("../../../../../shared/constants/app"),l=e("../../../../../shared/constants/network"),u=e("../../util");function d(e){const t="string"==typeof e?e.toLowerCase():null;if(!(0,o.isPrefixedFormattedHexString)(t))throw s.rpcErrors.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${e}`});if(!(0,o.isSafeChainId)(parseInt(e,16)))throw s.rpcErrors.invalidParams({message:`Invalid chain ID "${t}": numerical value greater than max safe value. Received:\n${e}`});return t}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/ethereum-chain-utils.js"}],[1723,{"./ledger-hw-app.cjs":1725,"./ledger-iframe-bridge.cjs":1726,"./ledger-keyring.cjs":1727,"./ledger-mobile-bridge.cjs":1728,"./ledger-transport-middleware.cjs":1729},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./ledger-keyring.cjs"),n),s(e("./ledger-iframe-bridge.cjs"),n),s(e("./ledger-mobile-bridge.cjs"),n),s(e("./ledger-transport-middleware.cjs"),n),s(e("./ledger-hw-app.cjs"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[1724,{"./type.cjs":1730,"@ledgerhq/hw-transport":900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handleLedgerTransportError=function(e,t){if(e instanceof r.TransportStatusError){const t=e;throw new s.LedgerStatusError(t.statusCode,function(e){switch(e.statusCode){case 27013:return"Ledger: User rejected the transaction";case 27264:return"Ledger: Blind signing must be enabled";case 21781:return"Ledger: Device is locked. Unlock it to continue";case 25871:return"Ledger: Ethereum app closed. Open it to unlock";default:return e.message}}(t))}throw e instanceof Error?e:new Error(t)};const r=e("@ledgerhq/hw-transport"),s=e("./type.cjs")}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-error-handler.cjs"}],[1725,{"@ledgerhq/hw-app-eth":885,buffer:4106},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMaskLedgerHwAppEth=void 0;const s=r(e("@ledgerhq/hw-app-eth")),a=e("buffer");class i extends s.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,a.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const n=e[t]??0;t+=1;const r=e.slice(t,t+=n).toString(this.transportEncoding),s=e[t]??0;t+=1;return{appName:r,version:e.slice(t,t+=s).toString(this.transportEncoding)}}}n.MetaMaskLedgerHwAppEth=i}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[1726,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,l,u,d,p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerIframeBridge=n.IFrameMessageAction=void 0;const h=e("@metamask/utils");var f;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(f||(n.IFrameMessageAction=f={}));n.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){r.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,a.set(this,new Map),p(this,r,"m",d).call(this,e),m(this,s,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await p(this,r,"m",o).call(this,p(this,s,"f").bridgeUrl),this.eventListener=p(this,r,"m",l).bind(this,p(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return p(this,s,"f")}async setOptions(e){p(this,r,"m",d).call(this,e),p(this,s,"f")?.bridgeUrl!==e.bridgeUrl&&(p(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await p(this,r,"m",u).call(this,{action:f.LedgerMakeApp},{timeout:4e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await p(this,r,"m",u).call(this,{action:f.LedgerUpdateTransport,params:{transportType:e}},{timeout:4e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return p(this,r,"m",i).call(this,f.LedgerUnlock,e)}async deviceSignTransaction(e){return p(this,r,"m",i).call(this,f.LedgerSignTransaction,e)}async deviceSignMessage(e){return p(this,r,"m",i).call(this,f.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return p(this,r,"m",i).call(this,f.LedgerSignTypedData,e)}},s=new WeakMap,a=new WeakMap,r=new WeakSet,i=async function(...[e,t]){const n=await p(this,r,"m",u).call(this,{action:e,params:t});if("payload"in n&&n.payload){if("success"in n&&n.success)return n.payload;if("error"in n.payload)throw n.payload.error}throw new Error("Unknown error occurred")},o=async function(e){return new Promise((t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)}))},c=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},l=function(e,t){const{origin:n,data:s}=t;if(n===p(this,r,"m",c).call(this,e)&&s){const e=p(this,a,"f").get(s.messageId);e?(e.resolve(s),p(this,a,"f").delete(s.messageId)):s.action===f.LedgerConnectionChange&&(this.isDeviceConnected=s.payload.connected)}},u=async function(e,{timeout:t}={}){this.currentMessageId+=1;const n={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},r=(0,h.createDeferredPromise)();if(p(this,a,"f").set(this.currentMessageId,r),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout((()=>{p(this,a,"f").has(n.messageId)&&(p(this,a,"f").delete(n.messageId),r.reject(new Error("Ledger iframe message timeout")))}),t),this.iframe.contentWindow.postMessage(n,"*"),r.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[1727,{"./ledger-error-handler.cjs":1724,"@ethereumjs/rlp":1731,"@ethereumjs/tx":516,"@ethereumjs/util":531,"@metamask/eth-sig-util":1753,"@metamask/utils":2974,buffer:4106,hdkey:4687},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c,l,u,d,p,m,h,f,g,y=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerKeyring=void 0;const w=e("@ethereumjs/rlp"),S=e("@ethereumjs/tx"),v=e("@ethereumjs/util"),T=e("@metamask/eth-sig-util"),E=e("@metamask/utils"),k=e("buffer"),_=b(e("hdkey")),A=e("./ledger-error-handler.cjs"),P="m",C=`${P}/44'/60'/0'`,M="Ledger Hardware";var I;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(I||(I={}));class O{constructor({bridge:e}){if(r.add(this),this.deviceId="",this.type=M,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new _.default,this.hdPath=C,this.paths={},this.network=I.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??C,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||y(this,r,"m",s).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter((e=>t.has(y(this,r,"m",g).call(this,e)))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new _.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return y(this,r,"m",g).call(this,(0,E.bytesToHex)((0,v.publicToAddress)(this.hdk.publicKey,!0)));const n=e?y(this,r,"m",m).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:n})}catch(e){(0,A.handleLedgerTransportError)(e,"Ledger: Unknown error while unlocking account")}return t&&s.chainCode&&(this.hdk.publicKey=k.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=k.Buffer.from(s.chainCode,"hex")),(0,E.add0x)(s.address)}async addAccounts(e){return new Promise(((t,n)=>{this.unlock().then((async n=>{const s=this.unlockedAccount,a=s+e,i=[];for(let e=s;e<a;e++){const t=y(this,r,"m",d).call(this,e);let n;n=y(this,r,"m",p).call(this)?await this.unlock(t):y(this,r,"m",l).call(this,P,e),this.accountDetails[y(this,r,"m",g).call(this,n)]={bip44:y(this,r,"m",p).call(this),hdPath:t},this.accounts.includes(n)||(this.accounts=[...this.accounts,n],i.push(n)),this.page=0}t(i)})).catch(n)}))}getName(){return M}async getFirstPage(){return this.page=0,y(this,r,"m",i).call(this,1)}async getNextPage(){return y(this,r,"m",i).call(this,1)}async getPreviousPage(){return y(this,r,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()));if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[y(this,r,"m",g).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let n;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",n=t.serialize().toString("hex"),y(this,r,"m",a).call(this,e,n,(e=>(t.v=k.Buffer.from(e.v,"hex"),t.r=k.Buffer.from(e.r,"hex"),t.s=k.Buffer.from(e.s,"hex"),t)));const s=t.getMessageToSign();return n=Array.isArray(s)?k.Buffer.from(w.RLP.encode(s)).toString("hex"):(0,E.bytesToHex)(s),y(this,r,"m",a).call(this,e,n,(e=>{const n=t.toJSON();return n.type=t.type,n.v=(0,E.add0x)(e.v),n.r=(0,E.add0x)(e.r),n.s=(0,E.add0x)(e.s),S.TransactionFactory.fromTxData(n,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:n,message:(0,E.remove0x)(t)})}catch(e){(0,A.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let a=parseInt(String(s.v),10).toString(16);a.length<2&&(a=`0${a}`);const i=`0x${s.r}${s.s}${a}`,o=(0,T.recoverPersonalSignature)({data:t,signature:i});if(y(this,r,"m",g).call(this,o)!==y(this,r,"m",g).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=y(this,r,"m",g).call(this,e),n=this.accountDetails[t];if(!n)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=n;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,n){const{version:s}=n??{};if(!("V4"===s))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:a,types:i,primaryType:o,message:c}=T.TypedDataUtils.sanitizeData(t),l=await this.unlockAccountByAddress(e);if(!l)throw new Error("Ledger: Unknown error while signing message");let u;try{u=await this.bridge.deviceSignTypedData({hdPath:l,message:{domain:{name:a.name,chainId:a.chainId,version:a.version,verifyingContract:a.verifyingContract,salt:a.salt instanceof ArrayBuffer?k.Buffer.from(a.salt).toString("hex"):a.salt},types:i,primaryType:o.toString(),message:c}})}catch(e){(0,A.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let d=parseInt(String(u.v),10).toString(16);d.length<2&&(d=`0${d}`);const p=`0x${u.r}${u.s}${d}`,m=(0,T.recoverTypedSignature)({data:t,signature:p,version:T.SignTypedDataVersion.V4});if(y(this,r,"m",g).call(this,m)!==y(this,r,"m",g).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return p}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new _.default}}n.LedgerKeyring=O,r=new WeakSet,s=function(e){if(y(this,r,"m",p).call(this)&&e.accountIndexes)for(const[t,n]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:y(this,r,"m",d).call(this,n)};const t=new Set(Object.keys(this.accountDetails));y(this,r,"m",p).call(this)||this.accounts.forEach((e=>{const n=y(this,r,"m",g).call(this,e);t.has(n)||(this.accountDetails[n]={bip44:!1,hdPath:y(this,r,"m",u).call(this,e)})}))},a=async function(e,t,n){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: hdPath is empty while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:(0,E.remove0x)(t),hdPath:r})}catch(e){(0,A.handleLedgerTransportError)(e,"Ledger: Unknown error while signing transaction")}const a=n(s);if(a.verifySignature())return a;throw new Error("Ledger: The transaction signature is not valid")},i=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,n=t+this.perPage;let s;return await this.unlock(),s=y(this,r,"m",p).call(this)?await y(this,r,"m",o).call(this,t,n):y(this,r,"m",c).call(this,t,n),s},o=async function(e,t){const n=[];for(let s=e;s<t;s++){const e=y(this,r,"m",d).call(this,s),t=await this.unlock(e),a=!this.implementFullBIP44||await y(this,r,"m",h).call(this,t);if(n.push({address:t,balance:null,index:s}),!a)break}return n},c=function(e,t){const n=[];for(let s=e;s<t;s++){const e=y(this,r,"m",l).call(this,P,s);n.push({address:e,balance:null,index:s}),this.paths[y(this,r,"m",g).call(this,e)]=s}return n},l=function(e,t){const n=this.hdk.derive(`${e}/${t}`),s=(0,E.bytesToHex)((0,v.publicToAddress)(n.publicKey,!0));return y(this,r,"m",g).call(this,s)},u=function(e){const t=y(this,r,"m",g).call(this,e);let n=this.paths[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===y(this,r,"m",l).call(this,P,e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return y(this,r,"m",d).call(this,n)},d=function(e){return y(this,r,"m",p).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},p=function(){return"m/44'/60'/0'/0/0"===this.hdPath},m=function(e){return e.toString().replace("m/","")},h=async function(e){const t=y(this,r,"m",f).call(this),n=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await n.json();return"0"!==s.status&&s.result.length>0},f=function(){return this.network},g=function(e){return(0,E.getChecksumAddress)((0,E.add0x)(e))},O.type=M}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[1728,{"./ledger-hw-app.cjs":1725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,a,i,o,c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");n.LedgerMobileBridge=class{constructor(e,t={}){r.add(this),s.set(this,void 0),a.set(this,void 0),this.isDeviceConnected=!1,c(this,a,t,"f"),c(this,s,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await l(this,r,"m",i).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return l(this,r,"m",o).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return l(this,r,"m",o).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return l(this,r,"m",o).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await l(this,r,"m",o).call(this).getAddress(e,!1,!0)}async getOptions(){return l(this,a,"f")}async setOptions(e){c(this,a,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return l(this,r,"m",i).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await l(this,r,"m",o).call(this).openEthApp()}async closeApps(){await l(this,r,"m",o).call(this).closeApps()}async getAppNameAndVersion(){return l(this,r,"m",o).call(this).getAppNameAndVersion()}},s=new WeakMap,a=new WeakMap,r=new WeakSet,i=function(){if(l(this,s,"f"))return l(this,s,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},o=function(){return l(this,r,"m",i).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[1729,{"./ledger-hw-app.cjs":1725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerTransportMiddleware=void 0;const i=e("./ledger-hw-app.cjs");n.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",r.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){s(this,r,e,"f")}getTransport(){if(!a(this,r,"f"))throw new Error("Instance `transport` is not initialized.");return a(this,r,"f")}getEthApp(){return new i.MetaMaskLedgerHwAppEth(this.getTransport())}},r=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[173,{"../../../../../shared/constants/app":5798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,n,r,{getProviderState:s}){return t.result={...await s(e.origin)},r()},hookNames:{getProviderState:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.ts"}],[1730,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerStatusError=void 0;class r extends Error{constructor(e,t){super(t),this.statusCode=e}}n.LedgerStatusError=r}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/type.cjs"}],[1731,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(Array.isArray(e)){const t=[];let n=0;for(let s=0;s<e.length;s++){const a=r(e[s]);t.push(a),n+=a.length}return m(i(n,192),...t)}const t=y(e);return 1===t.length&&t[0]<128?t:m(i(t.length,128),t)}function s(e,t,n){if(n>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function a(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(u(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const n=f(e),r=f(t+55+n.length/2);return Uint8Array.from(p(r+n))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const n=c(y(e));if(t)return{data:n.data,remainder:n.remainder.slice()};if(0!==n.remainder.length)throw new Error("invalid RLP: remainder must be zero");return n.data}function c(e){let t,n,r,i,o;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(u<=183){if(t=u-127,r=128===u?Uint8Array.from([]):s(e,1,t),2===t&&r[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:r,remainder:e.subarray(t)}}if(u<=191){if(n=u-182,e.length-1<n)throw new Error("invalid RLP: not enough bytes for string length");if(t=a(s(e,1,n)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return r=s(e,n,t+n),{data:r,remainder:e.subarray(t+n)}}if(u<=247){for(t=u-191,i=s(e,1,t);i.length;)o=c(i),l.push(o.data),i=o.remainder;return{data:l,remainder:e.subarray(t)}}{if(n=u-246,t=a(s(e,1,n)),t<56)throw new Error("invalid RLP: encoded list too short");const r=n+t;if(r>e.length)throw new Error("invalid RLP: total length is larger than the data");for(i=s(e,n,r);i.length;)o=c(i),l.push(o.data),i=o.remainder;return{data:l,remainder:e.subarray(r)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.RLP=n.utils=n.decode=n.encode=void 0,n.encode=r,n.decode=o;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function p(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n;t[n]=d(e.slice(r,r+2))}return t}function m(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}function h(e){return(new TextEncoder).encode(e)}function f(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?p((t="string"!=typeof(n=e)?n:g(n)?n.slice(2):n).length%2?`0${t}`:t):h(e);var t,n;if("number"==typeof e||"bigint"==typeof e)return e?p(f(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}n.utils={bytesToHex:u,concatBytes:m,hexToBytes:p,utf8ToBytes:h},n.RLP={encode:r,decode:o}}}},{package:"@metamask/eth-ledger-bridge-keyring>@ethereumjs/rlp",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@ethereumjs/rlp/dist/cjs/index.js"}],[1732,{"./errors":1733,"./packer":1736,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decodeSingle=n.decode=n.encodePacked=n.encodeSingle=n.encode=void 0;const r=e("@metamask/utils"),s=e("./errors"),a=e("./packer");n.encode=(e,t,n,r)=>{try{return(0,a.pack)({types:e,values:t,packed:n,tight:r})}catch(e){if(e instanceof s.ParserError)throw new s.ParserError(`Unable to encode value: ${e.message}`,e);throw new s.ParserError(`An unexpected error occurred: ${(0,s.getErrorMessage)(e)}`,e)}};n.encodeSingle=(e,t)=>(0,n.encode)([e],[t]);n.encodePacked=(e,t,r)=>(0,n.encode)(e,t,!0,r);n.decode=(e,t)=>{const n=(0,r.createBytes)(t);try{return(0,a.unpack)(e,n)}catch(e){if(e instanceof s.ParserError)throw new s.ParserError(`Unable to decode value: ${e.message}`,e);throw new s.ParserError(`An unexpected error occurred: ${(0,s.getErrorMessage)(e)}`,e)}};n.decodeSingle=(e,t)=>{const a=(0,n.decode)([e],t);return(0,r.assert)(1===a.length,new s.ParserError("Decoded value array has unexpected length.")),a[0]}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/abi.js"}],[1733,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParserError=n.getErrorStack=n.getErrorMessage=void 0;const r=e("@metamask/utils");n.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,r.isObject)(e)&&(0,r.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";n.getErrorStack=e=>e instanceof Error?e.stack:undefined;class s extends Error{constructor(e,t){super(e),this.name="ParserError";const r=(0,n.getErrorStack)(t);r&&(this.stack=r)}}n.ParserError=s}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/errors.js"}],[1734,{"./abi":1732,"./errors":1733,"./types":1749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./abi"),n),s(e("./errors"),n),s(e("./types"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/index.js"}],[1735,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.iterate=void 0;const r=e("@metamask/utils");n.iterate=function*(e,t=32){for(let n=0;n<e.length;n+=t){const s=e=>{(0,r.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,r.assert)(e%t==0,"Length must be a multiple of the size."),n+=e},a=e.subarray(n);yield{skip:s,value:a}}return{skip:()=>undefined,value:new Uint8Array}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/iterator.js"}],[1736,{"./errors":1733,"./iterator":1735,"./parsers":1743,"./utils":1751,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unpack=n.pack=n.isDynamicParser=n.getParser=void 0;const r=e("@metamask/utils"),s=e("./errors"),a=e("./iterator"),i=e("./parsers"),o=e("./utils");n.getParser=e=>{const t={address:i.address,array:i.array,bool:i.bool,bytes:i.bytes,fixedBytes:i.fixedBytes,function:i.fn,number:i.number,string:i.string,tuple:i.tuple},n=t[e];if(n)return n;const r=Object.values(t).find((t=>t.isType(e)));if(r)return r;throw new s.ParserError(`The type "${e}" is not supported.`)};n.isDynamicParser=(e,t)=>{const{isDynamic:n}=e;return"function"==typeof n?n(t):n};n.pack=({types:e,values:t,packed:a=!1,tight:i=!1,arrayPacked:c=!1,byteArray:l=new Uint8Array})=>{(0,r.assert)(e.length===t.length,new s.ParserError(`The number of types (${e.length}) does not match the number of values (${t.length}).`));const{staticBuffer:u,dynamicBuffer:d,pointers:p}=e.reduce((({staticBuffer:e,dynamicBuffer:s,pointers:o},l,u)=>{const d=(0,n.getParser)(l),p=t[u];if(a||c||!(0,n.isDynamicParser)(d,l))return{staticBuffer:d.encode({buffer:e,value:p,type:l,packed:a,tight:i}),dynamicBuffer:s,pointers:o};return{staticBuffer:(0,r.concatBytes)([e,new Uint8Array(32)]),dynamicBuffer:d.encode({buffer:s,value:p,type:l,packed:a,tight:i}),pointers:[...o,{position:e.length,pointer:s.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,r.assert)(!a&&!c||0===d.length,new s.ParserError("Invalid pack state."));const m=u.length,h=p.reduce(((e,{pointer:t,position:n})=>{const s=(0,o.padStart)((0,r.numberToBytes)(m+t));return(0,o.set)(e,s,n)}),u);return(0,r.concatBytes)([l,h,d])};n.unpack=(e,t)=>{const i=(0,a.iterate)(t);return e.map((e=>{const{value:{value:a,skip:o},done:c}=i.next();(0,r.assert)(!c,new s.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${e}".`));const l=(0,n.getParser)(e);if((0,n.isDynamicParser)(l,e)){const n=(0,r.bytesToNumber)(a.subarray(0,32)),s=t.subarray(n);return l.decode({type:e,value:s,skip:o})}return l.decode({type:e,value:a,skip:o})}))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/packer.js"}],[1737,{"../errors":1733,"../utils":1751,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.address=n.getAddress=void 0;const r=e("@metamask/utils"),s=e("../errors"),a=e("../utils");n.getAddress=e=>{const t=(0,r.createBytes)(e);return(0,r.assert)(t.length<=20,new s.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${t.length} bytes.`)),(0,a.padStart)(t,20)},n.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:s}){const i=(0,n.getAddress)(t);if(s)return(0,r.concatBytes)([e,i]);const o=(0,a.padStart)(i);return(0,r.concatBytes)([e,o])},decode:({value:e})=>(0,r.add0x)((0,r.bytesToHex)(e.slice(12,32)))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/address.js"}],[1738,{"../errors":1733,"../packer":1736,"../utils":1751,"./fixed-bytes":1741,"./tuple":1747,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.array=n.getTupleType=n.getArrayType=n.isArrayType=void 0;const r=e("@metamask/utils"),s=e("../errors"),a=e("../packer"),i=e("../utils"),o=e("./fixed-bytes"),c=e("./tuple"),l=/^(?<type>.*)\[(?<length>\d*?)\]$/u;n.isArrayType=e=>l.test(e);n.getArrayType=e=>{const t=e.match(l);return(0,r.assert)(t?.groups?.type,new s.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[t.groups.type,t.groups.length?parseInt(t.groups.length,10):undefined]};n.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,n.array={isDynamic(e){const[t,r]=(0,n.getArrayType)(e);return r===undefined||(0,a.isDynamicParser)((0,a.getParser)(t),t)},isType:e=>(0,n.isArrayType)(e),getByteLength(e){(0,r.assert)((0,n.isArrayType)(e),new s.ParserError(`Expected an array type, but received "${e}".`));const[t,i]=(0,n.getArrayType)(e);return(0,a.isDynamicParser)(this,e)||i===undefined?32:c.tuple.getByteLength((0,n.getTupleType)(t,i))},encode({type:e,buffer:t,value:l,packed:u,tight:d}){const[p,m]=(0,n.getArrayType)(e);if((0,r.assert)(!u||!(0,n.isArrayType)(p),new s.ParserError("Cannot pack nested arrays.")),u&&(0,a.isDynamicParser)((0,a.getParser)(p),p))return(0,a.pack)({types:new Array(l.length).fill(p),values:l,byteArray:t,packed:u,arrayPacked:!0,tight:d});if(m)return(0,r.assert)(m===l.length,new s.ParserError(`Array length does not match type length. Expected a length of ${m}, but received ${l.length}.`)),c.tuple.encode({type:(0,n.getTupleType)(p,m),buffer:t,value:l,packed:o.fixedBytes.isType(p)&&d,tight:d});if(u)return(0,a.pack)({types:new Array(l.length).fill(p),values:l,byteArray:t,packed:o.fixedBytes.isType(p)&&d,arrayPacked:!0,tight:d});const h=(0,i.padStart)((0,r.numberToBytes)(l.length));return(0,a.pack)({types:new Array(l.length).fill(p),values:l,byteArray:(0,r.concatBytes)([t,h]),packed:u,tight:d})},decode({type:e,value:t,...i}){const[o,l]=(0,n.getArrayType)(e);if(l){const e=c.tuple.decode({type:(0,n.getTupleType)(o,l),value:t,...i});return(0,r.assert)(e.length===l,new s.ParserError(`Array length does not match type length. Expected a length of ${l}, but received ${e.length}.`)),e}const u=(0,r.bytesToNumber)(t.subarray(0,32));return(0,a.unpack)(new Array(u).fill(o),t.subarray(32))}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/array.js"}],[1739,{"../errors":1733,"./number":1744,"@metamask/superstruct":2875,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.bool=n.getBooleanValue=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),a=e("../errors"),i=e("./number"),o=(0,r.coerce)((0,r.boolean)(),(0,r.union)([(0,r.literal)("true"),(0,r.literal)("false")]),(e=>"true"===e));n.getBooleanValue=e=>{try{return(0,r.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new a.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},n.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r,tight:a}){const o=(0,n.getBooleanValue)(t);return r?(0,s.concatBytes)([e,(0,s.bigIntToBytes)(o)]):i.number.encode({type:"uint256",buffer:e,value:o,packed:r,tight:a})},decode:e=>i.number.decode({...e,type:"uint256"})===BigInt(1)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/bool.js"}],[174,{"./add-ethereum-chain":170,"./eth-accounts":171,"./get-provider-state":173,"./log-web3-shim-usage":175,"./request-accounts":176,"./send-metadata":177,"./switch-ethereum-chain":178,"./watch-asset":182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handlers=n.ethAccountsHandler=n.eip1193OnlyHandlers=void 0;var r=d(e("./add-ethereum-chain")),s=d(e("./eth-accounts")),a=d(e("./get-provider-state")),i=d(e("./log-web3-shim-usage")),o=d(e("./request-accounts")),c=d(e("./send-metadata")),l=d(e("./switch-ethereum-chain")),u=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}n.handlers=[r.default,a.default,i.default,c.default,u.default],n.eip1193OnlyHandlers=[l.default,s.default,o.default],n.ethAccountsHandler=s.default}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.ts"}],[1740,{"../utils":1751,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=void 0;const r=e("@metamask/utils"),s=e("../utils");n.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:n}){const a=(0,r.createBytes)(t);if(n)return(0,r.concatBytes)([e,a]);const i=32*Math.ceil(a.byteLength/32);return(0,r.concatBytes)([e,(0,s.padStart)((0,r.numberToBytes)(a.byteLength)),(0,s.padEnd)(a,i)])},decode({value:e}){const t=e.subarray(0,32),n=(0,r.bytesToNumber)(t);return e.slice(32,32+n)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/bytes.js"}],[1741,{"../errors":1733,"../utils":1751,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fixedBytes=n.getByteLength=void 0;const r=e("@metamask/utils"),s=e("../errors"),a=e("../utils"),i=/^bytes([0-9]{1,2})$/u;n.getByteLength=e=>{const t=e.match(i)?.[1];(0,r.assert)(t,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const n=Number(t);return(0,r.assert)(n>0&&n<=32,new s.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),n},n.fixedBytes={isDynamic:!1,isType:e=>i.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:i,packed:o}){const c=(0,n.getByteLength)(e),l=(0,r.createBytes)(i);return(0,r.assert)(l.length<=c,new s.ParserError(`Expected a value of length ${c}, but received a value of length ${l.length}.`)),o?(0,r.concatBytes)([t,(0,a.padEnd)(l,c)]):(0,r.concatBytes)([t,(0,a.padEnd)(l)])},decode({type:e,value:t}){const r=(0,n.getByteLength)(e);return t.slice(0,r)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/fixed-bytes.js"}],[1742,{"../errors":1733,"./fixed-bytes":1741,"@metamask/superstruct":2875,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fn=n.getFunction=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),a=e("../errors"),i=e("./fixed-bytes"),o=(0,r.coerce)((0,r.object)({address:s.StrictHexStruct,selector:s.StrictHexStruct}),(0,r.union)([s.StrictHexStruct,(0,r.instance)(Uint8Array)]),(e=>{const t=(0,s.createBytes)(e);return(0,s.assert)(24===t.length,new a.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,s.bytesToHex)(t.subarray(0,20)),selector:(0,s.bytesToHex)(t.subarray(20,24))}}));n.getFunction=e=>{const t=(0,r.create)(e,o);return(0,s.concatBytes)([(0,s.hexToBytes)(t.address),(0,s.hexToBytes)(t.selector)])},n.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r,tight:s}){const a=(0,n.getFunction)(t);return i.fixedBytes.encode({type:"bytes24",buffer:e,value:a,packed:r,tight:s})},decode:({value:e})=>({address:(0,s.bytesToHex)(e.slice(0,20)),selector:(0,s.bytesToHex)(e.slice(20,24))})}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/function.js"}],[1743,{"./address":1737,"./array":1738,"./bool":1739,"./bytes":1740,"./fixed-bytes":1741,"./function":1742,"./number":1744,"./parser":1745,"./string":1746,"./tuple":1747},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./address"),n),s(e("./array"),n),s(e("./bool"),n),s(e("./bytes"),n),s(e("./fixed-bytes"),n),s(e("./function"),n),s(e("./number"),n),s(e("./parser"),n),s(e("./string"),n),s(e("./tuple"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/index.js"}],[1744,{"../errors":1733,"../utils":1751,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.number=n.getBigInt=n.assertNumberLength=n.getLength=n.isSigned=void 0;const r=e("@metamask/utils"),s=e("../errors"),a=e("../utils"),i=/^u?int(?<length>[0-9]*)?$/u;n.isSigned=e=>!e.startsWith("u");n.getLength=e=>{if("int"===e||"uint"===e)return 256;const t=e.match(i);(0,r.assert)(t?.groups?.length,new s.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const n=parseInt(t.groups.length,10);return(0,r.assert)(n>=8&&n<=256,new s.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,r.assert)(n%8==0,new s.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),n};n.assertNumberLength=(e,t)=>{const a=(0,n.getLength)(t),i=BigInt(2)**BigInt(a-((0,n.isSigned)(t)?1:0))-BigInt(1);(0,n.isSigned)(t)?(0,r.assert)(e>=-(i+BigInt(1))&&e<=i,new s.ParserError(`Number "${e}" is out of range for type "${t}".`)):(0,r.assert)(e<=i,new s.ParserError(`Number "${e}" is out of range for type "${t}".`))};n.getBigInt=e=>{try{return(0,r.createBigInt)(e)}catch{throw new s.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},n.number={isDynamic:!1,isType:e=>i.test(e),getByteLength:()=>32,encode({type:e,buffer:t,value:s,packed:i}){const o=(0,n.getBigInt)(s);if((0,n.assertNumberLength)(o,e),(0,n.isSigned)(e)){if(i){const s=(0,n.getLength)(e)/8;return(0,r.concatBytes)([t,(0,r.signedBigIntToBytes)(o,s)])}return(0,r.concatBytes)([t,(0,a.padStart)((0,r.signedBigIntToBytes)(o,32))])}if(i){const s=(0,n.getLength)(e)/8;return(0,r.concatBytes)([t,(0,a.padStart)((0,r.bigIntToBytes)(o),s)])}return(0,r.concatBytes)([t,(0,a.padStart)((0,r.bigIntToBytes)(o))])},decode({type:e,value:t}){const s=t.subarray(0,32);if((0,n.isSigned)(e)){const t=(0,r.bytesToSignedBigInt)(s);return(0,n.assertNumberLength)(t,e),t}const a=(0,r.bytesToBigInt)(s);return(0,n.assertNumberLength)(a,e),a}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/number.js"}],[1745,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/parser.js"}],[1746,{"./bytes":1740,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.string=void 0;const r=e("@metamask/utils"),s=e("./bytes");n.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:n,tight:a})=>s.bytes.encode({type:"bytes",buffer:e,value:(0,r.stringToBytes)(t),packed:n,tight:a}),decode:e=>(0,r.bytesToString)(s.bytes.decode(e))}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/string.js"}],[1747,{"../errors":1733,"../packer":1736,"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.tuple=n.getTupleElements=void 0;const r=e("@metamask/utils"),s=e("../errors"),a=e("../packer"),i=/^\((.+)\)$/u;n.getTupleElements=e=>{(0,r.assert)(e.startsWith("(")&&e.endsWith(")"),new s.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const t=[];let n="",a=0;for(let r=1;r<e.length-1;r++){const s=e[r];","===s&&0===a?(t.push(n.trim()),n=""):(n+=s,"("===s?a+=1:")"===s&&(a-=1))}return n.trim()&&t.push(n.trim()),t},n.tuple={isDynamic:e=>(0,n.getTupleElements)(e).some((e=>{const t=(0,a.getParser)(e);return(0,a.isDynamicParser)(t,e)})),isType:e=>(e=>i.test(e))(e),getByteLength(e){if((0,a.isDynamicParser)(this,e))return 32;return(0,n.getTupleElements)(e).reduce(((e,t)=>e+(0,a.getParser)(t).getByteLength(t)),0)},encode({type:e,buffer:t,value:r,packed:s,tight:i}){const o=(0,n.getTupleElements)(e);return(0,a.pack)({types:o,values:r,byteArray:t,packed:s,tight:i})},decode({type:e,value:t,skip:r}){const s=(0,n.getTupleElements)(e);return r(this.getByteLength(e)-32),(0,a.unpack)(s,t)}}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/parsers/tuple.js"}],[1748,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/types/abi.js"}],[1749,{"./abi":1748},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./abi"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/types/index.js"}],[175,{"../../../../../shared/constants/app":5798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,n,r,{getWeb3ShimUsageState:s,setWeb3ShimUsageRecorded:a}){const{origin:i}=e;s(i)===undefined&&a(i);return t.result=!0,r()},hookNames:{getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.ts"}],[1750,{"@metamask/utils":2974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.padEnd=n.padStart=n.set=void 0;const r=e("@metamask/utils");n.set=(e,t,n)=>(0,r.concatBytes)([e.subarray(0,n),t,e.subarray(n+t.length)]);n.padStart=(e,t=32)=>{const n=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,r.concatBytes)([n,e])};n.padEnd=(e,t=32)=>{const n=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,r.concatBytes)([e,n])}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/utils/buffer.js"}],[1751,{"./buffer":1750},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./buffer"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@metamask/abi-utils",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/abi-utils/dist/utils/index.js"}],[1752,{"./utils":1757,"@scure/base":1774,buffer:4106,tweetnacl:5695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.getEncryptionPublicKey=n.decryptSafely=n.decrypt=n.encryptSafely=n.encrypt=void 0;const i=e("@scure/base"),o=a(e("tweetnacl")),c=e("./utils");function l({publicKey:e,data:t,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===n){if("string"!=typeof t)throw new Error("Message data must be given as a string");const n=o.box.keyPair();let r;try{r=i.base64.decode(e)}catch(e){throw new Error("Bad public key")}const s=i.utf8.decode(t),a=o.randomBytes(o.box.nonceLength),c=o.box(s,a,r,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:i.base64.encode(a),ephemPublicKey:i.base64.encode(n.publicKey),ciphertext:i.base64.encode(c)}}throw new Error("Encryption type/version not supported")}function u({encryptedData:e,privateKey:n}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(n))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=t.from(n,"hex"),s=o.box.keyPair.fromSecretKey(r).secretKey,a=i.base64.decode(e.nonce),c=i.base64.decode(e.ciphertext),l=i.base64.decode(e.ephemPublicKey),u=o.box.open(c,a,l,s);try{if(!u)throw new Error;const e=i.utf8.encode(u);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}n.encrypt=l,n.encryptSafely=function({publicKey:e,data:n,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(n))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("object"==typeof n&&n&&"toJSON"in n)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const s={data:n,padding:""},a=t.byteLength(JSON.stringify(s),"utf-8")%2048;let i=0;return a>0&&(i=2048-a-16),s.padding="0".repeat(i),l({publicKey:e,data:JSON.stringify(s),version:r})},n.decrypt=u,n.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(u({encryptedData:e,privateKey:t})).data},n.getEncryptionPublicKey=function(e){const n=t.from(e,"hex"),r=o.box.keyPair.fromSecretKey(n).publicKey;return i.base64.encode(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1753,{"./encryption":1752,"./personal-sign":1754,"./sign-eip7702-authorization":1755,"./sign-typed-data":1756,"./utils":1757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.normalize=n.concatSig=void 0,s(e("./personal-sign"),n),s(e("./sign-typed-data"),n),s(e("./encryption"),n),s(e("./sign-eip7702-authorization"),n);var a=e("./utils");Object.defineProperty(n,"concatSig",{enumerable:!0,get:function(){return a.concatSig}}),Object.defineProperty(n,"normalize",{enumerable:!0,get:function(){return a.normalize}})}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1754,{"./utils":1757,"@ethereumjs/util":1766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractPublicKey=n.recoverPersonalSignature=n.personalSign=void 0;const r=e("@ethereumjs/util"),s=e("./utils");function a(e,t){const n=(0,r.hashPersonalMessage)((0,s.legacyToBuffer)(e));return(0,s.recoverPublicKey)(n,t)}n.personalSign=function({privateKey:e,data:t}){if((0,s.isNullish)(t))throw new Error("Missing data parameter");if((0,s.isNullish)(e))throw new Error("Missing privateKey parameter");const n=(0,s.legacyToBuffer)(t),a=(0,r.hashPersonalMessage)(n),i=(0,r.ecsign)(a,e);return(0,s.concatSig)((0,r.toBuffer)(i.v),i.r,i.s)},n.recoverPersonalSignature=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");const n=a(e,t),i=(0,r.publicToAddress)(n);return(0,r.bufferToHex)(i)},n.extractPublicKey=function({data:e,signature:t}){if((0,s.isNullish)(e))throw new Error("Missing data parameter");if((0,s.isNullish)(t))throw new Error("Missing signature parameter");return`0x${a(e,t).toString("hex")}`}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1755,{"./utils":1757,"@ethereumjs/rlp":1758,"@ethereumjs/util":1766,"@metamask/utils":2974,buffer:4106,"ethereum-cryptography/keccak":4332},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.hashEIP7702Authorization=n.recoverEIP7702Authorization=n.signEIP7702Authorization=void 0;const r=e("@ethereumjs/rlp"),s=e("@ethereumjs/util"),a=e("@metamask/utils"),i=e("ethereum-cryptography/keccak"),o=e("./utils");function c(e){l(e);const n=(0,r.encode)(e),s=t.concat([t.from("05","hex"),n]);return t.from((0,i.keccak256)(s))}function l(e){if((0,o.isNullish)(e))throw new Error("Missing authorization parameter");const[t,n,r]=e;if((0,o.isNullish)(t))throw new Error("Missing chainId parameter");if((0,o.isNullish)(n))throw new Error("Missing contractAddress parameter");if((0,o.isNullish)(r))throw new Error("Missing nonce parameter")}n.signEIP7702Authorization=function({privateKey:e,authorization:t}){if(l(t),(0,o.isNullish)(e))throw new Error("Missing privateKey parameter");const n=c(t),{r:r,s:a,v:i}=(0,s.ecsign)(n,e),u=(0,s.toBuffer)(i);return(0,o.concatSig)(u,r,a)},n.recoverEIP7702Authorization=function({signature:e,authorization:t}){if(l(t),(0,o.isNullish)(e))throw new Error("Missing signature parameter");const n=c(t),r=(0,o.recoverPublicKey)(n,e),i=(0,s.publicToAddress)(r);return(0,a.bytesToHex)(i)},n.hashEIP7702Authorization=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/sign-eip7702-authorization.js"}],[1756,{"./utils":1757,"@ethereumjs/util":1766,"@metamask/abi-utils":1734,"@metamask/abi-utils/dist/parsers":1743,"@metamask/abi-utils/dist/utils":1751,"@metamask/utils":2974,"ethereum-cryptography/keccak":4332},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.recoverTypedSignature=n.signTypedData=n.typedSignatureHash=n.TypedDataUtils=n.TYPED_MESSAGE_SCHEMA=n.SignTypedDataVersion=void 0;const r=e("@ethereumjs/util"),s=e("@metamask/abi-utils"),a=e("@metamask/abi-utils/dist/parsers"),i=e("@metamask/abi-utils/dist/utils"),o=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),l=e("./utils");var u;function d(e,t){if(!Object.keys(u).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function p(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const n=BigInt(t),r=(0,a.getLength)(e),s=BigInt(2)**BigInt(r)-BigInt(1);return(0,o.assert)(n>=-s&&n<=s,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),n}function m(e){let t=BigInt(0);for(let n=0;n<e.length;n++){const r=BigInt(e.charCodeAt(n)-48);t*=BigInt(10),t+=r>=49?r-BigInt(49)+BigInt(10):r>=17?r-BigInt(17)+BigInt(10):r}return(0,i.padStart)((0,o.bigIntToBytes)(t),20)}function h(e,t,n,a,l){if(d(l,[u.V3,u.V4]),e[n]!==undefined)return["bytes32",l===u.V4&&null==a?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,r.arrToBufArr)((0,c.keccak256)(f(n,a,e,l)))];if("function"===n)throw new Error('Unsupported or invalid type: "function"');if(a===undefined)throw new Error(`missing value for field ${t} of type ${n}`);if("address"===n){if("number"==typeof a)return["address",(0,i.padStart)((0,o.numberToBytes)(a),20)];if((0,o.isStrictHexString)(a))return["address",(0,o.add0x)(a)];if("string"==typeof a)return["address",m(a).subarray(0,20)]}if("bool"===n)return["bool",Boolean(a)];if("bytes"===n)return"number"==typeof a?a=(0,o.numberToBytes)(a):(0,o.isStrictHexString)(a)||"0x"===a?a=(0,o.hexToBytes)(a):"string"==typeof a&&(a=(0,o.stringToBytes)(a)),["bytes32",(0,r.arrToBufArr)((0,c.keccak256)(a))];if(n.startsWith("bytes")&&"bytes"!==n&&!n.includes("["))return"number"==typeof a?a<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(a))]:(0,o.isStrictHexString)(a)?["bytes32",(0,o.hexToBytes)(a)]:["bytes32",a];if(n.startsWith("int")&&!n.includes("[")){const e=p(n,a);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===n)return a="number"==typeof a?(0,o.numberToBytes)(a):(0,o.stringToBytes)(null!=a?a:""),["bytes32",(0,r.arrToBufArr)((0,c.keccak256)(a))];if(n.endsWith("]")){if(l===u.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const i=n.slice(0,n.lastIndexOf("[")),o=a.map((n=>h(e,t,i,n,l)));return["bytes32",(0,r.arrToBufArr)((0,c.keccak256)((0,s.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[n,a]}function f(e,t,n,a){d(a,[u.V3,u.V4]);const i=["bytes32"],o=[w(e,n)];for(const r of n[e]){if(a===u.V3&&t[r.name]===undefined)continue;const[e,s]=h(n,r.name,r.type,t[r.name],a);i.push(e),o.push(s)}return(0,r.arrToBufArr)((0,s.encode)(i,o))}function g(e,t){let n="";const r=y(e,t);r.delete(e);const s=[e,...Array.from(r).sort()];for(const e of s){if(!t[e])throw new Error(`No type definition specified: ${e}`);n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return n}function y(e,t,n=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const r=e.match(/^\w*/u);if([e]=r,n.has(e)||t[e]===undefined)return n;n.add(e);for(const r of t[e])y(r.type,t,n);return n}function b(e,t,n,s){d(s,[u.V3,u.V4]);const a=f(e,t,n,s),i=(0,c.keccak256)(a);return(0,r.arrToBufArr)(i)}function w(e,t){const n=(0,o.stringToBytes)(g(e,t));return(0,r.arrToBufArr)((0,c.keccak256)(n))}function S(e){const t={};for(const r in n.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function v(e,t){d(t,[u.V3,u.V4]);const n=S(e),{domain:r}=n;return b("EIP712Domain",r,{EIP712Domain:n.types.EIP712Domain},t)}function T(e,t){if((0,a.isArrayType)(e)&&Array.isArray(t)){const[n]=(0,a.getArrayType)(e);return t.map((e=>T(n,e)))}if("address"===e){if((0,o.isStrictHexString)(t))return(0,i.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,i.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const n=(0,a.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,n);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,n);if(t instanceof Uint8Array)return t.subarray(0,n)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const n=(0,a.getLength)(e);return BigInt.asIntN(n,BigInt(t))}return t}function E(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const n=p(e,t);if(n>=BigInt(0))return(0,i.padStart)((0,o.bigIntToBytes)(n),32);const r=(0,a.getLength)(e),s=BigInt.asIntN(r,n);return(0,o.signedBigIntToBytes)(s,32)}return t}))}function k(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const n=e.map((({name:e,type:t,value:n})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(r=n,r.map((e=>"number"==typeof e?(0,i.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,i.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,i.padStart)(e.subarray(0,32),32):e)))};var r;if(t.startsWith("int")&&(0,a.isArrayType)(t)){const[r,s]=(0,a.getArrayType)(t);return{name:e,type:`bytes32[${null!=s?s:""}]`,value:E(r,n)}}return{name:e,type:t,value:T(t,n)}})),u=n.map((e=>"bytes"!==e.type?e.value:(0,l.legacyToBuffer)(e.value))),d=n.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),p=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,r.arrToBufArr)((0,c.keccak256)((0,s.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,s.encodePacked)(["string[]"],[p],!0)),(0,c.keccak256)((0,s.encodePacked)(d,u,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(u=n.SignTypedDataVersion||(n.SignTypedDataVersion={})),n.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},n.TypedDataUtils={encodeData:f,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:w,sanitizeData:S,eip712Hash:function(e,t){d(t,[u.V3,u.V4]);const n=S(e),s=[(0,o.hexToBytes)("1901")];return s.push(v(e,t)),"EIP712Domain"!==n.primaryType&&s.push(b(n.primaryType,n.message,n.types,t)),(0,r.arrToBufArr)((0,c.keccak256)((0,o.concatBytes)(s)))},eip712DomainHash:v},n.typedSignatureHash=function(e){const t=k(e);return(0,o.bytesToHex)(t)},n.signTypedData=function({privateKey:e,data:t,version:s}){if(d(s),(0,l.isNullish)(t))throw new Error("Missing data parameter");if((0,l.isNullish)(e))throw new Error("Missing private key parameter");const a=s===u.V1?k(t):n.TypedDataUtils.eip712Hash(t,s),i=(0,r.ecsign)(a,e);return(0,l.concatSig)((0,r.arrToBufArr)((0,o.bigIntToBytes)(i.v)),i.r,i.s)},n.recoverTypedSignature=function({data:e,signature:t,version:s}){if(d(s),(0,l.isNullish)(e))throw new Error("Missing data parameter");if((0,l.isNullish)(t))throw new Error("Missing signature parameter");const a=s===u.V1?k(e):n.TypedDataUtils.eip712Hash(e,s),i=(0,l.recoverPublicKey)(a,t),c=(0,r.publicToAddress)(i);return(0,o.bytesToHex)(c)}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1757,{"@ethereumjs/util":1766,"@metamask/utils":2974,buffer:4106},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.normalize=n.recoverPublicKey=n.concatSig=n.legacyToBuffer=n.isNullish=n.padWithZeroes=void 0;const r=e("@ethereumjs/util"),s=e("@metamask/utils");function a(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function i(e){return null===e||e===undefined}n.padWithZeroes=a,n.isNullish=i,n.legacyToBuffer=function(e){return"string"!=typeof e||(0,r.isHexString)(e)?(0,r.toBuffer)(e):t.from(e)},n.concatSig=function(e,t,n){const i=(0,r.fromSigned)(t),o=(0,r.fromSigned)(n),c=(0,r.bufferToInt)(e),l=a((0,r.toUnsigned)(i).toString("hex"),64),u=a((0,r.toUnsigned)(o).toString("hex"),64),d=(0,s.remove0x)((0,s.numberToHex)(c));return(0,s.add0x)(l.concat(u,d))},n.recoverPublicKey=function(e,t){const n=(0,r.fromRpcSig)(t);return(0,r.ecrecover)(e,n.v,n.r,n.s)},n.normalize=function(e){if(i(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,s.numberToBytes)(e);e=(0,s.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,s.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1758,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(Array.isArray(e)){const t=[];let n=0;for(let s=0;s<e.length;s++){const a=r(e[s]);t.push(a),n+=a.length}return m(i(n,192),...t)}const t=y(e);return 1===t.length&&t[0]<128?t:m(i(t.length,128),t)}function s(e,t,n){if(n>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function a(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(u(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const n=f(e),r=f(t+55+n.length/2);return Uint8Array.from(p(r+n))}function o(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const n=c(y(e));if(t)return n;if(0!==n.remainder.length)throw new Error("invalid RLP: remainder must be zero");return n.data}function c(e){let t,n,r,i,o;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,r=128===u?Uint8Array.from([]):s(e,1,t),2===t&&r[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:r,remainder:e.slice(t)}}if(u<=191){if(n=u-182,e.length-1<n)throw new Error("invalid RLP: not enough bytes for string length");if(t=a(s(e,1,n)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return r=s(e,n,t+n),{data:r,remainder:e.slice(t+n)}}if(u<=247){for(t=u-191,i=s(e,1,t);i.length;)o=c(i),l.push(o.data),i=o.remainder;return{data:l,remainder:e.slice(t)}}{if(n=u-246,t=a(s(e,1,n)),t<56)throw new Error("invalid RLP: encoded list too short");const r=n+t;if(r>e.length)throw new Error("invalid RLP: total length is larger than the data");for(i=s(e,n,r);i.length;)o=c(i),l.push(o.data),i=o.remainder;return{data:l,remainder:e.slice(r)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.RLP=n.utils=n.decode=n.encode=void 0,n.encode=r,n.decode=o;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function p(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n;t[n]=d(e.slice(r,r+2))}return t}function m(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}function h(e){return(new TextEncoder).encode(e)}function f(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?p((t="string"!=typeof(n=e)?n:g(n)?n.slice(2):n).length%2?`0${t}`:t):h(e);var t,n;if("number"==typeof e||"bigint"==typeof e)return e?p(f(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}n.utils={bytesToHex:u,concatBytes:m,hexToBytes:p,utf8ToBytes:h},n.RLP={encode:r,decode:o}}}},{package:"@metamask/eth-ledger-bridge-keyring>@metamask/eth-sig-util>@ethereumjs/rlp",file:"node_modules/@metamask/eth-ledger-bridge-keyring/node_modules/@metamask/eth-sig-util/node_modules/@ethereumjs/rlp/dist/index.js"}]],[],{});